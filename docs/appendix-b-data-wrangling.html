<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 19 Appendix B: Data wrangling | Psych 710: Statistical Methods II</title>
  <meta name="description" content="Course notes for Psych 710." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 19 Appendix B: Data wrangling | Psych 710: Statistical Methods II" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Course notes for Psych 710." />
  <meta name="github-repo" content="SocialInteractionLab/psych710-notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 19 Appendix B: Data wrangling | Psych 710: Statistical Methods II" />
  
  <meta name="twitter:description" content="Course notes for Psych 710." />
  

<meta name="author" content="Robert Hawkins" />


<meta name="date" content="2024-01-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualization-2-1.html"/>
<link rel="next" href="model-assumptions.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.10/grViz.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.31/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Psych 252</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-homepage"><i class="fa fa-check"></i>Course homepage</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license-and-citation"><i class="fa fa-check"></i>License and citation</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>1</b> Probability</a>
<ul>
<li class="chapter" data-level="1.1" data-path="probability.html"><a href="probability.html#load-packages-load-data-set-theme"><i class="fa fa-check"></i><b>1.1</b> Load packages, load data, set theme</a></li>
<li class="chapter" data-level="1.2" data-path="probability.html"><a href="probability.html#learning-goals"><i class="fa fa-check"></i><b>1.2</b> Learning goals</a></li>
<li class="chapter" data-level="1.3" data-path="probability.html"><a href="probability.html#counting"><i class="fa fa-check"></i><b>1.3</b> Counting</a></li>
<li class="chapter" data-level="1.4" data-path="probability.html"><a href="probability.html#sampling"><i class="fa fa-check"></i><b>1.4</b> Sampling</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="probability.html"><a href="probability.html#drawing-rows-from-a-data-frame"><i class="fa fa-check"></i><b>1.4.1</b> Drawing rows from a data frame</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="probability.html"><a href="probability.html#more-complex-counting-matching"><i class="fa fa-check"></i><b>1.5</b> More complex counting / matching</a></li>
<li class="chapter" data-level="1.6" data-path="probability.html"><a href="probability.html#conditional-probability"><i class="fa fa-check"></i><b>1.6</b> Conditional probability</a></li>
<li class="chapter" data-level="1.7" data-path="probability.html"><a href="probability.html#law-of-total-probability"><i class="fa fa-check"></i><b>1.7</b> Law of total probability</a></li>
<li class="chapter" data-level="1.8" data-path="probability.html"><a href="probability.html#additional-resources"><i class="fa fa-check"></i><b>1.8</b> Additional resources</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="probability.html"><a href="probability.html#cheatsheets"><i class="fa fa-check"></i><b>1.8.1</b> Cheatsheets</a></li>
<li class="chapter" data-level="1.8.2" data-path="probability.html"><a href="probability.html#books-and-chapters"><i class="fa fa-check"></i><b>1.8.2</b> Books and chapters</a></li>
<li class="chapter" data-level="1.8.3" data-path="probability.html"><a href="probability.html#misc"><i class="fa fa-check"></i><b>1.8.3</b> Misc</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="probability.html"><a href="probability.html#session-info"><i class="fa fa-check"></i><b>1.9</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="estimation.html"><a href="estimation.html"><i class="fa fa-check"></i><b>2</b> Estimation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="estimation.html"><a href="estimation.html#load-packages-and-set-plotting-theme"><i class="fa fa-check"></i><b>2.1</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="2.2" data-path="estimation.html"><a href="estimation.html#working-with-distributions"><i class="fa fa-check"></i><b>2.2</b> Working with distributions</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="estimation.html"><a href="estimation.html#plotting-distributions"><i class="fa fa-check"></i><b>2.2.1</b> Plotting distributions</a></li>
<li class="chapter" data-level="2.2.2" data-path="estimation.html"><a href="estimation.html#sampling-from-distributions"><i class="fa fa-check"></i><b>2.2.2</b> Sampling from distributions</a></li>
<li class="chapter" data-level="2.2.3" data-path="estimation.html"><a href="estimation.html#understanding-density"><i class="fa fa-check"></i><b>2.2.3</b> Understanding <code>density()</code></a></li>
<li class="chapter" data-level="2.2.4" data-path="estimation.html"><a href="estimation.html#cumulative-probability-distributions"><i class="fa fa-check"></i><b>2.2.4</b> Cumulative probability distributions</a></li>
<li class="chapter" data-level="2.2.5" data-path="estimation.html"><a href="estimation.html#inverse-cumulative-distribution"><i class="fa fa-check"></i><b>2.2.5</b> Inverse cumulative distribution</a></li>
<li class="chapter" data-level="2.2.6" data-path="estimation.html"><a href="estimation.html#computing-probabilities"><i class="fa fa-check"></i><b>2.2.6</b> Computing probabilities</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="estimation.html"><a href="estimation.html#estimating-a-coin"><i class="fa fa-check"></i><b>2.3</b> Estimating a coin</a></li>
<li class="chapter" data-level="2.4" data-path="estimation.html"><a href="estimation.html#bayesian-inference-with-the-normal-distribution"><i class="fa fa-check"></i><b>2.4</b> Bayesian inference with the normal distribution</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="estimation.html"><a href="estimation.html#analytic-solution"><i class="fa fa-check"></i><b>2.4.1</b> Analytic solution</a></li>
<li class="chapter" data-level="2.4.2" data-path="estimation.html"><a href="estimation.html#solution-via-sampling"><i class="fa fa-check"></i><b>2.4.2</b> Solution via sampling</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="estimation.html"><a href="estimation.html#additional-resources-1"><i class="fa fa-check"></i><b>2.5</b> Additional resources</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="estimation.html"><a href="estimation.html#datacamp"><i class="fa fa-check"></i><b>2.5.1</b> Datacamp</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="estimation.html"><a href="estimation.html#session-info-1"><i class="fa fa-check"></i><b>2.6</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="modeling-data.html"><a href="modeling-data.html"><i class="fa fa-check"></i><b>3</b> Modeling data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="modeling-data.html"><a href="modeling-data.html#load-packages-and-set-plotting-theme-1"><i class="fa fa-check"></i><b>3.1</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="3.2" data-path="modeling-data.html"><a href="modeling-data.html#modeling-data-1"><i class="fa fa-check"></i><b>3.2</b> Modeling data</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="modeling-data.html"><a href="modeling-data.html#simplicity-vs.-accuracy-trade-off"><i class="fa fa-check"></i><b>3.2.1</b> Simplicity vs. accuracy trade-off</a></li>
<li class="chapter" data-level="3.2.2" data-path="modeling-data.html"><a href="modeling-data.html#sampling-distributions-for-median-and-mean"><i class="fa fa-check"></i><b>3.2.2</b> Sampling distributions for median and mean</a></li>
<li class="chapter" data-level="3.2.3" data-path="modeling-data.html"><a href="modeling-data.html#residuals-need-to-be-normally-distributed-not-the-data-itself"><i class="fa fa-check"></i><b>3.2.3</b> Residuals need to be normally distributed, not the data itself</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="modeling-data.html"><a href="modeling-data.html#hypothesis-testing-one-sample-t-test"><i class="fa fa-check"></i><b>3.3</b> Hypothesis testing: “One-sample t-test”</a></li>
<li class="chapter" data-level="3.4" data-path="modeling-data.html"><a href="modeling-data.html#building-a-sampling-distribution-of-pre"><i class="fa fa-check"></i><b>3.4</b> Building a sampling distribution of PRE</a></li>
<li class="chapter" data-level="3.5" data-path="modeling-data.html"><a href="modeling-data.html#misc-1"><i class="fa fa-check"></i><b>3.5</b> Misc</a></li>
<li class="chapter" data-level="3.6" data-path="modeling-data.html"><a href="modeling-data.html#additional-resources-2"><i class="fa fa-check"></i><b>3.6</b> Additional resources</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="modeling-data.html"><a href="modeling-data.html#reading"><i class="fa fa-check"></i><b>3.6.1</b> Reading</a></li>
<li class="chapter" data-level="3.6.2" data-path="modeling-data.html"><a href="modeling-data.html#datacamp-1"><i class="fa fa-check"></i><b>3.6.2</b> Datacamp</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="modeling-data.html"><a href="modeling-data.html#session-info-2"><i class="fa fa-check"></i><b>3.7</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="inference.html"><a href="inference.html"><i class="fa fa-check"></i><b>4</b> Inference</a>
<ul>
<li class="chapter" data-level="4.1" data-path="inference.html"><a href="inference.html#load-packages-and-set-plotting-theme-2"><i class="fa fa-check"></i><b>4.1</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="4.2" data-path="inference.html"><a href="inference.html#making-statistical-inferences-frequentist-style"><i class="fa fa-check"></i><b>4.2</b> Making statistical inferences (frequentist style)</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="inference.html"><a href="inference.html#population-distribution"><i class="fa fa-check"></i><b>4.2.1</b> Population distribution</a></li>
<li class="chapter" data-level="4.2.2" data-path="inference.html"><a href="inference.html#distribution-of-a-single-sample"><i class="fa fa-check"></i><b>4.2.2</b> Distribution of a single sample</a></li>
<li class="chapter" data-level="4.2.3" data-path="inference.html"><a href="inference.html#the-sampling-distribution"><i class="fa fa-check"></i><b>4.2.3</b> The sampling distribution</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="inference.html"><a href="inference.html#understanding-p-values"><i class="fa fa-check"></i><b>4.3</b> Understanding p-values</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="inference.html"><a href="inference.html#permutation-test"><i class="fa fa-check"></i><b>4.3.1</b> Permutation test</a></li>
<li class="chapter" data-level="4.3.2" data-path="inference.html"><a href="inference.html#t-test-by-hand"><i class="fa fa-check"></i><b>4.3.2</b> t-test by hand</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="inference.html"><a href="inference.html#confidence-intervals"><i class="fa fa-check"></i><b>4.4</b> Confidence intervals</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="inference.html"><a href="inference.html#mean_cl_boot-explained"><i class="fa fa-check"></i><b>4.4.1</b> <code>mean_cl_boot()</code> explained</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="inference.html"><a href="inference.html#additional-resources-3"><i class="fa fa-check"></i><b>4.5</b> Additional resources</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="inference.html"><a href="inference.html#misc-2"><i class="fa fa-check"></i><b>4.5.1</b> Misc</a></li>
<li class="chapter" data-level="4.5.2" data-path="inference.html"><a href="inference.html#datacamp-2"><i class="fa fa-check"></i><b>4.5.2</b> Datacamp</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="inference.html"><a href="inference.html#session-info-3"><i class="fa fa-check"></i><b>4.6</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>5</b> Linear regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="linear-regression.html"><a href="linear-regression.html#learning-goals-1"><i class="fa fa-check"></i><b>5.1</b> Learning goals</a></li>
<li class="chapter" data-level="5.2" data-path="linear-regression.html"><a href="linear-regression.html#load-packages-and-set-plotting-theme-3"><i class="fa fa-check"></i><b>5.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="5.3" data-path="linear-regression.html"><a href="linear-regression.html#load-data-sets"><i class="fa fa-check"></i><b>5.3</b> Load data sets</a></li>
<li class="chapter" data-level="5.4" data-path="linear-regression.html"><a href="linear-regression.html#multiple-continuous-variables"><i class="fa fa-check"></i><b>5.4</b> Multiple continuous variables</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="linear-regression.html"><a href="linear-regression.html#explore-correlations"><i class="fa fa-check"></i><b>5.4.1</b> Explore correlations</a></li>
<li class="chapter" data-level="5.4.2" data-path="linear-regression.html"><a href="linear-regression.html#multipe-regression"><i class="fa fa-check"></i><b>5.4.2</b> Multipe regression</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="linear-regression.html"><a href="linear-regression.html#one-categorical-variable"><i class="fa fa-check"></i><b>5.5</b> One categorical variable</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="linear-regression.html"><a href="linear-regression.html#visualization-of-the-model-predictions"><i class="fa fa-check"></i><b>5.5.1</b> Visualization of the model predictions</a></li>
<li class="chapter" data-level="5.5.2" data-path="linear-regression.html"><a href="linear-regression.html#dummy-coding"><i class="fa fa-check"></i><b>5.5.2</b> Dummy coding</a></li>
<li class="chapter" data-level="5.5.3" data-path="linear-regression.html"><a href="linear-regression.html#reporting-the-results"><i class="fa fa-check"></i><b>5.5.3</b> Reporting the results</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="linear-regression.html"><a href="linear-regression.html#one-continuous-and-one-categorical-variable"><i class="fa fa-check"></i><b>5.6</b> One continuous and one categorical variable</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="linear-regression.html"><a href="linear-regression.html#visualization-of-the-model-predictions-1"><i class="fa fa-check"></i><b>5.6.1</b> Visualization of the model predictions</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="linear-regression.html"><a href="linear-regression.html#interactions"><i class="fa fa-check"></i><b>5.7</b> Interactions</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="linear-regression.html"><a href="linear-regression.html#visualization-1"><i class="fa fa-check"></i><b>5.7.1</b> Visualization</a></li>
<li class="chapter" data-level="5.7.2" data-path="linear-regression.html"><a href="linear-regression.html#hypothesis-test"><i class="fa fa-check"></i><b>5.7.2</b> Hypothesis test</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="linear-regression.html"><a href="linear-regression.html#additional-resources-4"><i class="fa fa-check"></i><b>5.8</b> Additional resources</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="linear-regression.html"><a href="linear-regression.html#datacamp-3"><i class="fa fa-check"></i><b>5.8.1</b> Datacamp</a></li>
<li class="chapter" data-level="5.8.2" data-path="linear-regression.html"><a href="linear-regression.html#misc-3"><i class="fa fa-check"></i><b>5.8.2</b> Misc</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="linear-regression.html"><a href="linear-regression.html#session-info-4"><i class="fa fa-check"></i><b>5.9</b> Session info</a></li>
<li class="chapter" data-level="5.10" data-path="linear-regression.html"><a href="linear-regression.html#references"><i class="fa fa-check"></i><b>5.10</b> References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="contrasts.html"><a href="contrasts.html"><i class="fa fa-check"></i><b>6</b> Contrasts</a>
<ul>
<li class="chapter" data-level="6.1" data-path="contrasts.html"><a href="contrasts.html#learning-goals-2"><i class="fa fa-check"></i><b>6.1</b> Learning goals</a></li>
<li class="chapter" data-level="6.2" data-path="contrasts.html"><a href="contrasts.html#load-packages-and-set-plotting-theme-4"><i class="fa fa-check"></i><b>6.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="6.3" data-path="contrasts.html"><a href="contrasts.html#load-data-sets-1"><i class="fa fa-check"></i><b>6.3</b> Load data sets</a></li>
<li class="chapter" data-level="6.4" data-path="contrasts.html"><a href="contrasts.html#one-way-anova"><i class="fa fa-check"></i><b>6.4</b> One-way ANOVA</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="contrasts.html"><a href="contrasts.html#visualization-2"><i class="fa fa-check"></i><b>6.4.1</b> Visualization</a></li>
<li class="chapter" data-level="6.4.2" data-path="contrasts.html"><a href="contrasts.html#model-fitting"><i class="fa fa-check"></i><b>6.4.2</b> Model fitting</a></li>
<li class="chapter" data-level="6.4.3" data-path="contrasts.html"><a href="contrasts.html#hypothesis-test-1"><i class="fa fa-check"></i><b>6.4.3</b> Hypothesis test</a></li>
<li class="chapter" data-level="6.4.4" data-path="contrasts.html"><a href="contrasts.html#visualize-the-models-predictions"><i class="fa fa-check"></i><b>6.4.4</b> Visualize the model’s predictions</a></li>
<li class="chapter" data-level="6.4.5" data-path="contrasts.html"><a href="contrasts.html#dummy-coding-1"><i class="fa fa-check"></i><b>6.4.5</b> Dummy coding</a></li>
<li class="chapter" data-level="6.4.6" data-path="contrasts.html"><a href="contrasts.html#follow-up-questions"><i class="fa fa-check"></i><b>6.4.6</b> Follow up questions</a></li>
<li class="chapter" data-level="6.4.7" data-path="contrasts.html"><a href="contrasts.html#variance-decomposition"><i class="fa fa-check"></i><b>6.4.7</b> Variance decomposition</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="contrasts.html"><a href="contrasts.html#two-way-anova"><i class="fa fa-check"></i><b>6.5</b> Two-way ANOVA</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="contrasts.html"><a href="contrasts.html#visualization-3"><i class="fa fa-check"></i><b>6.5.1</b> Visualization</a></li>
<li class="chapter" data-level="6.5.2" data-path="contrasts.html"><a href="contrasts.html#model-fitting-1"><i class="fa fa-check"></i><b>6.5.2</b> Model fitting</a></li>
<li class="chapter" data-level="6.5.3" data-path="contrasts.html"><a href="contrasts.html#interpreting-interactions"><i class="fa fa-check"></i><b>6.5.3</b> Interpreting interactions</a></li>
<li class="chapter" data-level="6.5.4" data-path="contrasts.html"><a href="contrasts.html#variance-decomposition-1"><i class="fa fa-check"></i><b>6.5.4</b> Variance decomposition</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="contrasts.html"><a href="contrasts.html#two-way-anova-with-interaction"><i class="fa fa-check"></i><b>6.6</b> Two-way ANOVA (with interaction)</a></li>
<li class="chapter" data-level="6.7" data-path="contrasts.html"><a href="contrasts.html#anova-with-unbalanced-design"><i class="fa fa-check"></i><b>6.7</b> ANOVA with unbalanced design</a></li>
<li class="chapter" data-level="6.8" data-path="contrasts.html"><a href="contrasts.html#interpreting-parameters-very-important"><i class="fa fa-check"></i><b>6.8</b> Interpreting parameters (very important!)</a></li>
<li class="chapter" data-level="6.9" data-path="contrasts.html"><a href="contrasts.html#linear-contrasts"><i class="fa fa-check"></i><b>6.9</b> Linear contrasts</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="contrasts.html"><a href="contrasts.html#hypothetical-data"><i class="fa fa-check"></i><b>6.9.1</b> Hypothetical data</a></li>
<li class="chapter" data-level="6.9.2" data-path="contrasts.html"><a href="contrasts.html#visualization-4"><i class="fa fa-check"></i><b>6.9.2</b> Visualization</a></li>
<li class="chapter" data-level="6.9.3" data-path="contrasts.html"><a href="contrasts.html#orthogonal-contrasts"><i class="fa fa-check"></i><b>6.9.3</b> Orthogonal contrasts</a></li>
<li class="chapter" data-level="6.9.4" data-path="contrasts.html"><a href="contrasts.html#post-hoc-tests"><i class="fa fa-check"></i><b>6.9.4</b> Post-hoc tests</a></li>
<li class="chapter" data-level="6.9.5" data-path="contrasts.html"><a href="contrasts.html#understanding-dummy-coding"><i class="fa fa-check"></i><b>6.9.5</b> Understanding dummy coding</a></li>
<li class="chapter" data-level="6.9.6" data-path="contrasts.html"><a href="contrasts.html#understanding-sum-coding"><i class="fa fa-check"></i><b>6.9.6</b> Understanding sum coding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="power.html"><a href="power.html"><i class="fa fa-check"></i><b>7</b> Power</a>
<ul>
<li class="chapter" data-level="7.1" data-path="power.html"><a href="power.html#learning-goals-3"><i class="fa fa-check"></i><b>7.1</b> Learning goals</a></li>
<li class="chapter" data-level="7.2" data-path="power.html"><a href="power.html#load-packages-and-set-plotting-theme-5"><i class="fa fa-check"></i><b>7.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="7.3" data-path="power.html"><a href="power.html#load-data-sets-2"><i class="fa fa-check"></i><b>7.3</b> Load data sets</a></li>
<li class="chapter" data-level="7.4" data-path="power.html"><a href="power.html#decision-making"><i class="fa fa-check"></i><b>7.4</b> Decision-making</a></li>
<li class="chapter" data-level="7.5" data-path="power.html"><a href="power.html#effect-sizes"><i class="fa fa-check"></i><b>7.5</b> Effect sizes</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="power.html"><a href="power.html#cohens-d"><i class="fa fa-check"></i><b>7.5.1</b> Cohen’s d</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="power.html"><a href="power.html#determining-sample-size"><i class="fa fa-check"></i><b>7.6</b> Determining sample size</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="power.html"><a href="power.html#pwr-package"><i class="fa fa-check"></i><b>7.6.1</b> <code>pwr</code> package</a></li>
<li class="chapter" data-level="7.6.2" data-path="power.html"><a href="power.html#power-analysis"><i class="fa fa-check"></i><b>7.6.2</b> Power analysis</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="power.html"><a href="power.html#additional-resources-5"><i class="fa fa-check"></i><b>7.7</b> Additional resources</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="power.html"><a href="power.html#datacamp-4"><i class="fa fa-check"></i><b>7.7.1</b> Datacamp</a></li>
<li class="chapter" data-level="7.7.2" data-path="power.html"><a href="power.html#cheatsheets-1"><i class="fa fa-check"></i><b>7.7.2</b> Cheatsheets</a></li>
<li class="chapter" data-level="7.7.3" data-path="power.html"><a href="power.html#misc-4"><i class="fa fa-check"></i><b>7.7.3</b> Misc</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="power.html"><a href="power.html#session-info-5"><i class="fa fa-check"></i><b>7.8</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="model-comparison.html"><a href="model-comparison.html"><i class="fa fa-check"></i><b>8</b> Model comparison</a>
<ul>
<li class="chapter" data-level="8.1" data-path="model-comparison.html"><a href="model-comparison.html#learning-goals-4"><i class="fa fa-check"></i><b>8.1</b> Learning goals</a></li>
<li class="chapter" data-level="8.2" data-path="model-comparison.html"><a href="model-comparison.html#load-packages-and-set-plotting-theme-6"><i class="fa fa-check"></i><b>8.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="8.3" data-path="model-comparison.html"><a href="model-comparison.html#model-comparison-1"><i class="fa fa-check"></i><b>8.3</b> Model comparison</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="model-comparison.html"><a href="model-comparison.html#fitting-vs.-predicting"><i class="fa fa-check"></i><b>8.3.1</b> Fitting vs. predicting</a></li>
<li class="chapter" data-level="8.3.2" data-path="model-comparison.html"><a href="model-comparison.html#f-test"><i class="fa fa-check"></i><b>8.3.2</b> F-test</a></li>
<li class="chapter" data-level="8.3.3" data-path="model-comparison.html"><a href="model-comparison.html#cross-validation"><i class="fa fa-check"></i><b>8.3.3</b> Cross-validation</a></li>
<li class="chapter" data-level="8.3.4" data-path="model-comparison.html"><a href="model-comparison.html#bootstrap"><i class="fa fa-check"></i><b>8.3.4</b> Bootstrap</a></li>
<li class="chapter" data-level="8.3.5" data-path="model-comparison.html"><a href="model-comparison.html#aic-and-bic"><i class="fa fa-check"></i><b>8.3.5</b> AIC and BIC</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="model-comparison.html"><a href="model-comparison.html#additional-resources-6"><i class="fa fa-check"></i><b>8.4</b> Additional resources</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="model-comparison.html"><a href="model-comparison.html#datacamp-course"><i class="fa fa-check"></i><b>8.4.1</b> Datacamp course</a></li>
<li class="chapter" data-level="8.4.2" data-path="model-comparison.html"><a href="model-comparison.html#reading-1"><i class="fa fa-check"></i><b>8.4.2</b> Reading</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="model-comparison.html"><a href="model-comparison.html#session-info-6"><i class="fa fa-check"></i><b>8.5</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="linear-mixed-effects-models-1.html"><a href="linear-mixed-effects-models-1.html"><i class="fa fa-check"></i><b>9</b> Linear mixed effects models 1</a>
<ul>
<li class="chapter" data-level="9.1" data-path="linear-mixed-effects-models-1.html"><a href="linear-mixed-effects-models-1.html#learning-goals-5"><i class="fa fa-check"></i><b>9.1</b> Learning goals</a></li>
<li class="chapter" data-level="9.2" data-path="linear-mixed-effects-models-1.html"><a href="linear-mixed-effects-models-1.html#load-packages-and-set-plotting-theme-7"><i class="fa fa-check"></i><b>9.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="9.3" data-path="linear-mixed-effects-models-1.html"><a href="linear-mixed-effects-models-1.html#dependence"><i class="fa fa-check"></i><b>9.3</b> Dependence</a></li>
<li class="chapter" data-level="9.4" data-path="linear-mixed-effects-models-1.html"><a href="linear-mixed-effects-models-1.html#additional-resources-7"><i class="fa fa-check"></i><b>9.4</b> Additional resources</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="linear-mixed-effects-models-1.html"><a href="linear-mixed-effects-models-1.html#readings"><i class="fa fa-check"></i><b>9.4.1</b> Readings</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="linear-mixed-effects-models-1.html"><a href="linear-mixed-effects-models-1.html#session-info-7"><i class="fa fa-check"></i><b>9.5</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html"><i class="fa fa-check"></i><b>10</b> Linear mixed effects models 2</a>
<ul>
<li class="chapter" data-level="10.1" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#learning-goals-6"><i class="fa fa-check"></i><b>10.1</b> Learning goals</a></li>
<li class="chapter" data-level="10.2" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#load-packages-and-set-plotting-theme-8"><i class="fa fa-check"></i><b>10.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="10.3" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#a-worked-example"><i class="fa fa-check"></i><b>10.3</b> A worked example</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#complete-pooling"><i class="fa fa-check"></i><b>10.3.1</b> Complete pooling</a></li>
<li class="chapter" data-level="10.3.2" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#no-pooling"><i class="fa fa-check"></i><b>10.3.2</b> No pooling</a></li>
<li class="chapter" data-level="10.3.3" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#partial-pooling"><i class="fa fa-check"></i><b>10.3.3</b> Partial pooling</a></li>
<li class="chapter" data-level="10.3.4" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#compare-results"><i class="fa fa-check"></i><b>10.3.4</b> Compare results</a></li>
<li class="chapter" data-level="10.3.5" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#getting-p-values"><i class="fa fa-check"></i><b>10.3.5</b> Getting p-values</a></li>
<li class="chapter" data-level="10.3.6" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#reporting-results"><i class="fa fa-check"></i><b>10.3.6</b> Reporting results</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#simulating-a-linear-mixed-effects-model"><i class="fa fa-check"></i><b>10.4</b> Simulating a linear mixed effects model</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#the-effect-of-outliers"><i class="fa fa-check"></i><b>10.4.1</b> The effect of outliers</a></li>
<li class="chapter" data-level="10.4.2" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#different-slopes"><i class="fa fa-check"></i><b>10.4.2</b> Different slopes</a></li>
<li class="chapter" data-level="10.4.3" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#simpsons-paradox"><i class="fa fa-check"></i><b>10.4.3</b> Simpson’s paradox</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#additional-resources-8"><i class="fa fa-check"></i><b>10.5</b> Additional resources</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#readings-1"><i class="fa fa-check"></i><b>10.5.1</b> Readings</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="linear-mixed-effects-models-2.html"><a href="linear-mixed-effects-models-2.html#session-info-8"><i class="fa fa-check"></i><b>10.6</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html"><i class="fa fa-check"></i><b>11</b> Linear mixed effects models 3</a>
<ul>
<li class="chapter" data-level="11.1" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#learning-goals-7"><i class="fa fa-check"></i><b>11.1</b> Learning goals</a></li>
<li class="chapter" data-level="11.2" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#load-packages-and-set-plotting-theme-9"><i class="fa fa-check"></i><b>11.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="11.3" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#load-data-sets-3"><i class="fa fa-check"></i><b>11.3</b> Load data sets</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#sleep-data"><i class="fa fa-check"></i><b>11.3.1</b> Sleep data</a></li>
<li class="chapter" data-level="11.3.2" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#reasoning-data"><i class="fa fa-check"></i><b>11.3.2</b> Reasoning data</a></li>
<li class="chapter" data-level="11.3.3" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#weight-loss-data"><i class="fa fa-check"></i><b>11.3.3</b> Weight loss data</a></li>
<li class="chapter" data-level="11.3.4" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#politness-data"><i class="fa fa-check"></i><b>11.3.4</b> Politness data</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#understanding-the-lmer-syntax"><i class="fa fa-check"></i><b>11.4</b> Understanding the lmer() syntax</a></li>
<li class="chapter" data-level="11.5" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#anova-vs.-lmer"><i class="fa fa-check"></i><b>11.5</b> ANOVA vs. Lmer</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#between-subjects-anova"><i class="fa fa-check"></i><b>11.5.1</b> Between subjects ANOVA</a></li>
<li class="chapter" data-level="11.5.2" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#repeated-measures-anova"><i class="fa fa-check"></i><b>11.5.2</b> Repeated-measures ANOVA</a></li>
<li class="chapter" data-level="11.5.3" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#mixed-anova"><i class="fa fa-check"></i><b>11.5.3</b> Mixed ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="linear-mixed-effects-models-3.html"><a href="linear-mixed-effects-models-3.html#session-info-9"><i class="fa fa-check"></i><b>11.6</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html"><i class="fa fa-check"></i><b>12</b> Linear mixed effects models 4</a>
<ul>
<li class="chapter" data-level="12.1" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#learning-goals-8"><i class="fa fa-check"></i><b>12.1</b> Learning goals</a></li>
<li class="chapter" data-level="12.2" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#load-packages-and-set-plotting-theme-10"><i class="fa fa-check"></i><b>12.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="12.3" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#load-data-sets-4"><i class="fa fa-check"></i><b>12.3</b> Load data sets</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#sleep-data-1"><i class="fa fa-check"></i><b>12.3.1</b> Sleep data</a></li>
<li class="chapter" data-level="12.3.2" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#reasoning-data-1"><i class="fa fa-check"></i><b>12.3.2</b> Reasoning data</a></li>
<li class="chapter" data-level="12.3.3" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#weight-loss-data-1"><i class="fa fa-check"></i><b>12.3.3</b> Weight loss data</a></li>
<li class="chapter" data-level="12.3.4" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#politness-data-1"><i class="fa fa-check"></i><b>12.3.4</b> Politness data</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#follow-up-tests-with-emmeans"><i class="fa fa-check"></i><b>12.4</b> Follow-up tests with emmeans</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#sleep-study"><i class="fa fa-check"></i><b>12.4.1</b> Sleep study</a></li>
<li class="chapter" data-level="12.4.2" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#weight-loss-study"><i class="fa fa-check"></i><b>12.4.2</b> Weight loss study</a></li>
<li class="chapter" data-level="12.4.3" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#politeness-study"><i class="fa fa-check"></i><b>12.4.3</b> Politeness study</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#mixtures-of-participants"><i class="fa fa-check"></i><b>12.5</b> Mixtures of participants</a></li>
<li class="chapter" data-level="12.6" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#bootstrapping"><i class="fa fa-check"></i><b>12.6</b> Bootstrapping</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#linear-model"><i class="fa fa-check"></i><b>12.6.1</b> Linear model</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="linear-mixed-effects-models-4.html"><a href="linear-mixed-effects-models-4.html#session-info-10"><i class="fa fa-check"></i><b>12.7</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html"><i class="fa fa-check"></i><b>13</b> Generalized linear model</a>
<ul>
<li class="chapter" data-level="13.1" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#learning-goals-9"><i class="fa fa-check"></i><b>13.1</b> Learning goals</a></li>
<li class="chapter" data-level="13.2" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#load-packages-and-set-plotting-theme-11"><i class="fa fa-check"></i><b>13.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="13.3" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#load-data-set"><i class="fa fa-check"></i><b>13.3</b> Load data set</a></li>
<li class="chapter" data-level="13.4" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#logistic-regression"><i class="fa fa-check"></i><b>13.4</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#interpreting-the-parameters"><i class="fa fa-check"></i><b>13.4.1</b> Interpreting the parameters</a></li>
<li class="chapter" data-level="13.4.2" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#binary-predictor"><i class="fa fa-check"></i><b>13.4.2</b> Binary predictor</a></li>
<li class="chapter" data-level="13.4.3" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#continuous-predictor"><i class="fa fa-check"></i><b>13.4.3</b> Continuous predictor</a></li>
<li class="chapter" data-level="13.4.4" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#several-predictors"><i class="fa fa-check"></i><b>13.4.4</b> Several predictors</a></li>
<li class="chapter" data-level="13.4.5" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#using-the-ggeffects-package"><i class="fa fa-check"></i><b>13.4.5</b> Using the “ggeffects” package</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#simulate-a-logistic-regression"><i class="fa fa-check"></i><b>13.5</b> Simulate a logistic regression</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#calculate-the-models-likelihood"><i class="fa fa-check"></i><b>13.5.1</b> Calculate the model’s likelihood</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#testing-hypotheses"><i class="fa fa-check"></i><b>13.6</b> Testing hypotheses</a></li>
<li class="chapter" data-level="13.7" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#logistic-mixed-effects-model"><i class="fa fa-check"></i><b>13.7</b> Logistic mixed effects model</a></li>
<li class="chapter" data-level="13.8" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#additional-information"><i class="fa fa-check"></i><b>13.8</b> Additional information</a>
<ul>
<li class="chapter" data-level="13.8.1" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#misc-5"><i class="fa fa-check"></i><b>13.8.1</b> Misc</a></li>
<li class="chapter" data-level="13.8.2" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#datacamp-5"><i class="fa fa-check"></i><b>13.8.2</b> Datacamp</a></li>
</ul></li>
<li class="chapter" data-level="13.9" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html#session-info-11"><i class="fa fa-check"></i><b>13.9</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html"><i class="fa fa-check"></i><b>14</b> Bayesian data analysis 1</a>
<ul>
<li class="chapter" data-level="14.1" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#learning-goals-10"><i class="fa fa-check"></i><b>14.1</b> Learning goals</a></li>
<li class="chapter" data-level="14.2" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#load-packages-and-set-plotting-theme-12"><i class="fa fa-check"></i><b>14.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="14.3" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#doing-bayesian-inference-by-hand"><i class="fa fa-check"></i><b>14.3</b> Doing Bayesian inference “by hand”</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#sequential-updating-based-on-the-beta-distribution"><i class="fa fa-check"></i><b>14.3.1</b> Sequential updating based on the Beta distribution</a></li>
<li class="chapter" data-level="14.3.2" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#coin-flip-example"><i class="fa fa-check"></i><b>14.3.2</b> Coin flip example</a></li>
<li class="chapter" data-level="14.3.3" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#bayesian-inference-by-discretization"><i class="fa fa-check"></i><b>14.3.3</b> Bayesian inference by discretization</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#doing-bayesian-inference-with-greta"><i class="fa fa-check"></i><b>14.4</b> Doing Bayesian inference with Greta</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#attitude-data-set"><i class="fa fa-check"></i><b>14.4.1</b> Attitude data set</a></li>
<li class="chapter" data-level="14.4.2" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#frequentist-analysis"><i class="fa fa-check"></i><b>14.4.2</b> Frequentist analysis</a></li>
<li class="chapter" data-level="14.4.3" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#bayesian-regression"><i class="fa fa-check"></i><b>14.4.3</b> Bayesian regression</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#additional-resources-9"><i class="fa fa-check"></i><b>14.5</b> Additional resources</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#books-and-chapters-1"><i class="fa fa-check"></i><b>14.5.1</b> Books and chapters</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="bayesian-data-analysis-1.html"><a href="bayesian-data-analysis-1.html#session-info-12"><i class="fa fa-check"></i><b>14.6</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html"><i class="fa fa-check"></i><b>15</b> Bayesian data analysis 2</a>
<ul>
<li class="chapter" data-level="15.1" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#learning-goals-11"><i class="fa fa-check"></i><b>15.1</b> Learning goals</a></li>
<li class="chapter" data-level="15.2" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#load-packages-and-set-plotting-theme-13"><i class="fa fa-check"></i><b>15.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="15.3" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#load-data-sets-5"><i class="fa fa-check"></i><b>15.3</b> Load data sets</a></li>
<li class="chapter" data-level="15.4" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#poker"><i class="fa fa-check"></i><b>15.4</b> Poker</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#visualize-the-data"><i class="fa fa-check"></i><b>15.4.1</b> 1. Visualize the data</a></li>
<li class="chapter" data-level="15.4.2" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#specify-and-fit-the-model"><i class="fa fa-check"></i><b>15.4.2</b> 2. Specify and fit the model</a></li>
<li class="chapter" data-level="15.4.3" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#model-evaluation"><i class="fa fa-check"></i><b>15.4.3</b> 3. Model evaluation</a></li>
<li class="chapter" data-level="15.4.4" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#interpret-the-model-parameters"><i class="fa fa-check"></i><b>15.4.4</b> 4. Interpret the model parameters</a></li>
<li class="chapter" data-level="15.4.5" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#test-specific-hypotheses"><i class="fa fa-check"></i><b>15.4.5</b> 5. Test specific hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#sleep-study-1"><i class="fa fa-check"></i><b>15.5</b> Sleep study</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#visualize-the-data-1"><i class="fa fa-check"></i><b>15.5.1</b> 1. Visualize the data</a></li>
<li class="chapter" data-level="15.5.2" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#specify-and-fit-the-model-1"><i class="fa fa-check"></i><b>15.5.2</b> 2. Specify and fit the model</a></li>
<li class="chapter" data-level="15.5.3" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#model-evaluation-1"><i class="fa fa-check"></i><b>15.5.3</b> 3. Model evaluation</a></li>
<li class="chapter" data-level="15.5.4" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#interpret-the-parameters"><i class="fa fa-check"></i><b>15.5.4</b> 4. Interpret the parameters</a></li>
<li class="chapter" data-level="15.5.5" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#test-specific-hypotheses-1"><i class="fa fa-check"></i><b>15.5.5</b> 5. Test specific hypotheses</a></li>
<li class="chapter" data-level="15.5.6" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#report-results"><i class="fa fa-check"></i><b>15.5.6</b> 6. Report results</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#titanic-study"><i class="fa fa-check"></i><b>15.6</b> Titanic study</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#visualize-the-data-2"><i class="fa fa-check"></i><b>15.6.1</b> 1. Visualize the data</a></li>
<li class="chapter" data-level="15.6.2" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#specify-and-fit-the-model-2"><i class="fa fa-check"></i><b>15.6.2</b> 2. Specify and fit the model</a></li>
<li class="chapter" data-level="15.6.3" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#model-evaluation-2"><i class="fa fa-check"></i><b>15.6.3</b> 3. Model evaluation</a></li>
<li class="chapter" data-level="15.6.4" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#interpret-the-parameters-1"><i class="fa fa-check"></i><b>15.6.4</b> 4. Interpret the parameters</a></li>
<li class="chapter" data-level="15.6.5" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#test-specific-hypotheses-2"><i class="fa fa-check"></i><b>15.6.5</b> 5. Test specific hypotheses</a></li>
<li class="chapter" data-level="15.6.6" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#report-results-1"><i class="fa fa-check"></i><b>15.6.6</b> 6. Report results</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#politeness-data"><i class="fa fa-check"></i><b>15.7</b> Politeness data</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#visualize-the-data-3"><i class="fa fa-check"></i><b>15.7.1</b> 1. Visualize the data</a></li>
<li class="chapter" data-level="15.7.2" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#specify-and-fit-the-model-3"><i class="fa fa-check"></i><b>15.7.2</b> 2. Specify and fit the model</a></li>
<li class="chapter" data-level="15.7.3" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#test-specific-hypotheses-3"><i class="fa fa-check"></i><b>15.7.3</b> 5. Test specific hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#additional-resources-10"><i class="fa fa-check"></i><b>15.8</b> Additional resources</a></li>
<li class="chapter" data-level="15.9" data-path="bayesian-data-analysis-2.html"><a href="bayesian-data-analysis-2.html#session-info-13"><i class="fa fa-check"></i><b>15.9</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html"><i class="fa fa-check"></i><b>16</b> Bayesian data analysis 3</a>
<ul>
<li class="chapter" data-level="16.1" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#learning-goals-12"><i class="fa fa-check"></i><b>16.1</b> Learning goals</a></li>
<li class="chapter" data-level="16.2" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#load-packages-and-set-plotting-theme-14"><i class="fa fa-check"></i><b>16.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="16.3" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#evidence-for-the-null-hypothesis"><i class="fa fa-check"></i><b>16.3</b> Evidence for the null hypothesis</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#bayes-factor-1"><i class="fa fa-check"></i><b>16.3.1</b> Bayes factor</a></li>
<li class="chapter" data-level="16.3.2" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#loo"><i class="fa fa-check"></i><b>16.3.2</b> LOO</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#dealing-with-heteroscedasticity"><i class="fa fa-check"></i><b>16.4</b> Dealing with heteroscedasticity</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#visualize-the-data-4"><i class="fa fa-check"></i><b>16.4.1</b> Visualize the data</a></li>
<li class="chapter" data-level="16.4.2" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#frequentist-analysis-4"><i class="fa fa-check"></i><b>16.4.2</b> Frequentist analysis</a></li>
<li class="chapter" data-level="16.4.3" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#bayesian-analysis-3"><i class="fa fa-check"></i><b>16.4.3</b> Bayesian analysis</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#zero-one-inflated-beta-binomial-model"><i class="fa fa-check"></i><b>16.5</b> Zero-one inflated beta binomial model</a></li>
<li class="chapter" data-level="16.6" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#ordinal-regression"><i class="fa fa-check"></i><b>16.6</b> Ordinal regression</a>
<ul>
<li class="chapter" data-level="16.6.1" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#ordinal-regression-assuming-equal-variance"><i class="fa fa-check"></i><b>16.6.1</b> Ordinal regression (assuming equal variance)</a></li>
<li class="chapter" data-level="16.6.2" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#gaussian-regression-assuming-equal-variance"><i class="fa fa-check"></i><b>16.6.2</b> Gaussian regression (assuming equal variance)</a></li>
<li class="chapter" data-level="16.6.3" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#oridnal-regression-unequal-variance"><i class="fa fa-check"></i><b>16.6.3</b> Oridnal regression (unequal variance)</a></li>
<li class="chapter" data-level="16.6.4" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#gaussian-regression-unequal-variance"><i class="fa fa-check"></i><b>16.6.4</b> Gaussian regression (unequal variance)</a></li>
<li class="chapter" data-level="16.6.5" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#model-comparison-2"><i class="fa fa-check"></i><b>16.6.5</b> Model comparison</a></li>
</ul></li>
<li class="chapter" data-level="16.7" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#additional-resources-11"><i class="fa fa-check"></i><b>16.7</b> Additional resources</a></li>
<li class="chapter" data-level="16.8" data-path="bayesian-data-analysis-3.html"><a href="bayesian-data-analysis-3.html#session-info-14"><i class="fa fa-check"></i><b>16.8</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html"><i class="fa fa-check"></i><b>17</b> Appendix A: Visualization</a>
<ul>
<li class="chapter" data-level="17.1" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#learning-goals-13"><i class="fa fa-check"></i><b>17.1</b> Learning goals</a></li>
<li class="chapter" data-level="17.2" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#load-packages"><i class="fa fa-check"></i><b>17.2</b> Load packages</a></li>
<li class="chapter" data-level="17.3" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#why-visualize-data"><i class="fa fa-check"></i><b>17.3</b> Why visualize data?</a></li>
<li class="chapter" data-level="17.4" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#some-basics"><i class="fa fa-check"></i><b>17.4</b> Some basics</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#setting-up-rstudio"><i class="fa fa-check"></i><b>17.4.1</b> Setting up RStudio</a></li>
<li class="chapter" data-level="17.4.2" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#getting-help"><i class="fa fa-check"></i><b>17.4.2</b> Getting help</a></li>
<li class="chapter" data-level="17.4.3" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#r-markdown-infos"><i class="fa fa-check"></i><b>17.4.3</b> R Markdown infos</a></li>
<li class="chapter" data-level="17.4.4" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#helpful-keyboard-shortcuts"><i class="fa fa-check"></i><b>17.4.4</b> Helpful keyboard shortcuts</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#data-visualization"><i class="fa fa-check"></i><b>17.5</b> Data visualization</a>
<ul>
<li class="chapter" data-level="17.5.1" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#setting-up-a-plot"><i class="fa fa-check"></i><b>17.5.1</b> Setting up a plot</a></li>
<li class="chapter" data-level="17.5.2" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#bar-plot"><i class="fa fa-check"></i><b>17.5.2</b> Bar plot</a></li>
<li class="chapter" data-level="17.5.3" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#setting-the-default-plot-theme"><i class="fa fa-check"></i><b>17.5.3</b> Setting the default plot theme</a></li>
<li class="chapter" data-level="17.5.4" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#scatter-plot"><i class="fa fa-check"></i><b>17.5.4</b> Scatter plot</a></li>
<li class="chapter" data-level="17.5.5" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#line-plot"><i class="fa fa-check"></i><b>17.5.5</b> Line plot</a></li>
<li class="chapter" data-level="17.5.6" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#adding-error-bars"><i class="fa fa-check"></i><b>17.5.6</b> Adding error bars</a></li>
<li class="chapter" data-level="17.5.7" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#order-matters"><i class="fa fa-check"></i><b>17.5.7</b> Order matters</a></li>
<li class="chapter" data-level="17.5.8" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#grouping-data"><i class="fa fa-check"></i><b>17.5.8</b> Grouping data</a></li>
<li class="chapter" data-level="17.5.9" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#making-facets"><i class="fa fa-check"></i><b>17.5.9</b> Making facets</a></li>
<li class="chapter" data-level="17.5.10" data-path="appendix-a-visualization.html"><a href="appendix-a-visualization.html#global-local-and-setting-aes"><i class="fa fa-check"></i><b>17.5.10</b> Global, local, and setting <code>aes()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="visualization-2-1.html"><a href="visualization-2-1.html"><i class="fa fa-check"></i><b>18</b> Visualization 2</a>
<ul>
<li class="chapter" data-level="18.1" data-path="visualization-2-1.html"><a href="visualization-2-1.html#learning-objectives"><i class="fa fa-check"></i><b>18.1</b> Learning objectives</a></li>
<li class="chapter" data-level="18.2" data-path="visualization-2-1.html"><a href="visualization-2-1.html#install-and-load-packages-load-data-set-theme"><i class="fa fa-check"></i><b>18.2</b> Install and load packages, load data, set theme</a></li>
<li class="chapter" data-level="18.3" data-path="visualization-2-1.html"><a href="visualization-2-1.html#overview-of-different-plot-types-for-different-things"><i class="fa fa-check"></i><b>18.3</b> Overview of different plot types for different things</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="visualization-2-1.html"><a href="visualization-2-1.html#proportions"><i class="fa fa-check"></i><b>18.3.1</b> Proportions</a></li>
<li class="chapter" data-level="18.3.2" data-path="visualization-2-1.html"><a href="visualization-2-1.html#comparisons"><i class="fa fa-check"></i><b>18.3.2</b> Comparisons</a></li>
<li class="chapter" data-level="18.3.3" data-path="visualization-2-1.html"><a href="visualization-2-1.html#relationships"><i class="fa fa-check"></i><b>18.3.3</b> Relationships</a></li>
<li class="chapter" data-level="18.3.4" data-path="visualization-2-1.html"><a href="visualization-2-1.html#temporal-data"><i class="fa fa-check"></i><b>18.3.4</b> Temporal data</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="visualization-2-1.html"><a href="visualization-2-1.html#customizing-plots"><i class="fa fa-check"></i><b>18.4</b> Customizing plots</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="visualization-2-1.html"><a href="visualization-2-1.html#anatomy-of-a-ggplot"><i class="fa fa-check"></i><b>18.4.1</b> Anatomy of a <code>ggplot</code></a></li>
<li class="chapter" data-level="18.4.2" data-path="visualization-2-1.html"><a href="visualization-2-1.html#changing-the-order-of-things"><i class="fa fa-check"></i><b>18.4.2</b> Changing the order of things</a></li>
<li class="chapter" data-level="18.4.3" data-path="visualization-2-1.html"><a href="visualization-2-1.html#dealing-with-legends"><i class="fa fa-check"></i><b>18.4.3</b> Dealing with legends</a></li>
<li class="chapter" data-level="18.4.4" data-path="visualization-2-1.html"><a href="visualization-2-1.html#choosing-good-colors"><i class="fa fa-check"></i><b>18.4.4</b> Choosing good colors</a></li>
<li class="chapter" data-level="18.4.5" data-path="visualization-2-1.html"><a href="visualization-2-1.html#customizing-themes"><i class="fa fa-check"></i><b>18.4.5</b> Customizing themes</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="visualization-2-1.html"><a href="visualization-2-1.html#saving-plots"><i class="fa fa-check"></i><b>18.5</b> Saving plots</a></li>
<li class="chapter" data-level="18.6" data-path="visualization-2-1.html"><a href="visualization-2-1.html#creating-figure-panels"><i class="fa fa-check"></i><b>18.6</b> Creating figure panels</a></li>
<li class="chapter" data-level="18.7" data-path="visualization-2-1.html"><a href="visualization-2-1.html#peeking-behind-the-scenes"><i class="fa fa-check"></i><b>18.7</b> Peeking behind the scenes</a></li>
<li class="chapter" data-level="18.8" data-path="visualization-2-1.html"><a href="visualization-2-1.html#making-animations"><i class="fa fa-check"></i><b>18.8</b> Making animations</a></li>
<li class="chapter" data-level="18.9" data-path="visualization-2-1.html"><a href="visualization-2-1.html#shiny-apps"><i class="fa fa-check"></i><b>18.9</b> Shiny apps</a></li>
<li class="chapter" data-level="18.10" data-path="visualization-2-1.html"><a href="visualization-2-1.html#defining-snippets"><i class="fa fa-check"></i><b>18.10</b> Defining snippets</a></li>
<li class="chapter" data-level="18.11" data-path="visualization-2-1.html"><a href="visualization-2-1.html#additional-resources-12"><i class="fa fa-check"></i><b>18.11</b> Additional resources</a>
<ul>
<li class="chapter" data-level="18.11.1" data-path="visualization-2-1.html"><a href="visualization-2-1.html#cheatsheets-2"><i class="fa fa-check"></i><b>18.11.1</b> Cheatsheets</a></li>
<li class="chapter" data-level="18.11.2" data-path="visualization-2-1.html"><a href="visualization-2-1.html#datacamp-courses"><i class="fa fa-check"></i><b>18.11.2</b> Datacamp courses</a></li>
<li class="chapter" data-level="18.11.3" data-path="visualization-2-1.html"><a href="visualization-2-1.html#books-and-chapters-2"><i class="fa fa-check"></i><b>18.11.3</b> Books and chapters</a></li>
<li class="chapter" data-level="18.11.4" data-path="visualization-2-1.html"><a href="visualization-2-1.html#misc-6"><i class="fa fa-check"></i><b>18.11.4</b> Misc</a></li>
</ul></li>
<li class="chapter" data-level="18.12" data-path="visualization-2-1.html"><a href="visualization-2-1.html#session-info-15"><i class="fa fa-check"></i><b>18.12</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html"><i class="fa fa-check"></i><b>19</b> Appendix B: Data wrangling</a>
<ul>
<li class="chapter" data-level="19.1" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#learning-goals-14"><i class="fa fa-check"></i><b>19.1</b> Learning goals</a></li>
<li class="chapter" data-level="19.2" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#load-packages-1"><i class="fa fa-check"></i><b>19.2</b> Load packages</a></li>
<li class="chapter" data-level="19.3" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#some-r-basics"><i class="fa fa-check"></i><b>19.3</b> Some R basics</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#modes"><i class="fa fa-check"></i><b>19.3.1</b> Modes</a></li>
<li class="chapter" data-level="19.3.2" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#data-types"><i class="fa fa-check"></i><b>19.3.2</b> Data types</a></li>
<li class="chapter" data-level="19.3.3" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#operators"><i class="fa fa-check"></i><b>19.3.3</b> Operators</a></li>
<li class="chapter" data-level="19.3.4" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#control-flow"><i class="fa fa-check"></i><b>19.3.4</b> Control flow</a></li>
<li class="chapter" data-level="19.3.5" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#functions"><i class="fa fa-check"></i><b>19.3.5</b> Functions</a></li>
<li class="chapter" data-level="19.3.6" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#the-pipe-operator"><i class="fa fa-check"></i><b>19.3.6</b> The pipe operator <code>%&gt;%</code></a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#a-quick-note-on-naming-things"><i class="fa fa-check"></i><b>19.4</b> A quick note on naming things</a></li>
<li class="chapter" data-level="19.5" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#looking-at-data"><i class="fa fa-check"></i><b>19.5</b> Looking at data</a>
<ul>
<li class="chapter" data-level="19.5.1" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#head"><i class="fa fa-check"></i><b>19.5.1</b> <code>head()</code></a></li>
<li class="chapter" data-level="19.5.2" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#glimpse"><i class="fa fa-check"></i><b>19.5.2</b> <code>glimpse()</code></a></li>
<li class="chapter" data-level="19.5.3" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#distinct"><i class="fa fa-check"></i><b>19.5.3</b> <code>distinct()</code></a></li>
<li class="chapter" data-level="19.5.4" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#count"><i class="fa fa-check"></i><b>19.5.4</b> <code>count()</code></a></li>
<li class="chapter" data-level="19.5.5" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#datatable"><i class="fa fa-check"></i><b>19.5.5</b> <code>datatable()</code></a></li>
<li class="chapter" data-level="19.5.6" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#other-tools-for-taking-a-quick-look-at-data"><i class="fa fa-check"></i><b>19.5.6</b> Other tools for taking a quick look at data</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#wrangling-data"><i class="fa fa-check"></i><b>19.6</b> Wrangling data</a>
<ul>
<li class="chapter" data-level="19.6.1" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#filter"><i class="fa fa-check"></i><b>19.6.1</b> <code>filter()</code></a></li>
<li class="chapter" data-level="19.6.2" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#arrange"><i class="fa fa-check"></i><b>19.6.2</b> <code>arrange()</code></a></li>
<li class="chapter" data-level="19.6.3" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#rename"><i class="fa fa-check"></i><b>19.6.3</b> <code>rename()</code></a></li>
<li class="chapter" data-level="19.6.4" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#relocate"><i class="fa fa-check"></i><b>19.6.4</b> <code>relocate()</code></a></li>
<li class="chapter" data-level="19.6.5" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#select"><i class="fa fa-check"></i><b>19.6.5</b> <code>select()</code></a></li>
<li class="chapter" data-level="19.6.6" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#practice-2"><i class="fa fa-check"></i><b>19.6.6</b> Practice 2</a></li>
<li class="chapter" data-level="19.6.7" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#mutate"><i class="fa fa-check"></i><b>19.6.7</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="19.6.8" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#practice-3"><i class="fa fa-check"></i><b>19.6.8</b> Practice 3</a></li>
<li class="chapter" data-level="19.6.9" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#summarizing-data"><i class="fa fa-check"></i><b>19.6.9</b> Summarizing data</a></li>
<li class="chapter" data-level="19.6.10" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#reshaping-data"><i class="fa fa-check"></i><b>19.6.10</b> Reshaping data</a></li>
<li class="chapter" data-level="19.6.11" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#joining-multiple-data-frames"><i class="fa fa-check"></i><b>19.6.11</b> Joining multiple data frames</a></li>
<li class="chapter" data-level="19.6.12" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#dealing-with-missing-data"><i class="fa fa-check"></i><b>19.6.12</b> Dealing with missing data</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#reading-in-data"><i class="fa fa-check"></i><b>19.7</b> Reading in data</a>
<ul>
<li class="chapter" data-level="19.7.1" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#csv"><i class="fa fa-check"></i><b>19.7.1</b> csv</a></li>
<li class="chapter" data-level="19.7.2" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#rdata"><i class="fa fa-check"></i><b>19.7.2</b> RData</a></li>
</ul></li>
<li class="chapter" data-level="19.8" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#saving-data"><i class="fa fa-check"></i><b>19.8</b> Saving data</a>
<ul>
<li class="chapter" data-level="19.8.1" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#csv-1"><i class="fa fa-check"></i><b>19.8.1</b> csv</a></li>
<li class="chapter" data-level="19.8.2" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#rdata-1"><i class="fa fa-check"></i><b>19.8.2</b> RData</a></li>
</ul></li>
<li class="chapter" data-level="19.9" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#additional-resources-13"><i class="fa fa-check"></i><b>19.9</b> Additional resources</a>
<ul>
<li class="chapter" data-level="19.9.1" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#cheatsheets-3"><i class="fa fa-check"></i><b>19.9.1</b> Cheatsheets</a></li>
<li class="chapter" data-level="19.9.2" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#data-camp-courses"><i class="fa fa-check"></i><b>19.9.2</b> Data camp courses</a></li>
<li class="chapter" data-level="19.9.3" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#books-and-chapters-3"><i class="fa fa-check"></i><b>19.9.3</b> Books and chapters</a></li>
</ul></li>
<li class="chapter" data-level="19.10" data-path="appendix-b-data-wrangling.html"><a href="appendix-b-data-wrangling.html#session-info-16"><i class="fa fa-check"></i><b>19.10</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="model-assumptions.html"><a href="model-assumptions.html"><i class="fa fa-check"></i><b>20</b> Model assumptions</a>
<ul>
<li class="chapter" data-level="20.1" data-path="model-assumptions.html"><a href="model-assumptions.html#learning-goals-15"><i class="fa fa-check"></i><b>20.1</b> Learning goals</a></li>
<li class="chapter" data-level="20.2" data-path="model-assumptions.html"><a href="model-assumptions.html#load-packages-and-set-plotting-theme-15"><i class="fa fa-check"></i><b>20.2</b> Load packages and set plotting theme</a></li>
<li class="chapter" data-level="20.3" data-path="model-assumptions.html"><a href="model-assumptions.html#model-assumptions-and-what-to-do-if-they-are-violated"><i class="fa fa-check"></i><b>20.3</b> Model assumptions and what to do if they are violated</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="model-assumptions.html"><a href="model-assumptions.html#influential-data-points"><i class="fa fa-check"></i><b>20.3.1</b> Influential data points</a></li>
<li class="chapter" data-level="20.3.2" data-path="model-assumptions.html"><a href="model-assumptions.html#linear-and-additive"><i class="fa fa-check"></i><b>20.3.2</b> Linear and additive</a></li>
<li class="chapter" data-level="20.3.3" data-path="model-assumptions.html"><a href="model-assumptions.html#normally-distributed-residuals"><i class="fa fa-check"></i><b>20.3.3</b> Normally distributed residuals</a></li>
<li class="chapter" data-level="20.3.4" data-path="model-assumptions.html"><a href="model-assumptions.html#non-parametric-tests"><i class="fa fa-check"></i><b>20.3.4</b> Non-parametric tests</a></li>
<li class="chapter" data-level="20.3.5" data-path="model-assumptions.html"><a href="model-assumptions.html#bootstrapping-regressions"><i class="fa fa-check"></i><b>20.3.5</b> Bootstrapping regressions</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="model-assumptions.html"><a href="model-assumptions.html#additional-resources-14"><i class="fa fa-check"></i><b>20.4</b> Additional resources</a></li>
<li class="chapter" data-level="20.5" data-path="model-assumptions.html"><a href="model-assumptions.html#session-info-17"><i class="fa fa-check"></i><b>20.5</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="reporting-statistics.html"><a href="reporting-statistics.html"><i class="fa fa-check"></i><b>21</b> Reporting statistics</a>
<ul>
<li class="chapter" data-level="21.1" data-path="reporting-statistics.html"><a href="reporting-statistics.html#general-advice"><i class="fa fa-check"></i><b>21.1</b> General advice</a>
<ul>
<li class="chapter" data-level="21.1.1" data-path="reporting-statistics.html"><a href="reporting-statistics.html#make-good-figures"><i class="fa fa-check"></i><b>21.1.1</b> Make good figures!</a></li>
<li class="chapter" data-level="21.1.2" data-path="reporting-statistics.html"><a href="reporting-statistics.html#use-statistical-models-to-answer-concrete-research-questions."><i class="fa fa-check"></i><b>21.1.2</b> Use statistical models to answer concrete research questions.</a></li>
<li class="chapter" data-level="21.1.3" data-path="reporting-statistics.html"><a href="reporting-statistics.html#illustrate-the-uncertainty-in-your-statistical-inferences."><i class="fa fa-check"></i><b>21.1.3</b> Illustrate the uncertainty in your statistical inferences.</a></li>
<li class="chapter" data-level="21.1.4" data-path="reporting-statistics.html"><a href="reporting-statistics.html#report-effect-sizes."><i class="fa fa-check"></i><b>21.1.4</b> Report effect sizes.</a></li>
<li class="chapter" data-level="21.1.5" data-path="reporting-statistics.html"><a href="reporting-statistics.html#reporting-statistical-results-using-rmarkdown"><i class="fa fa-check"></i><b>21.1.5</b> Reporting statistical results using RMarkdown</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="reporting-statistics.html"><a href="reporting-statistics.html#some-concrete-example"><i class="fa fa-check"></i><b>21.2</b> Some concrete example</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="reporting-statistics.html"><a href="reporting-statistics.html#frequentist-statistics"><i class="fa fa-check"></i><b>21.2.1</b> Frequentist statistics</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="reporting-statistics.html"><a href="reporting-statistics.html#additional-resources-15"><i class="fa fa-check"></i><b>21.3</b> Additional resources</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="reporting-statistics.html"><a href="reporting-statistics.html#misc-7"><i class="fa fa-check"></i><b>21.3.1</b> Misc</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="reporting-statistics.html"><a href="reporting-statistics.html#session-info-18"><i class="fa fa-check"></i><b>21.4</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="cheatsheets-4.html"><a href="cheatsheets-4.html"><i class="fa fa-check"></i><b>22</b> Cheatsheets</a>
<ul>
<li class="chapter" data-level="22.1" data-path="cheatsheets-4.html"><a href="cheatsheets-4.html#statistics"><i class="fa fa-check"></i><b>22.1</b> Statistics</a></li>
<li class="chapter" data-level="22.2" data-path="cheatsheets-4.html"><a href="cheatsheets-4.html#r"><i class="fa fa-check"></i><b>22.2</b> R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Psych 710: Statistical Methods II</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="appendix-b-data-wrangling" class="section level1 hasAnchor" number="19">
<h1><span class="header-section-number">Chapter 19</span> Appendix B: Data wrangling<a href="appendix-b-data-wrangling.html#appendix-b-data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this lecture, we will take a look at how to wrangle data using the <a href="https://dplyr.tidyverse.org/">dplyr</a> package. Again, getting our data into shape is something we’ll need to do throughout the course, so it’s worth spending some time getting a good sense for how this works. The nice thing about R is that (thanks to the <code>tidyverse</code>), both visualization and data wrangling are particularly powerful.</p>
<div id="learning-goals-14" class="section level2 hasAnchor" number="19.1">
<h2><span class="header-section-number">19.1</span> Learning goals<a href="appendix-b-data-wrangling.html#learning-goals-14" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Review R basics (incl. variable modes, data types, operators, control flow, and functions).</li>
<li>Learn how the pipe operator <code>%&gt;%</code> works.</li>
<li>See different ways for getting a sense of one’s data.</li>
<li>Master key data manipulation verbs from the <code>dplyr</code> package (incl. <code>filter()</code>, <code>arrange()</code>, <code>rename()</code>, <code>relocate()</code>, <code>select()</code>, <code>mutate()</code>) as well as the helper functions <code>across()</code> and <code>where()</code>.</li>
</ul>
</div>
<div id="load-packages-1" class="section level2 hasAnchor" number="19.2">
<h2><span class="header-section-number">19.2</span> Load packages<a href="appendix-b-data-wrangling.html#load-packages-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s first load the packages that we need for this chapter.</p>
<div class="sourceCode" id="cb1127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1127-1"><a href="appendix-b-data-wrangling.html#cb1127-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;knitr&quot;</span>)        <span class="co"># for rendering the RMarkdown file</span></span>
<span id="cb1127-2"><a href="appendix-b-data-wrangling.html#cb1127-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;skimr&quot;</span>)        <span class="co"># for visualizing data </span></span>
<span id="cb1127-3"><a href="appendix-b-data-wrangling.html#cb1127-3" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;visdat&quot;</span>)       <span class="co"># for visualizing data </span></span>
<span id="cb1127-4"><a href="appendix-b-data-wrangling.html#cb1127-4" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;DT&quot;</span>)           <span class="co"># for visualizing data </span></span></code></pre></div>
<pre><code>## Warning: package &#39;DT&#39; was built under R version 4.3.1</code></pre>
<div class="sourceCode" id="cb1129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1129-1"><a href="appendix-b-data-wrangling.html#cb1129-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyverse&quot;</span>)    <span class="co"># for data wrangling</span></span></code></pre></div>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 4.3.1</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 4.3.1</code></pre>
<div class="sourceCode" id="cb1132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1132-1"><a href="appendix-b-data-wrangling.html#cb1132-1" tabindex="-1"></a>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">comment =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb1132-2"><a href="appendix-b-data-wrangling.html#cb1132-2" tabindex="-1"></a>               <span class="at">fig.show =</span> <span class="st">&quot;hold&quot;</span>)</span></code></pre></div>
</div>
<div id="some-r-basics" class="section level2 hasAnchor" number="19.3">
<h2><span class="header-section-number">19.3</span> Some R basics<a href="appendix-b-data-wrangling.html#some-r-basics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To test your knowledge of the R basics, I recommend taking the free interactive tutorial on datacamp: <a href="https://www.datacamp.com/courses/free-introduction-to-r">Introduction to R</a>. Here, I will just give a very quick overview of some of the basics.</p>
<div id="modes" class="section level3 hasAnchor" number="19.3.1">
<h3><span class="header-section-number">19.3.1</span> Modes<a href="appendix-b-data-wrangling.html#modes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Variables in R can have different modes. Table <a href="appendix-b-data-wrangling.html#tab:variable-modes">19.1</a> shows the most common ones.</p>
<table>
<caption><span id="tab:variable-modes">Table 19.1: </span>Most commonly used variable modes in R.</caption>
<thead>
<tr class="header">
<th align="right">name</th>
<th align="left">example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">numeric</td>
<td align="left"><code>1</code>, <code>3</code>, <code>48</code></td>
</tr>
<tr class="even">
<td align="right">character</td>
<td align="left"><code>'Steve'</code>, <code>'a'</code>, <code>'78'</code></td>
</tr>
<tr class="odd">
<td align="right">logical</td>
<td align="left"><code>TRUE</code>, <code>FALSE</code></td>
</tr>
<tr class="even">
<td align="right">not available</td>
<td align="left"><code>NA</code></td>
</tr>
</tbody>
</table>
<p>For characters you can either use <code>"</code> or <code>'</code>. R has a number of functions to convert a variable from one mode to another. <code>NA</code> is used for missing values.</p>
<div class="sourceCode" id="cb1133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1133-1"><a href="appendix-b-data-wrangling.html#cb1133-1" tabindex="-1"></a>tmp1 <span class="ot">=</span> <span class="st">&quot;1&quot;</span> <span class="co"># we start with a character</span></span>
<span id="cb1133-2"><a href="appendix-b-data-wrangling.html#cb1133-2" tabindex="-1"></a><span class="fu">str</span>(tmp1) </span></code></pre></div>
<pre><code> chr &quot;1&quot;</code></pre>
<div class="sourceCode" id="cb1135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1135-1"><a href="appendix-b-data-wrangling.html#cb1135-1" tabindex="-1"></a>tmp2 <span class="ot">=</span> <span class="fu">as.numeric</span>(tmp1) <span class="co"># turn it into a numeric</span></span>
<span id="cb1135-2"><a href="appendix-b-data-wrangling.html#cb1135-2" tabindex="-1"></a><span class="fu">str</span>(tmp2) </span></code></pre></div>
<pre><code> num 1</code></pre>
<div class="sourceCode" id="cb1137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1137-1"><a href="appendix-b-data-wrangling.html#cb1137-1" tabindex="-1"></a>tmp3 <span class="ot">=</span> <span class="fu">as.factor</span>(tmp2) <span class="co"># turn that into a factor</span></span>
<span id="cb1137-2"><a href="appendix-b-data-wrangling.html#cb1137-2" tabindex="-1"></a><span class="fu">str</span>(tmp3)</span></code></pre></div>
<pre><code> Factor w/ 1 level &quot;1&quot;: 1</code></pre>
<div class="sourceCode" id="cb1139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1139-1"><a href="appendix-b-data-wrangling.html#cb1139-1" tabindex="-1"></a>tmp4 <span class="ot">=</span> <span class="fu">as.character</span>(tmp3) <span class="co"># and go full cycle by turning it back into a character</span></span>
<span id="cb1139-2"><a href="appendix-b-data-wrangling.html#cb1139-2" tabindex="-1"></a><span class="fu">str</span>(tmp4)</span></code></pre></div>
<pre><code> chr &quot;1&quot;</code></pre>
<div class="sourceCode" id="cb1141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1141-1"><a href="appendix-b-data-wrangling.html#cb1141-1" tabindex="-1"></a><span class="fu">identical</span>(tmp1, tmp4) <span class="co"># checks whether tmp1 and tmp4 are the same</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>The <code>str()</code> function displays the structure of an R object. Here, it shows us what mode the variable is.</p>
</div>
<div id="data-types" class="section level3 hasAnchor" number="19.3.2">
<h3><span class="header-section-number">19.3.2</span> Data types<a href="appendix-b-data-wrangling.html#data-types" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R has a number of different data types. Table <a href="appendix-b-data-wrangling.html#tab:data-types">19.2</a> shows the ones you’re most likely to come across (taken from <a href="https://www.statmethods.net/input/datatypes.html">this source</a>):</p>
<table>
<caption><span id="tab:data-types">Table 19.2: </span>Most commonly used data types in R.</caption>
<colgroup>
<col width="15%" />
<col width="84%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">name</th>
<th align="left">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">vector</td>
<td align="left">list of values with of the same variable mode</td>
</tr>
<tr class="even">
<td align="right">factor</td>
<td align="left">for ordinal variables</td>
</tr>
<tr class="odd">
<td align="right">matrix</td>
<td align="left">2D data structure</td>
</tr>
<tr class="even">
<td align="right">array</td>
<td align="left">same as matrix for higher dimensional data</td>
</tr>
<tr class="odd">
<td align="right">data frame</td>
<td align="left">similar to matrix but with column names</td>
</tr>
<tr class="even">
<td align="right">list</td>
<td align="left">flexible type that can contain different other variable types</td>
</tr>
</tbody>
</table>
<div id="vectors" class="section level4 hasAnchor" number="19.3.2.1">
<h4><span class="header-section-number">19.3.2.1</span> Vectors<a href="appendix-b-data-wrangling.html#vectors" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We build vectors using the concatenate function <code>c()</code>, and we use <code>[]</code> to access one or more elements of a vector.</p>
<div class="sourceCode" id="cb1143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1143-1"><a href="appendix-b-data-wrangling.html#cb1143-1" tabindex="-1"></a>numbers <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>) <span class="co"># make a vector</span></span>
<span id="cb1143-2"><a href="appendix-b-data-wrangling.html#cb1143-2" tabindex="-1"></a>numbers[<span class="dv">2</span>] <span class="co"># access the second element </span></span></code></pre></div>
<pre><code>[1] 4</code></pre>
<div class="sourceCode" id="cb1145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1145-1"><a href="appendix-b-data-wrangling.html#cb1145-1" tabindex="-1"></a>numbers[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># access the first two elements</span></span></code></pre></div>
<pre><code>[1] 1 4</code></pre>
<div class="sourceCode" id="cb1147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1147-1"><a href="appendix-b-data-wrangling.html#cb1147-1" tabindex="-1"></a>numbers[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)] <span class="co"># access the first and last element</span></span></code></pre></div>
<pre><code>[1] 1 5</code></pre>
<p>In R (unlike in Python for example), 1 refers to the first element of a vector (or list).</p>
</div>
<div id="matrix" class="section level4 hasAnchor" number="19.3.2.2">
<h4><span class="header-section-number">19.3.2.2</span> Matrix<a href="appendix-b-data-wrangling.html#matrix" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We build a matrix using the <code>matrix()</code> function, and we use <code>[]</code> to access its elements.</p>
<div class="sourceCode" id="cb1149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1149-1"><a href="appendix-b-data-wrangling.html#cb1149-1" tabindex="-1"></a>matrix <span class="ot">=</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),</span>
<span id="cb1149-2"><a href="appendix-b-data-wrangling.html#cb1149-2" tabindex="-1"></a>                <span class="at">nrow =</span> <span class="dv">3</span>,</span>
<span id="cb1149-3"><a href="appendix-b-data-wrangling.html#cb1149-3" tabindex="-1"></a>                <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb1149-4"><a href="appendix-b-data-wrangling.html#cb1149-4" tabindex="-1"></a>matrix <span class="co"># the full matrix</span></span></code></pre></div>
<pre><code>     [,1] [,2]
[1,]    1    4
[2,]    2    5
[3,]    3    6</code></pre>
<div class="sourceCode" id="cb1151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1151-1"><a href="appendix-b-data-wrangling.html#cb1151-1" tabindex="-1"></a>matrix[<span class="dv">1</span>, <span class="dv">2</span>] <span class="co"># element in row 1, column 2</span></span></code></pre></div>
<pre><code>[1] 4</code></pre>
<div class="sourceCode" id="cb1153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1153-1"><a href="appendix-b-data-wrangling.html#cb1153-1" tabindex="-1"></a>matrix[<span class="dv">1</span>, ] <span class="co"># all elements in the first row </span></span></code></pre></div>
<pre><code>[1] 1 4</code></pre>
<div class="sourceCode" id="cb1155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1155-1"><a href="appendix-b-data-wrangling.html#cb1155-1" tabindex="-1"></a>matrix[ , <span class="dv">1</span>] <span class="co"># all elements in the first column </span></span></code></pre></div>
<pre><code>[1] 1 2 3</code></pre>
<div class="sourceCode" id="cb1157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1157-1"><a href="appendix-b-data-wrangling.html#cb1157-1" tabindex="-1"></a>matrix[<span class="sc">-</span><span class="dv">1</span>, ] <span class="co"># a matrix which excludes the first row</span></span></code></pre></div>
<pre><code>     [,1] [,2]
[1,]    2    5
[2,]    3    6</code></pre>
<p>Note how we use an empty placeholder to indicate that we want to select all the values in a row or column, and <code>-</code> to indicate that we want to remove something.</p>
</div>
<div id="array" class="section level4 hasAnchor" number="19.3.2.3">
<h4><span class="header-section-number">19.3.2.3</span> Array<a href="appendix-b-data-wrangling.html#array" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Arrays work the same was as matrices with data of more than two dimensions.</p>
</div>
<div id="data-frame" class="section level4 hasAnchor" number="19.3.2.4">
<h4><span class="header-section-number">19.3.2.4</span> Data frame<a href="appendix-b-data-wrangling.html#data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1159-1"><a href="appendix-b-data-wrangling.html#cb1159-1" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">participant_id =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb1159-2"><a href="appendix-b-data-wrangling.html#cb1159-2" tabindex="-1"></a>            <span class="at">participant_name =</span> <span class="fu">c</span>(<span class="st">&quot;Leia&quot;</span>, <span class="st">&quot;Luke&quot;</span>, <span class="st">&quot;Darth&quot;</span>)) <span class="co"># make the data frame </span></span>
<span id="cb1159-3"><a href="appendix-b-data-wrangling.html#cb1159-3" tabindex="-1"></a></span>
<span id="cb1159-4"><a href="appendix-b-data-wrangling.html#cb1159-4" tabindex="-1"></a>df <span class="co"># the complete data frame</span></span></code></pre></div>
<pre><code># A tibble: 3 × 2
  participant_id participant_name
           &lt;dbl&gt; &lt;chr&gt;           
1              1 Leia            
2              2 Luke            
3              3 Darth           </code></pre>
<div class="sourceCode" id="cb1161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1161-1"><a href="appendix-b-data-wrangling.html#cb1161-1" tabindex="-1"></a>df[<span class="dv">1</span>, <span class="dv">2</span>] <span class="co"># a single element using numbers </span></span></code></pre></div>
<pre><code># A tibble: 1 × 1
  participant_name
  &lt;chr&gt;           
1 Leia            </code></pre>
<div class="sourceCode" id="cb1163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1163-1"><a href="appendix-b-data-wrangling.html#cb1163-1" tabindex="-1"></a>df<span class="sc">$</span>participant_id <span class="co"># all participants </span></span></code></pre></div>
<pre><code>[1] 1 2 3</code></pre>
<div class="sourceCode" id="cb1165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1165-1"><a href="appendix-b-data-wrangling.html#cb1165-1" tabindex="-1"></a>df[[<span class="st">&quot;participant_id&quot;</span>]] <span class="co"># same as before but using [[]] instead of $</span></span></code></pre></div>
<pre><code>[1] 1 2 3</code></pre>
<div class="sourceCode" id="cb1167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1167-1"><a href="appendix-b-data-wrangling.html#cb1167-1" tabindex="-1"></a>df<span class="sc">$</span>participant_name[<span class="dv">2</span>] <span class="co"># name of the second participant</span></span></code></pre></div>
<pre><code>[1] &quot;Luke&quot;</code></pre>
<div class="sourceCode" id="cb1169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1169-1"><a href="appendix-b-data-wrangling.html#cb1169-1" tabindex="-1"></a>df[[<span class="st">&quot;participant_name&quot;</span>]][<span class="dv">2</span>] <span class="co"># same as above</span></span></code></pre></div>
<pre><code>[1] &quot;Luke&quot;</code></pre>
<p>We’ll use data frames a lot. Data frames are like a matrix with column names. Data frames are also more general than matrices in that different columns can have different modes. For example, one column might be a character, another one numeric, and another one a factor.</p>
<p>Here we used the <code>tibble()</code> function to create the data frame. A <code>tibble</code> is almost the same as a data frame but it has better defaults for formatting output in the console (more information on tibbles is <a href="http://r4ds.had.co.nz/tibbles.html">here</a>).</p>
</div>
<div id="lists" class="section level4 hasAnchor" number="19.3.2.5">
<h4><span class="header-section-number">19.3.2.5</span> Lists<a href="appendix-b-data-wrangling.html#lists" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1171-1"><a href="appendix-b-data-wrangling.html#cb1171-1" tabindex="-1"></a>l.mixed <span class="ot">=</span> <span class="fu">list</span>(<span class="at">number =</span> <span class="dv">1</span>, </span>
<span id="cb1171-2"><a href="appendix-b-data-wrangling.html#cb1171-2" tabindex="-1"></a>               <span class="at">character =</span> <span class="st">&quot;2&quot;</span>, </span>
<span id="cb1171-3"><a href="appendix-b-data-wrangling.html#cb1171-3" tabindex="-1"></a>               <span class="at">factor =</span> <span class="fu">factor</span>(<span class="dv">3</span>), </span>
<span id="cb1171-4"><a href="appendix-b-data-wrangling.html#cb1171-4" tabindex="-1"></a>               <span class="at">matrix =</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">2</span>),</span>
<span id="cb1171-5"><a href="appendix-b-data-wrangling.html#cb1171-5" tabindex="-1"></a>               <span class="at">df =</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>)))</span>
<span id="cb1171-6"><a href="appendix-b-data-wrangling.html#cb1171-6" tabindex="-1"></a>l.mixed</span></code></pre></div>
<pre><code>$number
[1] 1

$character
[1] &quot;2&quot;

$factor
[1] 3
Levels: 3

$matrix
     [,1] [,2]
[1,]    1    3
[2,]    2    4

$df
# A tibble: 2 × 2
      x     y
  &lt;dbl&gt; &lt;dbl&gt;
1     1     3
2     2     4</code></pre>
<div class="sourceCode" id="cb1173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1173-1"><a href="appendix-b-data-wrangling.html#cb1173-1" tabindex="-1"></a><span class="co"># three different ways of accessing a list</span></span>
<span id="cb1173-2"><a href="appendix-b-data-wrangling.html#cb1173-2" tabindex="-1"></a>l.mixed<span class="sc">$</span>character</span></code></pre></div>
<pre><code>[1] &quot;2&quot;</code></pre>
<div class="sourceCode" id="cb1175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1175-1"><a href="appendix-b-data-wrangling.html#cb1175-1" tabindex="-1"></a>l.mixed[[<span class="st">&quot;character&quot;</span>]]</span></code></pre></div>
<pre><code>[1] &quot;2&quot;</code></pre>
<div class="sourceCode" id="cb1177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1177-1"><a href="appendix-b-data-wrangling.html#cb1177-1" tabindex="-1"></a>l.mixed[[<span class="dv">2</span>]] </span></code></pre></div>
<pre><code>[1] &quot;2&quot;</code></pre>
<p>Lists are a very flexible data format. You can put almost anything in a list.</p>
</div>
</div>
<div id="operators" class="section level3 hasAnchor" number="19.3.3">
<h3><span class="header-section-number">19.3.3</span> Operators<a href="appendix-b-data-wrangling.html#operators" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Table <a href="appendix-b-data-wrangling.html#tab:logical-operators">19.3</a> shows the comparison operators that result in logical outputs.</p>
<table>
<caption><span id="tab:logical-operators">Table 19.3: </span>Table of comparison operators that result in
boolean (TRUE/FALSE) outputs.</caption>
<thead>
<tr class="header">
<th align="left">symbol</th>
<th align="left">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>==</code></td>
<td align="left">equal to</td>
</tr>
<tr class="even">
<td align="left"><code>!=</code></td>
<td align="left">not equal to</td>
</tr>
<tr class="odd">
<td align="left"><code>&gt;</code>, <code>&lt;</code></td>
<td align="left">greater/less than</td>
</tr>
<tr class="even">
<td align="left"><code>&gt;=</code>, <code>&lt;=</code></td>
<td align="left">greater/less than or equal</td>
</tr>
<tr class="odd">
<td align="left"><code>&amp;</code>, <code>&amp;#124;</code>, <code>!</code></td>
<td align="left">logical operators: and, or, not</td>
</tr>
<tr class="even">
<td align="left"><code>%in%</code></td>
<td align="left">checks whether an element is in an object</td>
</tr>
</tbody>
</table>
<p>The <code>%in%</code> operator is very useful, and we can use it like so:</p>
<div class="sourceCode" id="cb1179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1179-1"><a href="appendix-b-data-wrangling.html#cb1179-1" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb1179-2"><a href="appendix-b-data-wrangling.html#cb1179-2" tabindex="-1"></a><span class="dv">2</span> <span class="sc">%in%</span> x </span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb1181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1181-1"><a href="appendix-b-data-wrangling.html#cb1181-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>) <span class="sc">%in%</span> x</span></code></pre></div>
<pre><code>[1]  TRUE FALSE</code></pre>
<p>It’s particularly useful for filtering data as we will see below.</p>
</div>
<div id="control-flow" class="section level3 hasAnchor" number="19.3.4">
<h3><span class="header-section-number">19.3.4</span> Control flow<a href="appendix-b-data-wrangling.html#control-flow" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="if-else" class="section level4 hasAnchor" number="19.3.4.1">
<h4><span class="header-section-number">19.3.4.1</span> if-then<a href="appendix-b-data-wrangling.html#if-else" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1183-1"><a href="appendix-b-data-wrangling.html#cb1183-1" tabindex="-1"></a>number <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb1183-2"><a href="appendix-b-data-wrangling.html#cb1183-2" tabindex="-1"></a></span>
<span id="cb1183-3"><a href="appendix-b-data-wrangling.html#cb1183-3" tabindex="-1"></a><span class="cf">if</span> (number <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb1183-4"><a href="appendix-b-data-wrangling.html#cb1183-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;The number is 1.&quot;</span>)</span>
<span id="cb1183-5"><a href="appendix-b-data-wrangling.html#cb1183-5" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (number <span class="sc">==</span> <span class="dv">2</span>) {</span>
<span id="cb1183-6"><a href="appendix-b-data-wrangling.html#cb1183-6" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;The number is 2.&quot;</span>)</span>
<span id="cb1183-7"><a href="appendix-b-data-wrangling.html#cb1183-7" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb1183-8"><a href="appendix-b-data-wrangling.html#cb1183-8" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;The number is neither 1 nor 2.&quot;</span>)</span>
<span id="cb1183-9"><a href="appendix-b-data-wrangling.html#cb1183-9" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>[1] &quot;The number is neither 1 nor 2.&quot;</code></pre>
<p>As a shorthand version, we can also use the <code>ifelse()</code> function like so:</p>
<div class="sourceCode" id="cb1185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1185-1"><a href="appendix-b-data-wrangling.html#cb1185-1" tabindex="-1"></a>number <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb1185-2"><a href="appendix-b-data-wrangling.html#cb1185-2" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="at">test =</span> number <span class="sc">==</span> <span class="dv">1</span>, <span class="at">yes =</span> <span class="st">&quot;correct&quot;</span>, <span class="at">no =</span> <span class="st">&quot;false&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;false&quot;</code></pre>
</div>
<div id="for-loop" class="section level4 hasAnchor" number="19.3.4.2">
<h4><span class="header-section-number">19.3.4.2</span> for loop<a href="appendix-b-data-wrangling.html#for-loop" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1187-1"><a href="appendix-b-data-wrangling.html#cb1187-1" tabindex="-1"></a>sequence <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb1187-2"><a href="appendix-b-data-wrangling.html#cb1187-2" tabindex="-1"></a></span>
<span id="cb1187-3"><a href="appendix-b-data-wrangling.html#cb1187-3" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(sequence)){</span>
<span id="cb1187-4"><a href="appendix-b-data-wrangling.html#cb1187-4" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb1187-5"><a href="appendix-b-data-wrangling.html#cb1187-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
[1] 6
[1] 7
[1] 8
[1] 9
[1] 10</code></pre>
</div>
<div id="while-loop" class="section level4 hasAnchor" number="19.3.4.3">
<h4><span class="header-section-number">19.3.4.3</span> while loop<a href="appendix-b-data-wrangling.html#while-loop" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1189-1"><a href="appendix-b-data-wrangling.html#cb1189-1" tabindex="-1"></a>number <span class="ot">=</span> <span class="dv">1</span> </span>
<span id="cb1189-2"><a href="appendix-b-data-wrangling.html#cb1189-2" tabindex="-1"></a></span>
<span id="cb1189-3"><a href="appendix-b-data-wrangling.html#cb1189-3" tabindex="-1"></a><span class="cf">while</span>(number <span class="sc">&lt;=</span> <span class="dv">10</span>){</span>
<span id="cb1189-4"><a href="appendix-b-data-wrangling.html#cb1189-4" tabindex="-1"></a>  <span class="fu">print</span>(number)</span>
<span id="cb1189-5"><a href="appendix-b-data-wrangling.html#cb1189-5" tabindex="-1"></a>  number <span class="ot">=</span> number <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb1189-6"><a href="appendix-b-data-wrangling.html#cb1189-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
[1] 6
[1] 7
[1] 8
[1] 9
[1] 10</code></pre>
</div>
</div>
<div id="functions" class="section level3 hasAnchor" number="19.3.5">
<h3><span class="header-section-number">19.3.5</span> Functions<a href="appendix-b-data-wrangling.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb1191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1191-1"><a href="appendix-b-data-wrangling.html#cb1191-1" tabindex="-1"></a>fun.add_two_numbers <span class="ot">=</span> <span class="cf">function</span>(a, b){</span>
<span id="cb1191-2"><a href="appendix-b-data-wrangling.html#cb1191-2" tabindex="-1"></a>  x <span class="ot">=</span> a <span class="sc">+</span> b</span>
<span id="cb1191-3"><a href="appendix-b-data-wrangling.html#cb1191-3" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">str_c</span>(<span class="st">&quot;The result is &quot;</span>, x))</span>
<span id="cb1191-4"><a href="appendix-b-data-wrangling.html#cb1191-4" tabindex="-1"></a>}</span>
<span id="cb1191-5"><a href="appendix-b-data-wrangling.html#cb1191-5" tabindex="-1"></a></span>
<span id="cb1191-6"><a href="appendix-b-data-wrangling.html#cb1191-6" tabindex="-1"></a><span class="fu">fun.add_two_numbers</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>[1] &quot;The result is 3&quot;</code></pre>
<p>I’ve used the <code>str_c()</code> function here to concatenate the string with the number. (R converts the number <code>x</code> into a string for us.) Note, R functions can only return a single object. However, this object can be a list (which can contain anything).</p>
<div id="some-often-used-functions" class="section level4 hasAnchor" number="19.3.5.1">
<h4><span class="header-section-number">19.3.5.1</span> Some often used functions<a href="appendix-b-data-wrangling.html#some-often-used-functions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<caption><span id="tab:unnamed-chunk-12">Table 19.4: </span>Some frequently used functions.</caption>
<colgroup>
<col width="19%" />
<col width="80%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">name</th>
<th align="left">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>length()</code></td>
<td align="left">length of an object</td>
</tr>
<tr class="even">
<td align="right"><code>dim()</code></td>
<td align="left">dimensions of an object (e.g. number of rows and columns)</td>
</tr>
<tr class="odd">
<td align="right"><code>rm()</code></td>
<td align="left">remove an object</td>
</tr>
<tr class="even">
<td align="right"><code>seq()</code></td>
<td align="left">generate a sequence of numbers</td>
</tr>
<tr class="odd">
<td align="right"><code>rep()</code></td>
<td align="left">repeat something n times</td>
</tr>
<tr class="even">
<td align="right"><code>max()</code></td>
<td align="left">maximum</td>
</tr>
<tr class="odd">
<td align="right"><code>min()</code></td>
<td align="left">minimum</td>
</tr>
<tr class="even">
<td align="right"><code>which.max()</code></td>
<td align="left">index of the maximum</td>
</tr>
<tr class="odd">
<td align="right"><code>which.min()</code></td>
<td align="left">index of the maximum</td>
</tr>
<tr class="even">
<td align="right"><code>mean()</code></td>
<td align="left">mean</td>
</tr>
<tr class="odd">
<td align="right"><code>median()</code></td>
<td align="left">median</td>
</tr>
<tr class="even">
<td align="right"><code>sum()</code></td>
<td align="left">sum</td>
</tr>
<tr class="odd">
<td align="right"><code>var()</code></td>
<td align="left">variance</td>
</tr>
<tr class="even">
<td align="right"><code>sd()</code></td>
<td align="left">standard deviation</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="the-pipe-operator" class="section level3 hasAnchor" number="19.3.6">
<h3><span class="header-section-number">19.3.6</span> The pipe operator <code>%&gt;%</code><a href="appendix-b-data-wrangling.html#the-pipe-operator" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-13"></span>
<img src="figures/pipe.jpg" alt="Inspiration for the `magrittr` package name." width="80%" />
<p class="caption">
Figure 19.1: Inspiration for the <code>magrittr</code> package name.
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-14"></span>
<img src="figures/magrittr.png" alt="The `magrittr` package logo." width="40%" />
<p class="caption">
Figure 19.2: The <code>magrittr</code> package logo.
</p>
</div>
<p>The pipe operator <code>%&gt;%</code> is a special operator introduced in the <code>magrittr</code> package. It is used heavily in the tidyverse. The basic idea is simple: this operator allows us to “pipe” several functions into one long chain that matches the order in which we want to do stuff.</p>
<p>Let’s consider the following example of making and eating a cake (thanks to <a href="https://twitter.com/dmi3k/status/1191824875842879489?s=09" class="uri">https://twitter.com/dmi3k/status/1191824875842879489?s=09</a>). This would be the traditional way of writing some code:</p>
<div class="sourceCode" id="cb1193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1193-1"><a href="appendix-b-data-wrangling.html#cb1193-1" tabindex="-1"></a><span class="fu">eat</span>(</span>
<span id="cb1193-2"><a href="appendix-b-data-wrangling.html#cb1193-2" tabindex="-1"></a>  <span class="fu">slice</span>(</span>
<span id="cb1193-3"><a href="appendix-b-data-wrangling.html#cb1193-3" tabindex="-1"></a>    <span class="fu">bake</span>(</span>
<span id="cb1193-4"><a href="appendix-b-data-wrangling.html#cb1193-4" tabindex="-1"></a>      <span class="fu">put</span>(</span>
<span id="cb1193-5"><a href="appendix-b-data-wrangling.html#cb1193-5" tabindex="-1"></a>        <span class="fu">pour</span>(</span>
<span id="cb1193-6"><a href="appendix-b-data-wrangling.html#cb1193-6" tabindex="-1"></a>          <span class="fu">mix</span>(ingredients),</span>
<span id="cb1193-7"><a href="appendix-b-data-wrangling.html#cb1193-7" tabindex="-1"></a>          <span class="at">into =</span> baking_form),</span>
<span id="cb1193-8"><a href="appendix-b-data-wrangling.html#cb1193-8" tabindex="-1"></a>        <span class="at">into =</span> oven),</span>
<span id="cb1193-9"><a href="appendix-b-data-wrangling.html#cb1193-9" tabindex="-1"></a>      <span class="at">time =</span> <span class="dv">30</span>),</span>
<span id="cb1193-10"><a href="appendix-b-data-wrangling.html#cb1193-10" tabindex="-1"></a>    <span class="at">pieces =</span> <span class="dv">6</span>),</span>
<span id="cb1193-11"><a href="appendix-b-data-wrangling.html#cb1193-11" tabindex="-1"></a>  <span class="dv">1</span>)</span></code></pre></div>
<p>To see what’s going on here, we need to read the code inside out. That is, we have to start in the innermost bracket, and then work our way outward. However, there is a natural causal ordering to these steps and wouldn’t it be nice if we could just write code in that order? Thanks to the pipe operator <code>%&gt;%</code> we can! Here is the same example using the pipe:</p>
<div class="sourceCode" id="cb1194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1194-1"><a href="appendix-b-data-wrangling.html#cb1194-1" tabindex="-1"></a>ingredients <span class="sc">%&gt;%</span> </span>
<span id="cb1194-2"><a href="appendix-b-data-wrangling.html#cb1194-2" tabindex="-1"></a>  mix <span class="sc">%&gt;%</span> </span>
<span id="cb1194-3"><a href="appendix-b-data-wrangling.html#cb1194-3" tabindex="-1"></a>  <span class="fu">pour</span>(<span class="at">into =</span> baking_form) <span class="sc">%&gt;%</span> </span>
<span id="cb1194-4"><a href="appendix-b-data-wrangling.html#cb1194-4" tabindex="-1"></a>  <span class="fu">put</span>(<span class="at">into =</span> oven) <span class="sc">%&gt;%</span> </span>
<span id="cb1194-5"><a href="appendix-b-data-wrangling.html#cb1194-5" tabindex="-1"></a>  <span class="fu">bake</span>(<span class="at">time =</span> <span class="dv">30</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1194-6"><a href="appendix-b-data-wrangling.html#cb1194-6" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="at">pieces =</span> <span class="dv">6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1194-7"><a href="appendix-b-data-wrangling.html#cb1194-7" tabindex="-1"></a>  <span class="fu">eat</span>(<span class="dv">1</span>)</span></code></pre></div>
<p>This code is much easier to read and write, since it represents the order in which we want to do things!</p>
<p>Abstractly, the pipe operator does the following:</p>
<blockquote>
<p><code>f(x)</code> can be rewritten as <code>x %&gt;% f()</code></p>
</blockquote>
<p>For example, in standard R, we would write:</p>
<div class="sourceCode" id="cb1195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1195-1"><a href="appendix-b-data-wrangling.html#cb1195-1" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb1195-2"><a href="appendix-b-data-wrangling.html#cb1195-2" tabindex="-1"></a></span>
<span id="cb1195-3"><a href="appendix-b-data-wrangling.html#cb1195-3" tabindex="-1"></a><span class="co"># standard R </span></span>
<span id="cb1195-4"><a href="appendix-b-data-wrangling.html#cb1195-4" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>[1] 6</code></pre>
<p>With the pipe, we can rewrite this as:</p>
<div class="sourceCode" id="cb1197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1197-1"><a href="appendix-b-data-wrangling.html#cb1197-1" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb1197-2"><a href="appendix-b-data-wrangling.html#cb1197-2" tabindex="-1"></a></span>
<span id="cb1197-3"><a href="appendix-b-data-wrangling.html#cb1197-3" tabindex="-1"></a><span class="co"># with the pipe  </span></span>
<span id="cb1197-4"><a href="appendix-b-data-wrangling.html#cb1197-4" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>[1] 6</code></pre>
<p>This doesn’t seem super useful yet, but just hold on a little longer.</p>
<blockquote>
<p><code>f(x, y)</code> can be rewritten as <code>x %&gt;% f(y)</code></p>
</blockquote>
<p>So, we could rewrite the following standard R code …</p>
<div class="sourceCode" id="cb1199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1199-1"><a href="appendix-b-data-wrangling.html#cb1199-1" tabindex="-1"></a><span class="co"># rounding pi to 6 digits, standard R </span></span>
<span id="cb1199-2"><a href="appendix-b-data-wrangling.html#cb1199-2" tabindex="-1"></a><span class="fu">round</span>(pi, <span class="at">digits =</span> <span class="dv">6</span>)</span></code></pre></div>
<pre><code>[1] 3.141593</code></pre>
<p>… by using the pipe:</p>
<div class="sourceCode" id="cb1201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1201-1"><a href="appendix-b-data-wrangling.html#cb1201-1" tabindex="-1"></a><span class="co"># rounding pi to 6 digits, standard R </span></span>
<span id="cb1201-2"><a href="appendix-b-data-wrangling.html#cb1201-2" tabindex="-1"></a>pi <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">6</span>)</span></code></pre></div>
<pre><code>[1] 3.141593</code></pre>
<p>Here is another example:</p>
<div class="sourceCode" id="cb1203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1203-1"><a href="appendix-b-data-wrangling.html#cb1203-1" tabindex="-1"></a>a <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb1203-2"><a href="appendix-b-data-wrangling.html#cb1203-2" tabindex="-1"></a>b <span class="ot">=</span> <span class="dv">4</span></span>
<span id="cb1203-3"><a href="appendix-b-data-wrangling.html#cb1203-3" tabindex="-1"></a><span class="fu">sum</span>(a, b) <span class="co"># standard way </span></span></code></pre></div>
<pre><code>[1] 7</code></pre>
<div class="sourceCode" id="cb1205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1205-1"><a href="appendix-b-data-wrangling.html#cb1205-1" tabindex="-1"></a>a <span class="sc">%&gt;%</span> <span class="fu">sum</span>(b) <span class="co"># the pipe way </span></span></code></pre></div>
<pre><code>[1] 7</code></pre>
<p>The pipe operator inserts the result of the previous computation as a first element into the next computation. So, <code>a %&gt;% sum(b)</code> is equivalent to <code>sum(a, b)</code>. We can also specify to insert the result at a different position via the <code>.</code> operator. For example:</p>
<div class="sourceCode" id="cb1207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1207-1"><a href="appendix-b-data-wrangling.html#cb1207-1" tabindex="-1"></a>a <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb1207-2"><a href="appendix-b-data-wrangling.html#cb1207-2" tabindex="-1"></a>b <span class="ot">=</span> <span class="dv">10</span> </span>
<span id="cb1207-3"><a href="appendix-b-data-wrangling.html#cb1207-3" tabindex="-1"></a>b <span class="sc">%&gt;%</span> <span class="fu">seq</span>(<span class="at">from =</span> a, <span class="at">to =</span> .)</span></code></pre></div>
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>Here, I used the <code>.</code> operator to specify that I woud like to insert the result of <code>b</code> where I’ve put the <code>.</code> in the <code>seq()</code> function.</p>
<blockquote>
<p><code>f(x, y)</code> can be rewritten as <code>y %&gt;% f(x, .)</code></p>
</blockquote>
<p>Still not to thrilled about the pipe? We can keep going though (and I’m sure you’ll be convinced eventually.)</p>
<blockquote>
<p><code>h(g(f(x)))</code> can be rewritten as <code>x %&gt;% f() %&gt;% g() %&gt;% h()</code></p>
</blockquote>
<p>For example, consider that we want to calculate the root mean squared error (RMSE) between prediction and data.</p>
<p>Here is how the RMSE is defined:</p>
<p><span class="math display">\[
\text{RMSE} = \sqrt\frac{\sum_{i=1}^n(\hat{y}_i-y_i)^2}{n}
\]</span>
where <span class="math inline">\(\hat{y}_i\)</span> denotes the prediction, and <span class="math inline">\(y_i\)</span> the actually observed value.</p>
<p>In base R, we would do the following.</p>
<div class="sourceCode" id="cb1209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1209-1"><a href="appendix-b-data-wrangling.html#cb1209-1" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb1209-2"><a href="appendix-b-data-wrangling.html#cb1209-2" tabindex="-1"></a>prediction <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb1209-3"><a href="appendix-b-data-wrangling.html#cb1209-3" tabindex="-1"></a></span>
<span id="cb1209-4"><a href="appendix-b-data-wrangling.html#cb1209-4" tabindex="-1"></a><span class="co"># calculate root mean squared error</span></span>
<span id="cb1209-5"><a href="appendix-b-data-wrangling.html#cb1209-5" tabindex="-1"></a>rmse <span class="ot">=</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>((prediction<span class="sc">-</span>data)<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb1209-6"><a href="appendix-b-data-wrangling.html#cb1209-6" tabindex="-1"></a><span class="fu">print</span>(rmse)</span></code></pre></div>
<pre><code>[1] 1.183216</code></pre>
<p>Using the pipe operator makes the operation more intuitive:</p>
<div class="sourceCode" id="cb1211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1211-1"><a href="appendix-b-data-wrangling.html#cb1211-1" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb1211-2"><a href="appendix-b-data-wrangling.html#cb1211-2" tabindex="-1"></a>prediction <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb1211-3"><a href="appendix-b-data-wrangling.html#cb1211-3" tabindex="-1"></a></span>
<span id="cb1211-4"><a href="appendix-b-data-wrangling.html#cb1211-4" tabindex="-1"></a><span class="co"># calculate root mean squared error the pipe way </span></span>
<span id="cb1211-5"><a href="appendix-b-data-wrangling.html#cb1211-5" tabindex="-1"></a>rmse <span class="ot">=</span> (prediction<span class="sc">-</span>data)<span class="sc">^</span><span class="dv">2</span> <span class="sc">%&gt;%</span> </span>
<span id="cb1211-6"><a href="appendix-b-data-wrangling.html#cb1211-6" tabindex="-1"></a>  <span class="fu">mean</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1211-7"><a href="appendix-b-data-wrangling.html#cb1211-7" tabindex="-1"></a>  <span class="fu">sqrt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1211-8"><a href="appendix-b-data-wrangling.html#cb1211-8" tabindex="-1"></a>  <span class="fu">print</span>() </span></code></pre></div>
<pre><code>[1] 1.183216</code></pre>
<p>First, we calculate the squared error, then we take the mean, then the square root, and then print the result.</p>
<p>The pipe operator <code>%&gt;%</code> is similar to the <code>+</code> used in <code>ggplot2</code>. It allows us to take step-by-step actions in a way that fits the causal ordering of how we want to do things.</p>
<blockquote>
<p><strong>Tip</strong>: The keyboard shortcut for the pipe operator is:<br />
<code>cmd/ctrl + shift + m</code><br />
<strong>Definitely learn this one</strong> – we’ll use the pipe a lot!!</p>
</blockquote>
<blockquote>
<p><strong>Tip</strong>: Code is generally easier to read when the pipe <code>%&gt;%</code> is at the end of a line (just like the <code>+</code> in <code>ggplot2</code>).</p>
</blockquote>
<p>A key advantage of using the pipe is that you don’t have to save intermediate computations as new variables and this helps to keep your environment nice and clean!</p>
<div id="practice-1" class="section level4 hasAnchor" number="19.3.6.1">
<h4><span class="header-section-number">19.3.6.1</span> Practice 1<a href="appendix-b-data-wrangling.html#practice-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s practice the pipe operator.</p>
<div class="sourceCode" id="cb1213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1213-1"><a href="appendix-b-data-wrangling.html#cb1213-1" tabindex="-1"></a><span class="co"># here are some numbers</span></span>
<span id="cb1213-2"><a href="appendix-b-data-wrangling.html#cb1213-2" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb1213-3"><a href="appendix-b-data-wrangling.html#cb1213-3" tabindex="-1"></a></span>
<span id="cb1213-4"><a href="appendix-b-data-wrangling.html#cb1213-4" tabindex="-1"></a><span class="co"># taking the log the standard way</span></span>
<span id="cb1213-5"><a href="appendix-b-data-wrangling.html#cb1213-5" tabindex="-1"></a><span class="fu">log</span>(x)</span></code></pre></div>
<pre><code>[1] 0.0000000 0.6931472 1.0986123 1.3862944 1.6094379</code></pre>
<div class="sourceCode" id="cb1215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1215-1"><a href="appendix-b-data-wrangling.html#cb1215-1" tabindex="-1"></a><span class="co"># now take the log the pipe way (write your code underneath)</span></span></code></pre></div>
<div class="sourceCode" id="cb1216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1216-1"><a href="appendix-b-data-wrangling.html#cb1216-1" tabindex="-1"></a><span class="co"># some more numbers</span></span>
<span id="cb1216-2"><a href="appendix-b-data-wrangling.html#cb1216-2" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">10</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">by =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb1216-3"><a href="appendix-b-data-wrangling.html#cb1216-3" tabindex="-1"></a></span>
<span id="cb1216-4"><a href="appendix-b-data-wrangling.html#cb1216-4" tabindex="-1"></a><span class="co"># the standard way</span></span>
<span id="cb1216-5"><a href="appendix-b-data-wrangling.html#cb1216-5" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">round</span>(<span class="fu">sqrt</span>(x), <span class="at">digits =</span> <span class="dv">2</span>))</span></code></pre></div>
<pre><code>[1] 2.721667</code></pre>
<div class="sourceCode" id="cb1218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1218-1"><a href="appendix-b-data-wrangling.html#cb1218-1" tabindex="-1"></a><span class="co"># the pipe way (write your code underneath)</span></span></code></pre></div>
</div>
</div>
</div>
<div id="a-quick-note-on-naming-things" class="section level2 hasAnchor" number="19.4">
<h2><span class="header-section-number">19.4</span> A quick note on naming things<a href="appendix-b-data-wrangling.html#a-quick-note-on-naming-things" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Personally, I like to name things in a (pretty) consistent way so that I have no trouble finding stuff even when I open up a project that I haven’t worked on for a while. I try to use the following naming conventions:</p>
<table>
<caption><span id="tab:unnamed-chunk-27">Table 19.5: </span>Some naming conventions I adopt to make my life easier.</caption>
<thead>
<tr class="header">
<th align="right">name</th>
<th align="left">use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">df.thing</td>
<td align="left">for data frames</td>
</tr>
<tr class="even">
<td align="right">l.thing</td>
<td align="left">for lists</td>
</tr>
<tr class="odd">
<td align="right">fun.thing</td>
<td align="left">for functions</td>
</tr>
<tr class="even">
<td align="right">tmp.thing</td>
<td align="left">for temporary variables</td>
</tr>
</tbody>
</table>
</div>
<div id="looking-at-data" class="section level2 hasAnchor" number="19.5">
<h2><span class="header-section-number">19.5</span> Looking at data<a href="appendix-b-data-wrangling.html#looking-at-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The package <code>dplyr</code> which we loaded as part of the tidyverse, includes a data set with information about starwars characters. Let’s store this as <code>df.starwars</code>.</p>
<div class="sourceCode" id="cb1219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1219-1"><a href="appendix-b-data-wrangling.html#cb1219-1" tabindex="-1"></a>df.starwars <span class="ot">=</span> starwars</span></code></pre></div>
<blockquote>
<p>Note: Unlike in other languages (such as Python or Matlab), a <code>.</code> in a variable name has no special meaning and can just be used as part of the name. I’ve used <code>df</code> here to indicate for myself that this variable is a data frame.
Before visualizing the data, it’s often useful to take a quick direct look at the data.</p>
</blockquote>
<p>There are several ways of taking a look at data in R. Personally, I like to look at the data within RStudio’s data viewer. To do so, you can:</p>
<ul>
<li>click on the <code>df.starwars</code> variable in the “Environment” tab<br />
</li>
<li>type <code>View(df.starwars)</code> in the console</li>
<li>move your mouse over (or select) the variable in the editor (or console) and hit <code>F2</code></li>
</ul>
<p>I like the <code>F2</code> route the best as it’s fast and flexible.</p>
<p>Sometimes it’s also helpful to look at data in the console instead of the data viewer. Particularly when the data is very large, the data viewer can be sluggish.</p>
<p>Here are some useful functions:</p>
<div id="head" class="section level3 hasAnchor" number="19.5.1">
<h3><span class="header-section-number">19.5.1</span> <code>head()</code><a href="appendix-b-data-wrangling.html#head" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Without any extra arguments specified, <code>head()</code> shows the top six rows of the data.</p>
<div class="sourceCode" id="cb1220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1220-1"><a href="appendix-b-data-wrangling.html#cb1220-1" tabindex="-1"></a><span class="fu">head</span>(df.starwars)</span></code></pre></div>
<pre><code># A tibble: 6 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Luke Sky…    172    77 blond      fair       blue            19   male  mascu…
2 C-3PO        167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
3 R2-D2         96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
4 Darth Va…    202   136 none       white      yellow          41.9 male  mascu…
5 Leia Org…    150    49 brown      light      brown           19   fema… femin…
6 Owen Lars    178   120 brown, gr… light      blue            52   male  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
<div id="glimpse" class="section level3 hasAnchor" number="19.5.2">
<h3><span class="header-section-number">19.5.2</span> <code>glimpse()</code><a href="appendix-b-data-wrangling.html#glimpse" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>glimpse()</code> is helpful when the data frame has many columns. The data is shown in a transposed way with columns as rows.</p>
<div class="sourceCode" id="cb1222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1222-1"><a href="appendix-b-data-wrangling.html#cb1222-1" tabindex="-1"></a><span class="fu">glimpse</span>(df.starwars)</span></code></pre></div>
<pre><code>Rows: 87
Columns: 14
$ name       &lt;chr&gt; &quot;Luke Skywalker&quot;, &quot;C-3PO&quot;, &quot;R2-D2&quot;, &quot;Darth Vader&quot;, &quot;Leia Or…
$ height     &lt;int&gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 2…
$ mass       &lt;dbl&gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.…
$ hair_color &lt;chr&gt; &quot;blond&quot;, NA, NA, &quot;none&quot;, &quot;brown&quot;, &quot;brown, grey&quot;, &quot;brown&quot;, N…
$ skin_color &lt;chr&gt; &quot;fair&quot;, &quot;gold&quot;, &quot;white, blue&quot;, &quot;white&quot;, &quot;light&quot;, &quot;light&quot;, &quot;…
$ eye_color  &lt;chr&gt; &quot;blue&quot;, &quot;yellow&quot;, &quot;red&quot;, &quot;yellow&quot;, &quot;brown&quot;, &quot;blue&quot;, &quot;blue&quot;,…
$ birth_year &lt;dbl&gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0, …
$ sex        &lt;chr&gt; &quot;male&quot;, &quot;none&quot;, &quot;none&quot;, &quot;male&quot;, &quot;female&quot;, &quot;male&quot;, &quot;female&quot;,…
$ gender     &lt;chr&gt; &quot;masculine&quot;, &quot;masculine&quot;, &quot;masculine&quot;, &quot;masculine&quot;, &quot;femini…
$ homeworld  &lt;chr&gt; &quot;Tatooine&quot;, &quot;Tatooine&quot;, &quot;Naboo&quot;, &quot;Tatooine&quot;, &quot;Alderaan&quot;, &quot;T…
$ species    &lt;chr&gt; &quot;Human&quot;, &quot;Droid&quot;, &quot;Droid&quot;, &quot;Human&quot;, &quot;Human&quot;, &quot;Human&quot;, &quot;Huma…
$ films      &lt;list&gt; &lt;&quot;A New Hope&quot;, &quot;The Empire Strikes Back&quot;, &quot;Return of the J…
$ vehicles   &lt;list&gt; &lt;&quot;Snowspeeder&quot;, &quot;Imperial Speeder Bike&quot;&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, &quot;Imp…
$ starships  &lt;list&gt; &lt;&quot;X-wing&quot;, &quot;Imperial shuttle&quot;&gt;, &lt;&gt;, &lt;&gt;, &quot;TIE Advanced x1&quot;,…</code></pre>
</div>
<div id="distinct" class="section level3 hasAnchor" number="19.5.3">
<h3><span class="header-section-number">19.5.3</span> <code>distinct()</code><a href="appendix-b-data-wrangling.html#distinct" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>distinct()</code> shows all the distinct values for a character or factor column.</p>
<div class="sourceCode" id="cb1224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1224-1"><a href="appendix-b-data-wrangling.html#cb1224-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1224-2"><a href="appendix-b-data-wrangling.html#cb1224-2" tabindex="-1"></a>  <span class="fu">distinct</span>(species)</span></code></pre></div>
<pre><code># A tibble: 38 × 1
   species       
   &lt;chr&gt;         
 1 Human         
 2 Droid         
 3 Wookiee       
 4 Rodian        
 5 Hutt          
 6 &lt;NA&gt;          
 7 Yoda&#39;s species
 8 Trandoshan    
 9 Mon Calamari  
10 Ewok          
# ℹ 28 more rows</code></pre>
</div>
<div id="count" class="section level3 hasAnchor" number="19.5.4">
<h3><span class="header-section-number">19.5.4</span> <code>count()</code><a href="appendix-b-data-wrangling.html#count" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>count()</code> shows a count of all the different distinct values in a column.</p>
<div class="sourceCode" id="cb1226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1226-1"><a href="appendix-b-data-wrangling.html#cb1226-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1226-2"><a href="appendix-b-data-wrangling.html#cb1226-2" tabindex="-1"></a>  <span class="fu">count</span>(eye_color)</span></code></pre></div>
<pre><code># A tibble: 15 × 2
   eye_color         n
   &lt;chr&gt;         &lt;int&gt;
 1 black            10
 2 blue             19
 3 blue-gray         1
 4 brown            21
 5 dark              1
 6 gold              1
 7 green, yellow     1
 8 hazel             3
 9 orange            8
10 pink              1
11 red               5
12 red, blue         1
13 unknown           3
14 white             1
15 yellow           11</code></pre>
<p>It’s possible to do grouped counts by combining several variables.</p>
<div class="sourceCode" id="cb1228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1228-1"><a href="appendix-b-data-wrangling.html#cb1228-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1228-2"><a href="appendix-b-data-wrangling.html#cb1228-2" tabindex="-1"></a>  <span class="fu">count</span>(eye_color, gender) <span class="sc">%&gt;%</span> </span>
<span id="cb1228-3"><a href="appendix-b-data-wrangling.html#cb1228-3" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code># A tibble: 10 × 3
   eye_color gender        n
   &lt;chr&gt;     &lt;chr&gt;     &lt;int&gt;
 1 black     feminine      2
 2 black     masculine     8
 3 blue      feminine      6
 4 blue      masculine    12
 5 blue      &lt;NA&gt;          1
 6 blue-gray masculine     1
 7 brown     feminine      4
 8 brown     masculine    15
 9 brown     &lt;NA&gt;          2
10 dark      masculine     1</code></pre>
</div>
<div id="datatable" class="section level3 hasAnchor" number="19.5.5">
<h3><span class="header-section-number">19.5.5</span> <code>datatable()</code><a href="appendix-b-data-wrangling.html#datatable" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For RMardkown files specifically, we can use the <code>datatable()</code> function from the <code>DT</code> package to get an interactive table widget.</p>
<div class="sourceCode" id="cb1230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1230-1"><a href="appendix-b-data-wrangling.html#cb1230-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1230-2"><a href="appendix-b-data-wrangling.html#cb1230-2" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-459f6c33102a7928643e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-459f6c33102a7928643e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87"],["Luke Skywalker","C-3PO","R2-D2","Darth Vader","Leia Organa","Owen Lars","Beru Whitesun Lars","R5-D4","Biggs Darklighter","Obi-Wan Kenobi","Anakin Skywalker","Wilhuff Tarkin","Chewbacca","Han Solo","Greedo","Jabba Desilijic Tiure","Wedge Antilles","Jek Tono Porkins","Yoda","Palpatine","Boba Fett","IG-88","Bossk","Lando Calrissian","Lobot","Ackbar","Mon Mothma","Arvel Crynyd","Wicket Systri Warrick","Nien Nunb","Qui-Gon Jinn","Nute Gunray","Finis Valorum","Padmé Amidala","Jar Jar Binks","Roos Tarpals","Rugor Nass","Ric Olié","Watto","Sebulba","Quarsh Panaka","Shmi Skywalker","Darth Maul","Bib Fortuna","Ayla Secura","Ratts Tyerel","Dud Bolt","Gasgano","Ben Quadinaros","Mace Windu","Ki-Adi-Mundi","Kit Fisto","Eeth Koth","Adi Gallia","Saesee Tiin","Yarael Poof","Plo Koon","Mas Amedda","Gregar Typho","Cordé","Cliegg Lars","Poggle the Lesser","Luminara Unduli","Barriss Offee","Dormé","Dooku","Bail Prestor Organa","Jango Fett","Zam Wesell","Dexter Jettster","Lama Su","Taun We","Jocasta Nu","R4-P17","Wat Tambor","San Hill","Shaak Ti","Grievous","Tarfful","Raymus Antilles","Sly Moore","Tion Medon","Finn","Rey","Poe Dameron","BB8","Captain Phasma"],[172,167,96,202,150,178,165,97,183,182,188,180,228,180,173,175,170,180,66,170,183,200,190,177,175,180,150,null,88,160,193,191,170,185,196,224,206,183,137,112,183,163,175,180,178,79,94,122,163,188,198,196,171,184,188,264,188,196,185,157,183,183,170,166,165,193,191,183,168,198,229,213,167,96,193,191,178,216,234,188,178,206,null,null,null,null,null],[77,75,32,136,49,120,75,32,84,77,84,null,112,80,74,1358,77,110,17,75,78.2,140,113,79,79,83,null,null,20,68,89,90,null,45,66,82,null,null,null,40,null,null,80,null,55,15,45,null,65,84,82,87,null,50,null,null,80,null,85,null,null,80,56.2,50,null,80,null,79,55,102,88,null,null,null,48,null,57,159,136,79,48,80,null,null,null,null,null],["blond",null,null,"none","brown","brown, grey","brown",null,"black","auburn, white","blond","auburn, grey","brown","brown",null,null,"brown","brown","white","grey","black","none","none","black","none","none","auburn","brown","brown","none","brown","none","blond","brown","none","none","none","brown","black","none","black","black","none","none","none","none","none","none","none","none","white","none","black","none","none","none","none","none","black","brown","brown","none","black","black","brown","white","black","black","blonde","none","none","none","white","none","none","none","none","none","brown","brown","none","none","black","brown","brown","none","none"],["fair","gold","white, blue","white","light","light","light","white, red","light","fair","fair","fair","unknown","fair","green","green-tan, brown","fair","fair","green","pale","fair","metal","green","dark","light","brown mottle","fair","fair","brown","grey","fair","mottled green","fair","light","orange","grey","green","fair","blue, grey","grey, red","dark","fair","red","pale","blue","grey, blue","blue, grey","white, blue","grey, green, yellow","dark","pale","green","brown","dark","pale","white","orange","blue","dark","light","fair","green","yellow","yellow","light","fair","tan","tan","fair, green, yellow","brown","grey","grey","fair","silver, red","green, grey","grey","red, blue, white","brown, white","brown","light","pale","grey","dark","light","light","none","none"],["blue","yellow","red","yellow","brown","blue","blue","red","brown","blue-gray","blue","blue","blue","brown","black","orange","hazel","blue","brown","yellow","brown","red","red","brown","blue","orange","blue","brown","brown","black","blue","red","blue","brown","orange","orange","orange","blue","yellow","orange","brown","brown","yellow","pink","hazel","unknown","yellow","black","orange","brown","yellow","black","brown","blue","orange","yellow","black","blue","brown","brown","blue","yellow","blue","blue","brown","brown","brown","brown","yellow","yellow","black","black","blue","red, blue","unknown","gold","black","green, yellow","blue","brown","white","black","dark","hazel","brown","black","unknown"],[19,112,33,41.9,19,52,47,null,24,57,41.9,64,200,29,44,600,21,null,896,82,31.5,15,53,31,37,41,48,null,8,null,92,null,91,46,52,null,null,null,null,null,62,72,54,null,48,null,null,null,null,72,92,null,null,null,null,null,22,null,null,null,82,null,58,40,null,102,67,66,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["male","none","none","male","female","male","female","none","male","male","male","male","male","male","male","hermaphroditic","male",null,"male","male","male","none","male","male","male","male","female","male","male","male","male","male","male","female","male","male","male","male","male","male","male","female","male","male","female","male","male","male","male","male","male","male","male","female","male","male","male","male",null,null,"male","male","female","female","female","male","male","male","female","male","male","female","female","none","male","male","female","male","male","male",null,"male","male","female","male","none","female"],["masculine","masculine","masculine","masculine","feminine","masculine","feminine","masculine","masculine","masculine","masculine","masculine","masculine","masculine","masculine","masculine","masculine",null,"masculine","masculine","masculine","masculine","masculine","masculine","masculine","masculine","feminine","masculine","masculine","masculine","masculine","masculine","masculine","feminine","masculine","masculine","masculine","masculine","masculine","masculine","masculine","feminine","masculine","masculine","feminine","masculine","masculine","masculine","masculine","masculine","masculine","masculine","masculine","feminine","masculine","masculine","masculine","masculine",null,null,"masculine","masculine","feminine","feminine","feminine","masculine","masculine","masculine","feminine","masculine","masculine","feminine","feminine","feminine","masculine","masculine","feminine","masculine","masculine","masculine",null,"masculine","masculine","feminine","masculine","masculine","feminine"],["Tatooine","Tatooine","Naboo","Tatooine","Alderaan","Tatooine","Tatooine","Tatooine","Tatooine","Stewjon","Tatooine","Eriadu","Kashyyyk","Corellia","Rodia","Nal Hutta","Corellia","Bestine IV",null,"Naboo","Kamino",null,"Trandosha","Socorro","Bespin","Mon Cala","Chandrila",null,"Endor","Sullust",null,"Cato Neimoidia","Coruscant","Naboo","Naboo","Naboo","Naboo","Naboo","Toydaria","Malastare","Naboo","Tatooine","Dathomir","Ryloth","Ryloth","Aleen Minor","Vulpter","Troiken","Tund","Haruun Kal","Cerea","Glee Anselm","Iridonia","Coruscant","Iktotch","Quermia","Dorin","Champala","Naboo","Naboo","Tatooine","Geonosis","Mirial","Mirial","Naboo","Serenno","Alderaan","Concord Dawn","Zolan","Ojom","Kamino","Kamino","Coruscant",null,"Skako","Muunilinst","Shili","Kalee","Kashyyyk","Alderaan","Umbara","Utapau",null,null,null,null,null],["Human","Droid","Droid","Human","Human","Human","Human","Droid","Human","Human","Human","Human","Wookiee","Human","Rodian","Hutt","Human",null,"Yoda's species","Human","Human","Droid","Trandoshan","Human","Human","Mon Calamari","Human","Human","Ewok","Sullustan","Human","Neimodian","Human","Human","Gungan","Gungan","Gungan","Human","Toydarian","Dug","Human","Human","Zabrak","Twi'lek","Twi'lek","Aleena","Vulptereen","Xexto","Toong","Human","Cerean","Nautolan","Zabrak","Tholothian","Iktotchi","Quermian","Kel Dor","Chagrian",null,null,"Human","Geonosian","Mirialan","Mirialan","Human","Human","Human","Human","Clawdite","Besalisk","Kaminoan","Kaminoan","Human","Droid","Skakoan","Muun","Togruta","Kaleesh","Wookiee","Human",null,"Pau'an","Human","Human","Human","Droid","Human"],[["A New Hope","The Empire Strikes Back","Return of the Jedi","Revenge of the Sith","The Force Awakens"],["A New Hope","The Empire Strikes Back","Return of the Jedi","The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["A New Hope","The Empire Strikes Back","Return of the Jedi","The Phantom Menace","Attack of the Clones","Revenge of the Sith","The Force Awakens"],["A New Hope","The Empire Strikes Back","Return of the Jedi","Revenge of the Sith"],["A New Hope","The Empire Strikes Back","Return of the Jedi","Revenge of the Sith","The Force Awakens"],["A New Hope","Attack of the Clones","Revenge of the Sith"],["A New Hope","Attack of the Clones","Revenge of the Sith"],["A New Hope"],["A New Hope"],["A New Hope","The Empire Strikes Back","Return of the Jedi","The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["A New Hope","Revenge of the Sith"],["A New Hope","The Empire Strikes Back","Return of the Jedi","Revenge of the Sith","The Force Awakens"],["A New Hope","The Empire Strikes Back","Return of the Jedi","The Force Awakens"],["A New Hope"],["A New Hope","Return of the Jedi","The Phantom Menace"],["A New Hope","The Empire Strikes Back","Return of the Jedi"],["A New Hope"],["The Empire Strikes Back","Return of the Jedi","The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["The Empire Strikes Back","Return of the Jedi","The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["The Empire Strikes Back","Return of the Jedi","Attack of the Clones"],["The Empire Strikes Back"],["The Empire Strikes Back"],["The Empire Strikes Back","Return of the Jedi"],["The Empire Strikes Back"],["Return of the Jedi","The Force Awakens"],["Return of the Jedi"],["Return of the Jedi"],["Return of the Jedi"],["Return of the Jedi"],["The Phantom Menace"],["The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["The Phantom Menace"],["The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["The Phantom Menace","Attack of the Clones"],["The Phantom Menace"],["The Phantom Menace"],["The Phantom Menace"],["The Phantom Menace","Attack of the Clones"],["The Phantom Menace"],["The Phantom Menace"],["The Phantom Menace","Attack of the Clones"],["The Phantom Menace"],["Return of the Jedi"],["The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["The Phantom Menace"],["The Phantom Menace"],["The Phantom Menace"],["The Phantom Menace"],["The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["The Phantom Menace","Revenge of the Sith"],["The Phantom Menace","Revenge of the Sith"],["The Phantom Menace","Revenge of the Sith"],["The Phantom Menace"],["The Phantom Menace","Attack of the Clones","Revenge of the Sith"],["The Phantom Menace","Attack of the Clones"],["Attack of the Clones"],["Attack of the Clones"],["Attack of the Clones"],["Attack of the Clones","Revenge of the Sith"],["Attack of the Clones","Revenge of the Sith"],["Attack of the Clones"],["Attack of the Clones"],["Attack of the Clones","Revenge of the Sith"],["Attack of the Clones","Revenge of the Sith"],["Attack of the Clones"],["Attack of the Clones"],["Attack of the Clones"],["Attack of the Clones"],["Attack of the Clones"],["Attack of the Clones"],["Attack of the Clones","Revenge of the Sith"],["Attack of the Clones"],["Attack of the Clones"],["Attack of the Clones","Revenge of the Sith"],["Revenge of the Sith"],["Revenge of the Sith"],["A New Hope","Revenge of the Sith"],["Attack of the Clones","Revenge of the Sith"],["Revenge of the Sith"],["The Force Awakens"],["The Force Awakens"],["The Force Awakens"],["The Force Awakens"],["The Force Awakens"]],[["Snowspeeder","Imperial Speeder Bike"],[],[],[],["Imperial Speeder Bike"],[],[],[],[],["Tribubble bongo"],["Zephyr-G swoop bike","XJ-6 airspeeder"],[],["AT-ST"],[],[],[],["Snowspeeder"],[],[],[],[],[],[],[],[],[],[],[],[],[],["Tribubble bongo"],[],[],[],[],[],[],[],[],[],[],[],["Sith speeder"],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],["Flitknot speeder"],[],[],["Koro-2 Exodrive airspeeder"],[],[],[],[],[],[],[],[],["Tsmeu-6 personal wheel bike"],[],[],[],[],[],[],[],[],[]],[["X-wing","Imperial shuttle"],[],[],["TIE Advanced x1"],[],[],[],[],["X-wing"],["Jedi starfighter","Trade Federation cruiser","Naboo star skiff","Jedi Interceptor","Belbullab-22 starfighter"],["Naboo fighter","Trade Federation cruiser","Jedi Interceptor"],[],["Millennium Falcon","Imperial shuttle"],["Millennium Falcon","Imperial shuttle"],[],[],["X-wing"],["X-wing"],[],[],["Slave 1"],[],[],["Millennium Falcon"],[],[],[],["A-wing"],[],["Millennium Falcon"],[],[],[],["Naboo fighter","H-type Nubian yacht","Naboo star skiff"],[],[],[],["Naboo Royal Starship"],[],[],[],[],["Scimitar"],[],[],[],[],[],[],[],[],[],[],[],[],[],["Jedi starfighter"],[],["Naboo fighter"],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],["Belbullab-22 starfighter"],[],[],[],[],[],[],["X-wing"],[],[]]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>height<\/th>\n      <th>mass<\/th>\n      <th>hair_color<\/th>\n      <th>skin_color<\/th>\n      <th>eye_color<\/th>\n      <th>birth_year<\/th>\n      <th>sex<\/th>\n      <th>gender<\/th>\n      <th>homeworld<\/th>\n      <th>species<\/th>\n      <th>films<\/th>\n      <th>vehicles<\/th>\n      <th>starships<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"name","targets":1},{"name":"height","targets":2},{"name":"mass","targets":3},{"name":"hair_color","targets":4},{"name":"skin_color","targets":5},{"name":"eye_color","targets":6},{"name":"birth_year","targets":7},{"name":"sex","targets":8},{"name":"gender","targets":9},{"name":"homeworld","targets":10},{"name":"species","targets":11},{"name":"films","targets":12},{"name":"vehicles","targets":13},{"name":"starships","targets":14}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="other-tools-for-taking-a-quick-look-at-data" class="section level3 hasAnchor" number="19.5.6">
<h3><span class="header-section-number">19.5.6</span> Other tools for taking a quick look at data<a href="appendix-b-data-wrangling.html#other-tools-for-taking-a-quick-look-at-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="vis_dat" class="section level4 hasAnchor" number="19.5.6.1">
<h4><span class="header-section-number">19.5.6.1</span> <code>vis_dat()</code><a href="appendix-b-data-wrangling.html#vis_dat" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>vis_dat()</code> function from the <code>visdat</code> package, gives a visual summary that makes it easy to see the variable types and whether there are missing values in the data.</p>
<div class="sourceCode" id="cb1231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1231-1"><a href="appendix-b-data-wrangling.html#cb1231-1" tabindex="-1"></a>visdat<span class="sc">::</span><span class="fu">vis_dat</span>(df.starwars)</span></code></pre></div>
<p><img src="18-data_wrangling_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<div class="info">
<p>
When R loads packages, functions loaded in earlier packages are
overwritten by functions of the same name from later packages. This
means that the order in which packages are loaded matters. To make sure
that a function from the correct package is used, you can use the
<code>package_name::function_name()</code> construction. This way, the
<code>function_name()</code> from the <code>package_name</code> is used,
rather than the same function from a different package.
</p>
<p>
This is why, in general, I recommend to load the tidyverse package
last (since it contains a large number of functions that we use a
lot).
</p>
</div>
</div>
<div id="skim" class="section level4 hasAnchor" number="19.5.6.2">
<h4><span class="header-section-number">19.5.6.2</span> <code>skim()</code><a href="appendix-b-data-wrangling.html#skim" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>skim()</code> function from the <code>skimr</code> package provides a nice overview of the data, separated by variable types.</p>
<div class="sourceCode" id="cb1232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1232-1"><a href="appendix-b-data-wrangling.html#cb1232-1" tabindex="-1"></a><span class="co"># install.packages(&quot;skimr&quot;)</span></span>
<span id="cb1232-2"><a href="appendix-b-data-wrangling.html#cb1232-2" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(df.starwars)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-37">Table 19.6: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">df.starwars</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">87</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">14</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">8</td>
</tr>
<tr class="odd">
<td align="left">list</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">numeric</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<colgroup>
<col width="19%" />
<col width="13%" />
<col width="19%" />
<col width="5%" />
<col width="5%" />
<col width="8%" />
<col width="12%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">name</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3</td>
<td align="right">21</td>
<td align="right">0</td>
<td align="right">87</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">hair_color</td>
<td align="right">5</td>
<td align="right">0.94</td>
<td align="right">4</td>
<td align="right">13</td>
<td align="right">0</td>
<td align="right">11</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">skin_color</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3</td>
<td align="right">19</td>
<td align="right">0</td>
<td align="right">31</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">eye_color</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3</td>
<td align="right">13</td>
<td align="right">0</td>
<td align="right">15</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">sex</td>
<td align="right">4</td>
<td align="right">0.95</td>
<td align="right">4</td>
<td align="right">14</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">gender</td>
<td align="right">4</td>
<td align="right">0.95</td>
<td align="right">8</td>
<td align="right">9</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">homeworld</td>
<td align="right">10</td>
<td align="right">0.89</td>
<td align="right">4</td>
<td align="right">14</td>
<td align="right">0</td>
<td align="right">48</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">species</td>
<td align="right">4</td>
<td align="right">0.95</td>
<td align="right">3</td>
<td align="right">14</td>
<td align="right">0</td>
<td align="right">37</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: list</strong></p>
<table>
<colgroup>
<col width="20%" />
<col width="14%" />
<col width="20%" />
<col width="13%" />
<col width="15%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">n_unique</th>
<th align="right">min_length</th>
<th align="right">max_length</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">films</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">24</td>
<td align="right">1</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">vehicles</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">11</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">starships</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">16</td>
<td align="right">0</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col width="17%" />
<col width="12%" />
<col width="17%" />
<col width="8%" />
<col width="8%" />
<col width="3%" />
<col width="7%" />
<col width="4%" />
<col width="7%" />
<col width="6%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">height</td>
<td align="right">6</td>
<td align="right">0.93</td>
<td align="right">174.60</td>
<td align="right">34.77</td>
<td align="right">66</td>
<td align="right">167.0</td>
<td align="right">180</td>
<td align="right">191.0</td>
<td align="right">264</td>
<td align="left">▂▁▇▅▁</td>
</tr>
<tr class="even">
<td align="left">mass</td>
<td align="right">28</td>
<td align="right">0.68</td>
<td align="right">97.31</td>
<td align="right">169.46</td>
<td align="right">15</td>
<td align="right">55.6</td>
<td align="right">79</td>
<td align="right">84.5</td>
<td align="right">1358</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">birth_year</td>
<td align="right">44</td>
<td align="right">0.49</td>
<td align="right">87.57</td>
<td align="right">154.69</td>
<td align="right">8</td>
<td align="right">35.0</td>
<td align="right">52</td>
<td align="right">72.0</td>
<td align="right">896</td>
<td align="left">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
<div id="dfsummary" class="section level4 hasAnchor" number="19.5.6.3">
<h4><span class="header-section-number">19.5.6.3</span> <code>dfSummary()</code><a href="appendix-b-data-wrangling.html#dfsummary" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>summarytools</code> package is another great package for taking a look at the data. It renders a nice html output for the data frame including a lot of helpful information. You can find out more about this package <a href="https://cran.r-project.org/web/packages/summarytools/index.html">here</a>.</p>
<div class="sourceCode" id="cb1233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1233-1"><a href="appendix-b-data-wrangling.html#cb1233-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1233-2"><a href="appendix-b-data-wrangling.html#cb1233-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">is.list</span>(.))) <span class="sc">%&gt;%</span> <span class="co"># this removes all list columns</span></span>
<span id="cb1233-3"><a href="appendix-b-data-wrangling.html#cb1233-3" tabindex="-1"></a>  summarytools<span class="sc">::</span><span class="fu">dfSummary</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1233-4"><a href="appendix-b-data-wrangling.html#cb1233-4" tabindex="-1"></a>  summarytools<span class="sc">::</span><span class="fu">view</span>()</span></code></pre></div>
<blockquote>
<p>Note: The summarytools::view() function will not show up here in the html. It generates a summary of the data that is displayed in the Viewer in RStudio.</p>
</blockquote>
<p>Once we’ve taken a look at the data, the next step would be to visualize relationships between variables of interest.</p>
</div>
</div>
</div>
<div id="wrangling-data" class="section level2 hasAnchor" number="19.6">
<h2><span class="header-section-number">19.6</span> Wrangling data<a href="appendix-b-data-wrangling.html#wrangling-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We use the functions in the package <code>dplyr</code> to manipulate our data.</p>
<div id="filter" class="section level3 hasAnchor" number="19.6.1">
<h3><span class="header-section-number">19.6.1</span> <code>filter()</code><a href="appendix-b-data-wrangling.html#filter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>filter()</code> lets us apply logical (and other) operators (see Table <a href="appendix-b-data-wrangling.html#tab:logical-operators">19.3</a>) to subset the data. Here, I’ve filtered out the masculine characters.</p>
<div class="sourceCode" id="cb1234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1234-1"><a href="appendix-b-data-wrangling.html#cb1234-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1234-2"><a href="appendix-b-data-wrangling.html#cb1234-2" tabindex="-1"></a>  <span class="fu">filter</span>(gender <span class="sc">==</span> <span class="st">&quot;masculine&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 66 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 6 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 7 Biggs D…    183    84 black      light      brown           24   male  mascu…
 8 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
 9 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…
10 Wilhuff…    180    NA auburn, g… fair       blue            64   male  mascu…
# ℹ 56 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>We can combine multiple conditions in the same call. Here, I’ve filtered out masculine characters, whose height is greater than the median height (i.e. they are in the top 50 percentile), and whose mass was not <code>NA</code>.</p>
<div class="sourceCode" id="cb1236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1236-1"><a href="appendix-b-data-wrangling.html#cb1236-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1236-2"><a href="appendix-b-data-wrangling.html#cb1236-2" tabindex="-1"></a>  <span class="fu">filter</span>(gender <span class="sc">==</span> <span class="st">&quot;masculine&quot;</span>,</span>
<span id="cb1236-3"><a href="appendix-b-data-wrangling.html#cb1236-3" tabindex="-1"></a>         height <span class="sc">&gt;</span> <span class="fu">median</span>(height, <span class="at">na.rm =</span> T),</span>
<span id="cb1236-4"><a href="appendix-b-data-wrangling.html#cb1236-4" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(mass))</span></code></pre></div>
<pre><code># A tibble: 26 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Darth V…    202 136   none       white      yellow          41.9 male  mascu…
 2 Biggs D…    183  84   black      light      brown           24   male  mascu…
 3 Obi-Wan…    182  77   auburn, w… fair       blue-gray       57   male  mascu…
 4 Anakin …    188  84   blond      fair       blue            41.9 male  mascu…
 5 Chewbac…    228 112   brown      unknown    blue           200   male  mascu…
 6 Boba Fe…    183  78.2 black      fair       brown           31.5 male  mascu…
 7 IG-88       200 140   none       metal      red             15   none  mascu…
 8 Bossk       190 113   none       green      red             53   male  mascu…
 9 Qui-Gon…    193  89   brown      fair       blue            92   male  mascu…
10 Nute Gu…    191  90   none       mottled g… red             NA   male  mascu…
# ℹ 16 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>Many functions like <code>mean()</code>, <code>median()</code>, <code>var()</code>, <code>sd()</code>, <code>sum()</code> have the argument <code>na.rm</code> which is set to <code>FALSE</code> by default. I set the argument to <code>TRUE</code> here (or <code>T</code> for short), which means that the <code>NA</code> values are ignored, and the <code>median()</code> is calculated based on the remaining values.</p>
<p>You can use <code>,</code> and <code>&amp;</code> interchangeably in <code>filter()</code>. Make sure to use parentheses when combining several logical operators to indicate which logical operation should be performed first:</p>
<div class="sourceCode" id="cb1238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1238-1"><a href="appendix-b-data-wrangling.html#cb1238-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1238-2"><a href="appendix-b-data-wrangling.html#cb1238-2" tabindex="-1"></a>  <span class="fu">filter</span>((skin_color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;dark&quot;</span>, <span class="st">&quot;pale&quot;</span>) <span class="sc">|</span> sex <span class="sc">==</span> <span class="st">&quot;hermaphroditic&quot;</span>) <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">170</span>)</span></code></pre></div>
<pre><code># A tibble: 10 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Jabba D…    175  1358 &lt;NA&gt;       green-tan… orange           600 herm… mascu…
 2 Lando C…    177    79 black      dark       brown             31 male  mascu…
 3 Quarsh …    183    NA black      dark       brown             62 male  mascu…
 4 Bib For…    180    NA none       pale       pink              NA male  mascu…
 5 Mace Wi…    188    84 none       dark       brown             72 male  mascu…
 6 Ki-Adi-…    198    82 white      pale       yellow            92 male  mascu…
 7 Adi Gal…    184    50 none       dark       blue              NA fema… femin…
 8 Saesee …    188    NA none       pale       orange            NA male  mascu…
 9 Gregar …    185    85 black      dark       brown             NA &lt;NA&gt;  &lt;NA&gt;  
10 Sly Moo…    178    48 none       pale       white             NA &lt;NA&gt;  &lt;NA&gt;  
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>The starwars characters that have either a <code>"dark"</code> or a <code>"pale"</code> skin tone, or whose sex is <code>"hermaphroditic"</code>, and whose height is at least <code>170</code> cm. The <code>%in%</code> operator is useful when there are multiple options. Instead of <code>skin_color %in% c("dark", "pale")</code>, I could have also written <code>skin_color == "dark" | skin_color == "pale"</code> but this gets cumbersome as the number of options increases.</p>
</div>
<div id="arrange" class="section level3 hasAnchor" number="19.6.2">
<h3><span class="header-section-number">19.6.2</span> <code>arrange()</code><a href="appendix-b-data-wrangling.html#arrange" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>arrange()</code> allows us to sort the values in a data frame by one or more column entries.</p>
<div class="sourceCode" id="cb1240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1240-1"><a href="appendix-b-data-wrangling.html#cb1240-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1240-2"><a href="appendix-b-data-wrangling.html#cb1240-2" tabindex="-1"></a>  <span class="fu">arrange</span>(hair_color, <span class="fu">desc</span>(height))</span></code></pre></div>
<pre><code># A tibble: 87 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Mon Mot…    150  NA   auburn     fair       blue            48   fema… femin…
 2 Wilhuff…    180  NA   auburn, g… fair       blue            64   male  mascu…
 3 Obi-Wan…    182  77   auburn, w… fair       blue-gray       57   male  mascu…
 4 Bail Pr…    191  NA   black      tan        brown           67   male  mascu…
 5 Gregar …    185  85   black      dark       brown           NA   &lt;NA&gt;  &lt;NA&gt;  
 6 Biggs D…    183  84   black      light      brown           24   male  mascu…
 7 Boba Fe…    183  78.2 black      fair       brown           31.5 male  mascu…
 8 Quarsh …    183  NA   black      dark       brown           62   male  mascu…
 9 Jango F…    183  79   black      tan        brown           66   male  mascu…
10 Lando C…    177  79   black      dark       brown           31   male  mascu…
# ℹ 77 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>Here, I’ve sorted the data frame first by <code>hair_color</code>, and then by <code>height</code>. I’ve used the <code>desc()</code> function to sort <code>height</code> in descending order. Bail Prestor Organa is the tallest black character in starwars.</p>
</div>
<div id="rename" class="section level3 hasAnchor" number="19.6.3">
<h3><span class="header-section-number">19.6.3</span> <code>rename()</code><a href="appendix-b-data-wrangling.html#rename" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>rename()</code> renames column names.</p>
<div class="sourceCode" id="cb1242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1242-1"><a href="appendix-b-data-wrangling.html#cb1242-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1242-2"><a href="appendix-b-data-wrangling.html#cb1242-2" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">person =</span> name,</span>
<span id="cb1242-3"><a href="appendix-b-data-wrangling.html#cb1242-3" tabindex="-1"></a>         <span class="at">mass_kg =</span> mass)</span></code></pre></div>
<pre><code># A tibble: 87 × 14
   person height mass_kg hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke …    172      77 blond      fair       blue            19   male  mascu…
 2 C-3PO     167      75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2      96      32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth…    202     136 none       white      yellow          41.9 male  mascu…
 5 Leia …    150      49 brown      light      brown           19   fema… femin…
 6 Owen …    178     120 brown, gr… light      blue            52   male  mascu…
 7 Beru …    165      75 brown      light      blue            47   fema… femin…
 8 R5-D4      97      32 &lt;NA&gt;       white, red red             NA   none  mascu…
 9 Biggs…    183      84 black      light      brown           24   male  mascu…
10 Obi-W…    182      77 auburn, w… fair       blue-gray       57   male  mascu…
# ℹ 77 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>The new variable names goes on the LHS of the<code>=</code> sign, and the old name on the RHS.</p>
<p>To rename all variables at the same time use <code>rename_with()</code>:</p>
<div class="sourceCode" id="cb1244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1244-1"><a href="appendix-b-data-wrangling.html#cb1244-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span></span>
<span id="cb1244-2"><a href="appendix-b-data-wrangling.html#cb1244-2" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="at">.fn =</span> <span class="sc">~</span> <span class="fu">toupper</span>(.))</span></code></pre></div>
<pre><code># A tibble: 87 × 14
   NAME     HEIGHT  MASS HAIR_COLOR SKIN_COLOR EYE_COLOR BIRTH_YEAR SEX   GENDER
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 9 Biggs D…    183    84 black      light      brown           24   male  mascu…
10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
# ℹ 77 more rows
# ℹ 5 more variables: HOMEWORLD &lt;chr&gt;, SPECIES &lt;chr&gt;, FILMS &lt;list&gt;,
#   VEHICLES &lt;list&gt;, STARSHIPS &lt;list&gt;</code></pre>
<p>Notice that I used the <code>~</code> here in the function call. I will explain what this does shortly.</p>
</div>
<div id="relocate" class="section level3 hasAnchor" number="19.6.4">
<h3><span class="header-section-number">19.6.4</span> <code>relocate()</code><a href="appendix-b-data-wrangling.html#relocate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>relocate()</code> moves columns. For example, the following piece of code moves the <code>species</code> column to the front of the data frame:</p>
<div class="sourceCode" id="cb1246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1246-1"><a href="appendix-b-data-wrangling.html#cb1246-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1246-2"><a href="appendix-b-data-wrangling.html#cb1246-2" tabindex="-1"></a>  <span class="fu">relocate</span>(species)</span></code></pre></div>
<pre><code># A tibble: 87 × 14
   species name    height  mass hair_color skin_color eye_color birth_year sex  
   &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1 Human   Luke S…    172    77 blond      fair       blue            19   male 
 2 Droid   C-3PO      167    75 &lt;NA&gt;       gold       yellow         112   none 
 3 Droid   R2-D2       96    32 &lt;NA&gt;       white, bl… red             33   none 
 4 Human   Darth …    202   136 none       white      yellow          41.9 male 
 5 Human   Leia O…    150    49 brown      light      brown           19   fema…
 6 Human   Owen L…    178   120 brown, gr… light      blue            52   male 
 7 Human   Beru W…    165    75 brown      light      blue            47   fema…
 8 Droid   R5-D4       97    32 &lt;NA&gt;       white, red red             NA   none 
 9 Human   Biggs …    183    84 black      light      brown           24   male 
10 Human   Obi-Wa…    182    77 auburn, w… fair       blue-gray       57   male 
# ℹ 77 more rows
# ℹ 5 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>We could also move the <code>species</code> column after the name column like so:</p>
<div class="sourceCode" id="cb1248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1248-1"><a href="appendix-b-data-wrangling.html#cb1248-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1248-2"><a href="appendix-b-data-wrangling.html#cb1248-2" tabindex="-1"></a>  <span class="fu">relocate</span>(species, <span class="at">.after =</span> name)</span></code></pre></div>
<pre><code># A tibble: 87 × 14
   name    species height  mass hair_color skin_color eye_color birth_year sex  
   &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1 Luke S… Human      172    77 blond      fair       blue            19   male 
 2 C-3PO   Droid      167    75 &lt;NA&gt;       gold       yellow         112   none 
 3 R2-D2   Droid       96    32 &lt;NA&gt;       white, bl… red             33   none 
 4 Darth … Human      202   136 none       white      yellow          41.9 male 
 5 Leia O… Human      150    49 brown      light      brown           19   fema…
 6 Owen L… Human      178   120 brown, gr… light      blue            52   male 
 7 Beru W… Human      165    75 brown      light      blue            47   fema…
 8 R5-D4   Droid       97    32 &lt;NA&gt;       white, red red             NA   none 
 9 Biggs … Human      183    84 black      light      brown           24   male 
10 Obi-Wa… Human      182    77 auburn, w… fair       blue-gray       57   male 
# ℹ 77 more rows
# ℹ 5 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
<div id="select" class="section level3 hasAnchor" number="19.6.5">
<h3><span class="header-section-number">19.6.5</span> <code>select()</code><a href="appendix-b-data-wrangling.html#select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>select()</code> allows us to select a subset of the columns in the data frame.</p>
<div class="sourceCode" id="cb1250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1250-1"><a href="appendix-b-data-wrangling.html#cb1250-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1250-2"><a href="appendix-b-data-wrangling.html#cb1250-2" tabindex="-1"></a>  <span class="fu">select</span>(name, height, mass)</span></code></pre></div>
<pre><code># A tibble: 87 × 3
   name               height  mass
   &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt;
 1 Luke Skywalker        172    77
 2 C-3PO                 167    75
 3 R2-D2                  96    32
 4 Darth Vader           202   136
 5 Leia Organa           150    49
 6 Owen Lars             178   120
 7 Beru Whitesun Lars    165    75
 8 R5-D4                  97    32
 9 Biggs Darklighter     183    84
10 Obi-Wan Kenobi        182    77
# ℹ 77 more rows</code></pre>
<p>We can select multiple columns using the <code>(from:to)</code> syntax:</p>
<div class="sourceCode" id="cb1252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1252-1"><a href="appendix-b-data-wrangling.html#cb1252-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span>  </span>
<span id="cb1252-2"><a href="appendix-b-data-wrangling.html#cb1252-2" tabindex="-1"></a>  <span class="fu">select</span>(name<span class="sc">:</span>birth_year) <span class="co"># from name to birth_year</span></span></code></pre></div>
<pre><code># A tibble: 87 × 7
   name               height  mass hair_color    skin_color eye_color birth_year
   &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;
 1 Luke Skywalker        172    77 blond         fair       blue            19  
 2 C-3PO                 167    75 &lt;NA&gt;          gold       yellow         112  
 3 R2-D2                  96    32 &lt;NA&gt;          white, bl… red             33  
 4 Darth Vader           202   136 none          white      yellow          41.9
 5 Leia Organa           150    49 brown         light      brown           19  
 6 Owen Lars             178   120 brown, grey   light      blue            52  
 7 Beru Whitesun Lars    165    75 brown         light      blue            47  
 8 R5-D4                  97    32 &lt;NA&gt;          white, red red             NA  
 9 Biggs Darklighter     183    84 black         light      brown           24  
10 Obi-Wan Kenobi        182    77 auburn, white fair       blue-gray       57  
# ℹ 77 more rows</code></pre>
<p>Or use a variable for column selection:</p>
<div class="sourceCode" id="cb1254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1254-1"><a href="appendix-b-data-wrangling.html#cb1254-1" tabindex="-1"></a>columns <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;height&quot;</span>, <span class="st">&quot;species&quot;</span>)</span>
<span id="cb1254-2"><a href="appendix-b-data-wrangling.html#cb1254-2" tabindex="-1"></a></span>
<span id="cb1254-3"><a href="appendix-b-data-wrangling.html#cb1254-3" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1254-4"><a href="appendix-b-data-wrangling.html#cb1254-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">one_of</span>(columns)) <span class="co"># useful when using a variable for column selection</span></span></code></pre></div>
<pre><code># A tibble: 87 × 3
   name               height species
   &lt;chr&gt;               &lt;int&gt; &lt;chr&gt;  
 1 Luke Skywalker        172 Human  
 2 C-3PO                 167 Droid  
 3 R2-D2                  96 Droid  
 4 Darth Vader           202 Human  
 5 Leia Organa           150 Human  
 6 Owen Lars             178 Human  
 7 Beru Whitesun Lars    165 Human  
 8 R5-D4                  97 Droid  
 9 Biggs Darklighter     183 Human  
10 Obi-Wan Kenobi        182 Human  
# ℹ 77 more rows</code></pre>
<p>We can also <em>deselect</em> (multiple) columns:</p>
<div class="sourceCode" id="cb1256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1256-1"><a href="appendix-b-data-wrangling.html#cb1256-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1256-2"><a href="appendix-b-data-wrangling.html#cb1256-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>name, <span class="sc">-</span>(birth_year<span class="sc">:</span>vehicles))</span></code></pre></div>
<pre><code># A tibble: 87 × 6
   height  mass hair_color    skin_color  eye_color starships
    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;     &lt;list&gt;   
 1    172    77 blond         fair        blue      &lt;chr [2]&gt;
 2    167    75 &lt;NA&gt;          gold        yellow    &lt;chr [0]&gt;
 3     96    32 &lt;NA&gt;          white, blue red       &lt;chr [0]&gt;
 4    202   136 none          white       yellow    &lt;chr [1]&gt;
 5    150    49 brown         light       brown     &lt;chr [0]&gt;
 6    178   120 brown, grey   light       blue      &lt;chr [0]&gt;
 7    165    75 brown         light       blue      &lt;chr [0]&gt;
 8     97    32 &lt;NA&gt;          white, red  red       &lt;chr [0]&gt;
 9    183    84 black         light       brown     &lt;chr [1]&gt;
10    182    77 auburn, white fair        blue-gray &lt;chr [5]&gt;
# ℹ 77 more rows</code></pre>
<p>And select columns by partially matching the column name:</p>
<div class="sourceCode" id="cb1258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1258-1"><a href="appendix-b-data-wrangling.html#cb1258-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1258-2"><a href="appendix-b-data-wrangling.html#cb1258-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;_&quot;</span>)) <span class="co"># every column that contains the character &quot;_&quot;</span></span></code></pre></div>
<pre><code># A tibble: 87 × 4
   hair_color    skin_color  eye_color birth_year
   &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;
 1 blond         fair        blue            19  
 2 &lt;NA&gt;          gold        yellow         112  
 3 &lt;NA&gt;          white, blue red             33  
 4 none          white       yellow          41.9
 5 brown         light       brown           19  
 6 brown, grey   light       blue            52  
 7 brown         light       blue            47  
 8 &lt;NA&gt;          white, red  red             NA  
 9 black         light       brown           24  
10 auburn, white fair        blue-gray       57  
# ℹ 77 more rows</code></pre>
<div class="sourceCode" id="cb1260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1260-1"><a href="appendix-b-data-wrangling.html#cb1260-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1260-2"><a href="appendix-b-data-wrangling.html#cb1260-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;h&quot;</span>)) <span class="co"># every column that starts with an &quot;h&quot;</span></span></code></pre></div>
<pre><code># A tibble: 87 × 3
   height hair_color    homeworld
    &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;    
 1    172 blond         Tatooine 
 2    167 &lt;NA&gt;          Tatooine 
 3     96 &lt;NA&gt;          Naboo    
 4    202 none          Tatooine 
 5    150 brown         Alderaan 
 6    178 brown, grey   Tatooine 
 7    165 brown         Tatooine 
 8     97 &lt;NA&gt;          Tatooine 
 9    183 black         Tatooine 
10    182 auburn, white Stewjon  
# ℹ 77 more rows</code></pre>
<p>We can rename some of the columns using <code>select()</code> like so:</p>
<div class="sourceCode" id="cb1262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1262-1"><a href="appendix-b-data-wrangling.html#cb1262-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1262-2"><a href="appendix-b-data-wrangling.html#cb1262-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">person =</span> name, height, <span class="at">mass_kg =</span> mass)</span></code></pre></div>
<pre><code># A tibble: 87 × 3
   person             height mass_kg
   &lt;chr&gt;               &lt;int&gt;   &lt;dbl&gt;
 1 Luke Skywalker        172      77
 2 C-3PO                 167      75
 3 R2-D2                  96      32
 4 Darth Vader           202     136
 5 Leia Organa           150      49
 6 Owen Lars             178     120
 7 Beru Whitesun Lars    165      75
 8 R5-D4                  97      32
 9 Biggs Darklighter     183      84
10 Obi-Wan Kenobi        182      77
# ℹ 77 more rows</code></pre>
<div id="where" class="section level4 hasAnchor" number="19.6.5.1">
<h4><span class="header-section-number">19.6.5.1</span> <code>where()</code><a href="appendix-b-data-wrangling.html#where" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>where()</code> is a useful helper function that comes in handy, for example, when we want to select columns based on their data type.</p>
<div class="sourceCode" id="cb1264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1264-1"><a href="appendix-b-data-wrangling.html#cb1264-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1264-2"><a href="appendix-b-data-wrangling.html#cb1264-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="at">fn =</span> is.numeric)) <span class="co"># just select numeric columns</span></span></code></pre></div>
<pre><code># A tibble: 87 × 3
   height  mass birth_year
    &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt;
 1    172    77       19  
 2    167    75      112  
 3     96    32       33  
 4    202   136       41.9
 5    150    49       19  
 6    178   120       52  
 7    165    75       47  
 8     97    32       NA  
 9    183    84       24  
10    182    77       57  
# ℹ 77 more rows</code></pre>
<p>The following selects all columns that are not numeric:</p>
<div class="sourceCode" id="cb1266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1266-1"><a href="appendix-b-data-wrangling.html#cb1266-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1266-2"><a href="appendix-b-data-wrangling.html#cb1266-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="at">fn =</span> <span class="sc">~</span> <span class="sc">!</span><span class="fu">is.numeric</span>(.))) <span class="co"># selects all columns that are not numeric</span></span></code></pre></div>
<pre><code># A tibble: 87 × 11
   name     hair_color skin_color eye_color sex   gender homeworld species films
   &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;lis&gt;
 1 Luke Sk… blond      fair       blue      male  mascu… Tatooine  Human   &lt;chr&gt;
 2 C-3PO    &lt;NA&gt;       gold       yellow    none  mascu… Tatooine  Droid   &lt;chr&gt;
 3 R2-D2    &lt;NA&gt;       white, bl… red       none  mascu… Naboo     Droid   &lt;chr&gt;
 4 Darth V… none       white      yellow    male  mascu… Tatooine  Human   &lt;chr&gt;
 5 Leia Or… brown      light      brown     fema… femin… Alderaan  Human   &lt;chr&gt;
 6 Owen La… brown, gr… light      blue      male  mascu… Tatooine  Human   &lt;chr&gt;
 7 Beru Wh… brown      light      blue      fema… femin… Tatooine  Human   &lt;chr&gt;
 8 R5-D4    &lt;NA&gt;       white, red red       none  mascu… Tatooine  Droid   &lt;chr&gt;
 9 Biggs D… black      light      brown     male  mascu… Tatooine  Human   &lt;chr&gt;
10 Obi-Wan… auburn, w… fair       blue-gray male  mascu… Stewjon   Human   &lt;chr&gt;
# ℹ 77 more rows
# ℹ 2 more variables: vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>Note that I used <code>~</code> here to indicate that I’m creating an anonymous function to check whether column type is numeric. A one-sided formula (expression beginning with <code>~</code>) is interpreted as <code>function(x)</code>, and wherever <code>x</code> would go in the function is represented by <code>.</code>.</p>
<p>So, I could write the same code like so:</p>
<div class="sourceCode" id="cb1268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1268-1"><a href="appendix-b-data-wrangling.html#cb1268-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1268-2"><a href="appendix-b-data-wrangling.html#cb1268-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="cf">function</span>(x) <span class="sc">!</span><span class="fu">is.numeric</span>(x))) <span class="co"># selects all columns that are not numeric</span></span></code></pre></div>
<pre><code># A tibble: 87 × 11
   name     hair_color skin_color eye_color sex   gender homeworld species films
   &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;lis&gt;
 1 Luke Sk… blond      fair       blue      male  mascu… Tatooine  Human   &lt;chr&gt;
 2 C-3PO    &lt;NA&gt;       gold       yellow    none  mascu… Tatooine  Droid   &lt;chr&gt;
 3 R2-D2    &lt;NA&gt;       white, bl… red       none  mascu… Naboo     Droid   &lt;chr&gt;
 4 Darth V… none       white      yellow    male  mascu… Tatooine  Human   &lt;chr&gt;
 5 Leia Or… brown      light      brown     fema… femin… Alderaan  Human   &lt;chr&gt;
 6 Owen La… brown, gr… light      blue      male  mascu… Tatooine  Human   &lt;chr&gt;
 7 Beru Wh… brown      light      blue      fema… femin… Tatooine  Human   &lt;chr&gt;
 8 R5-D4    &lt;NA&gt;       white, red red       none  mascu… Tatooine  Droid   &lt;chr&gt;
 9 Biggs D… black      light      brown     male  mascu… Tatooine  Human   &lt;chr&gt;
10 Obi-Wan… auburn, w… fair       blue-gray male  mascu… Stewjon   Human   &lt;chr&gt;
# ℹ 77 more rows
# ℹ 2 more variables: vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>For more details, take a look at the help file for <code>select()</code>, and this <a href="https://suzan.rbind.io/2018/01/dplyr-tutorial-1/">this great tutorial</a> in which I learned about some of the more advanced ways of using <code>select()</code>.</p>
</div>
</div>
<div id="practice-2" class="section level3 hasAnchor" number="19.6.6">
<h3><span class="header-section-number">19.6.6</span> Practice 2<a href="appendix-b-data-wrangling.html#practice-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create a data frame that:
- only has the species <code>Human</code> and <code>Droid</code>
- with the following data columns (in this order): name, species, birth_year, homeworld
- is arranged according to birth year (with the lowest entry at the top of the data frame)
- and has the <code>name</code> column renamed to <code>person</code></p>
<div class="sourceCode" id="cb1270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1270-1"><a href="appendix-b-data-wrangling.html#cb1270-1" tabindex="-1"></a><span class="co"># write your code here </span></span></code></pre></div>
</div>
<div id="mutate" class="section level3 hasAnchor" number="19.6.7">
<h3><span class="header-section-number">19.6.7</span> <code>mutate()</code><a href="appendix-b-data-wrangling.html#mutate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>mutate()</code> is used to change existing columns or make new ones.</p>
<div class="sourceCode" id="cb1271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1271-1"><a href="appendix-b-data-wrangling.html#cb1271-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1271-2"><a href="appendix-b-data-wrangling.html#cb1271-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">height =</span> height <span class="sc">/</span> <span class="dv">100</span>, <span class="co"># to get height in meters</span></span>
<span id="cb1271-3"><a href="appendix-b-data-wrangling.html#cb1271-3" tabindex="-1"></a>         <span class="at">bmi =</span> mass <span class="sc">/</span> (height<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">%&gt;%</span> <span class="co"># bmi = kg / (m^2)</span></span>
<span id="cb1271-4"><a href="appendix-b-data-wrangling.html#cb1271-4" tabindex="-1"></a>  <span class="fu">select</span>(name, height, mass, bmi)</span></code></pre></div>
<pre><code># A tibble: 87 × 4
   name               height  mass   bmi
   &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Luke Skywalker       1.72    77  26.0
 2 C-3PO                1.67    75  26.9
 3 R2-D2                0.96    32  34.7
 4 Darth Vader          2.02   136  33.3
 5 Leia Organa          1.5     49  21.8
 6 Owen Lars            1.78   120  37.9
 7 Beru Whitesun Lars   1.65    75  27.5
 8 R5-D4                0.97    32  34.0
 9 Biggs Darklighter    1.83    84  25.1
10 Obi-Wan Kenobi       1.82    77  23.2
# ℹ 77 more rows</code></pre>
<p>Here, I’ve calculated the bmi for the different starwars characters. I first mutated the height variable by going from cm to m, and then created the new column “bmi”.</p>
<p>A useful helper function for <code>mutate()</code> is <code>ifelse()</code> which is a shorthand for the if-else control flow (Section <a href="appendix-b-data-wrangling.html#if-else">19.3.4.1</a>). Here is an example:</p>
<div class="sourceCode" id="cb1273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1273-1"><a href="appendix-b-data-wrangling.html#cb1273-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1273-2"><a href="appendix-b-data-wrangling.html#cb1273-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">height_categorical =</span> <span class="fu">ifelse</span>(height <span class="sc">&gt;</span> <span class="fu">median</span>(height, <span class="at">na.rm =</span> T),</span>
<span id="cb1273-3"><a href="appendix-b-data-wrangling.html#cb1273-3" tabindex="-1"></a>                                     <span class="st">&quot;tall&quot;</span>,</span>
<span id="cb1273-4"><a href="appendix-b-data-wrangling.html#cb1273-4" tabindex="-1"></a>                                     <span class="st">&quot;short&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1273-5"><a href="appendix-b-data-wrangling.html#cb1273-5" tabindex="-1"></a>  <span class="fu">select</span>(name, <span class="fu">contains</span>(<span class="st">&quot;height&quot;</span>))</span></code></pre></div>
<pre><code># A tibble: 87 × 3
   name               height height_categorical
   &lt;chr&gt;               &lt;int&gt; &lt;chr&gt;             
 1 Luke Skywalker        172 short             
 2 C-3PO                 167 short             
 3 R2-D2                  96 short             
 4 Darth Vader           202 tall              
 5 Leia Organa           150 short             
 6 Owen Lars             178 short             
 7 Beru Whitesun Lars    165 short             
 8 R5-D4                  97 short             
 9 Biggs Darklighter     183 tall              
10 Obi-Wan Kenobi        182 tall              
# ℹ 77 more rows</code></pre>
<p><code>ifelse()</code> works in the following way: we first specify the condition, then what should be returned if the condition is true, and finally what should be returned otherwise. The more verbose version of the statement above would be: <code>ifelse(test = height &gt; median(height, na.rm = T), yes = "tall", no = "short")</code></p>
<p>In previous versions of <code>dplyr</code> (the package we use for data wrangling), there were a variety of additional mutate functions such as <code>mutate_at()</code>, <code>mutate_if()</code>, and <code>mutate_all()</code>. In the most recent version of <code>dplyr</code>, these additional functions have been deprecated, and replaced with the flexible <code>across()</code> helper function.</p>
<div id="across" class="section level4 hasAnchor" number="19.6.7.1">
<h4><span class="header-section-number">19.6.7.1</span> <code>across()</code><a href="appendix-b-data-wrangling.html#across" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>across()</code> allows us to use the syntax that we’ve learned for <code>select()</code> to select particular variables and apply a function to each of the selected variables.</p>
<p>For example, let’s imagine that we want to z-score a number of variables in our data frame. We can do this like so:</p>
<div class="sourceCode" id="cb1275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1275-1"><a href="appendix-b-data-wrangling.html#cb1275-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span>  </span>
<span id="cb1275-2"><a href="appendix-b-data-wrangling.html#cb1275-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(height, mass, birth_year),</span>
<span id="cb1275-3"><a href="appendix-b-data-wrangling.html#cb1275-3" tabindex="-1"></a>                <span class="at">.fns =</span> scale))</span></code></pre></div>
<pre><code># A tibble: 87 × 14
   name       height[,1] mass[,1] hair_color skin_color eye_color birth_year[,1]
   &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;              &lt;dbl&gt;
 1 Luke Skyw…    -0.0749  -0.120  blond      fair       blue              -0.443
 2 C-3PO         -0.219   -0.132  &lt;NA&gt;       gold       yellow             0.158
 3 R2-D2         -2.26    -0.385  &lt;NA&gt;       white, bl… red               -0.353
 4 Darth Vad…     0.788    0.228  none       white      yellow            -0.295
 5 Leia Orga…    -0.708   -0.285  brown      light      brown             -0.443
 6 Owen Lars      0.0976   0.134  brown, gr… light      blue              -0.230
 7 Beru Whit…    -0.276   -0.132  brown      light      blue              -0.262
 8 R5-D4         -2.23    -0.385  &lt;NA&gt;       white, red red               NA    
 9 Biggs Dar…     0.241   -0.0786 black      light      brown             -0.411
10 Obi-Wan K…     0.213   -0.120  auburn, w… fair       blue-gray         -0.198
# ℹ 77 more rows
# ℹ 7 more variables: sex &lt;chr&gt;, gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>In the <code>.cols =</code> argument of <code>across()</code>, I’ve specified what variables to mutate. In the <code>.fns =</code> argument, I’ve specified that I want to use the function <code>scale</code>. Note that I wrote the function without <code>()</code>. The <code>.fns</code> argument expects allows these possible values:</p>
<ul>
<li>the function itself, e.g. <code>mean</code></li>
<li>a call to the function with <code>.</code> as a dummy argument, <code>~ mean(.)</code> (note the <code>~</code> before the function call)</li>
<li>a list of functions <code>list(mean = mean, median = ~ median(.))</code> (where I’ve mixed both of the other ways)</li>
</ul>
<p>We can also use names to create new columns:</p>
<div class="sourceCode" id="cb1277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1277-1"><a href="appendix-b-data-wrangling.html#cb1277-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span>  </span>
<span id="cb1277-2"><a href="appendix-b-data-wrangling.html#cb1277-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(height, mass, birth_year),</span>
<span id="cb1277-3"><a href="appendix-b-data-wrangling.html#cb1277-3" tabindex="-1"></a>                <span class="at">.fns =</span> scale,</span>
<span id="cb1277-4"><a href="appendix-b-data-wrangling.html#cb1277-4" tabindex="-1"></a>                <span class="at">.names =</span> <span class="st">&quot;{.col}_z&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1277-5"><a href="appendix-b-data-wrangling.html#cb1277-5" tabindex="-1"></a>  <span class="fu">select</span>(name, <span class="fu">contains</span>(<span class="st">&quot;height&quot;</span>), <span class="fu">contains</span>(<span class="st">&quot;mass&quot;</span>), <span class="fu">contains</span>(<span class="st">&quot;birth_year&quot;</span>))</span></code></pre></div>
<pre><code># A tibble: 87 × 7
   name         height height_z[,1]  mass mass_z[,1] birth_year birth_year_z[,1]
   &lt;chr&gt;         &lt;int&gt;        &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;            &lt;dbl&gt;
 1 Luke Skywal…    172      -0.0749    77    -0.120        19             -0.443
 2 C-3PO           167      -0.219     75    -0.132       112              0.158
 3 R2-D2            96      -2.26      32    -0.385        33             -0.353
 4 Darth Vader     202       0.788    136     0.228        41.9           -0.295
 5 Leia Organa     150      -0.708     49    -0.285        19             -0.443
 6 Owen Lars       178       0.0976   120     0.134        52             -0.230
 7 Beru Whites…    165      -0.276     75    -0.132        47             -0.262
 8 R5-D4            97      -2.23      32    -0.385        NA             NA    
 9 Biggs Darkl…    183       0.241     84    -0.0786       24             -0.411
10 Obi-Wan Ken…    182       0.213     77    -0.120        57             -0.198
# ℹ 77 more rows</code></pre>
<p>I’ve specified how I’d like the new variables to be called by using the <code>.names =</code> argument of <code>across()</code>. <code>{.col}</code> stands of the name of the original column, and here I’ve just added <code>_z</code> to each column name for the scaled columns.</p>
<p>We can also apply several functions at the same time.</p>
<div class="sourceCode" id="cb1279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1279-1"><a href="appendix-b-data-wrangling.html#cb1279-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1279-2"><a href="appendix-b-data-wrangling.html#cb1279-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(height, mass, birth_year),</span>
<span id="cb1279-3"><a href="appendix-b-data-wrangling.html#cb1279-3" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="fu">list</span>(<span class="at">z =</span> scale,</span>
<span id="cb1279-4"><a href="appendix-b-data-wrangling.html#cb1279-4" tabindex="-1"></a>                            <span class="at">centered =</span> <span class="sc">~</span> <span class="fu">scale</span>(., <span class="at">scale =</span> <span class="cn">FALSE</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb1279-5"><a href="appendix-b-data-wrangling.html#cb1279-5" tabindex="-1"></a>  <span class="fu">select</span>(name, <span class="fu">contains</span>(<span class="st">&quot;height&quot;</span>), <span class="fu">contains</span>(<span class="st">&quot;mass&quot;</span>), <span class="fu">contains</span>(<span class="st">&quot;birth_year&quot;</span>))</span></code></pre></div>
<pre><code># A tibble: 87 × 10
   name               height height_z[,1] height_centered[,1]  mass mass_z[,1]
   &lt;chr&gt;               &lt;int&gt;        &lt;dbl&gt;               &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
 1 Luke Skywalker        172      -0.0749               -2.60    77    -0.120 
 2 C-3PO                 167      -0.219                -7.60    75    -0.132 
 3 R2-D2                  96      -2.26                -78.6     32    -0.385 
 4 Darth Vader           202       0.788                27.4    136     0.228 
 5 Leia Organa           150      -0.708               -24.6     49    -0.285 
 6 Owen Lars             178       0.0976                3.40   120     0.134 
 7 Beru Whitesun Lars    165      -0.276                -9.60    75    -0.132 
 8 R5-D4                  97      -2.23                -77.6     32    -0.385 
 9 Biggs Darklighter     183       0.241                 8.40    84    -0.0786
10 Obi-Wan Kenobi        182       0.213                 7.40    77    -0.120 
# ℹ 77 more rows
# ℹ 4 more variables: mass_centered &lt;dbl[,1]&gt;, birth_year &lt;dbl&gt;,
#   birth_year_z &lt;dbl[,1]&gt;, birth_year_centered &lt;dbl[,1]&gt;</code></pre>
<p>Here, I’ve created z-scored and centered (i.e. only subtracted the mean but didn’t divide by the standard deviation) versions of the <code>height</code>, <code>mass</code>, and <code>birth_year</code> columns in one go.</p>
<p>You can use the <code>everything()</code> helper function if you want to apply a function to all of the columns in your data frame.</p>
<div class="sourceCode" id="cb1281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1281-1"><a href="appendix-b-data-wrangling.html#cb1281-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1281-2"><a href="appendix-b-data-wrangling.html#cb1281-2" tabindex="-1"></a>  <span class="fu">select</span>(height, mass) <span class="sc">%&gt;%</span></span>
<span id="cb1281-3"><a href="appendix-b-data-wrangling.html#cb1281-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb1281-4"><a href="appendix-b-data-wrangling.html#cb1281-4" tabindex="-1"></a>                <span class="at">.fns =</span> as.character)) <span class="co"># transform all columns to characters</span></span></code></pre></div>
<pre><code># A tibble: 87 × 2
   height mass 
   &lt;chr&gt;  &lt;chr&gt;
 1 172    77   
 2 167    75   
 3 96     32   
 4 202    136  
 5 150    49   
 6 178    120  
 7 165    75   
 8 97     32   
 9 183    84   
10 182    77   
# ℹ 77 more rows</code></pre>
<p>Here, I’ve selected some columns first, and then changed the mode to character in each of them.</p>
<p>Sometimes, you want to apply a function only to those columns that have a particular data type. This is where <code>where()</code> comes in handy!</p>
<p>For example, the following code changes all the numeric columns to character columns:</p>
<div class="sourceCode" id="cb1283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1283-1"><a href="appendix-b-data-wrangling.html#cb1283-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1283-2"><a href="appendix-b-data-wrangling.html#cb1283-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(<span class="sc">~</span> <span class="fu">is.numeric</span>(.)),</span>
<span id="cb1283-3"><a href="appendix-b-data-wrangling.html#cb1283-3" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">as.character</span>(.)))</span></code></pre></div>
<pre><code># A tibble: 87 × 14
   name     height mass  hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk… 172    77    blond      fair       blue      19         male  mascu…
 2 C-3PO    167    75    &lt;NA&gt;       gold       yellow    112        none  mascu…
 3 R2-D2    96     32    &lt;NA&gt;       white, bl… red       33         none  mascu…
 4 Darth V… 202    136   none       white      yellow    41.9       male  mascu…
 5 Leia Or… 150    49    brown      light      brown     19         fema… femin…
 6 Owen La… 178    120   brown, gr… light      blue      52         male  mascu…
 7 Beru Wh… 165    75    brown      light      blue      47         fema… femin…
 8 R5-D4    97     32    &lt;NA&gt;       white, red red       &lt;NA&gt;       none  mascu…
 9 Biggs D… 183    84    black      light      brown     24         male  mascu…
10 Obi-Wan… 182    77    auburn, w… fair       blue-gray 57         male  mascu…
# ℹ 77 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>Or we could round all the numeric columns to one digit:</p>
<div class="sourceCode" id="cb1285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1285-1"><a href="appendix-b-data-wrangling.html#cb1285-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span> </span>
<span id="cb1285-2"><a href="appendix-b-data-wrangling.html#cb1285-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(<span class="sc">~</span> <span class="fu">is.numeric</span>(.)),</span>
<span id="cb1285-3"><a href="appendix-b-data-wrangling.html#cb1285-3" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">round</span>(., <span class="at">digits =</span> <span class="dv">1</span>)))</span></code></pre></div>
<pre><code># A tibble: 87 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 9 Biggs D…    183    84 black      light      brown           24   male  mascu…
10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
# ℹ 77 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div id="practice-3" class="section level3 hasAnchor" number="19.6.8">
<h3><span class="header-section-number">19.6.8</span> Practice 3<a href="appendix-b-data-wrangling.html#practice-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Compute the body mass index for <code>masculine</code> characters who are <code>human</code>.</p>
<ul>
<li>select only the columns you need</li>
<li>filter out only the rows you need</li>
<li>make the new variable with the body mass index</li>
<li>arrange the data frame starting with the highest body mass index</li>
</ul>
<div class="sourceCode" id="cb1287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1287-1"><a href="appendix-b-data-wrangling.html#cb1287-1" tabindex="-1"></a><span class="co"># write your code here </span></span></code></pre></div>
</div>
<div id="summarizing-data" class="section level3 hasAnchor" number="19.6.9">
<h3><span class="header-section-number">19.6.9</span> Summarizing data<a href="appendix-b-data-wrangling.html#summarizing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>OK, let’s load the <code>starwars</code> data set again:</p>
<div class="sourceCode" id="cb1288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1288-1"><a href="appendix-b-data-wrangling.html#cb1288-1" tabindex="-1"></a>df.starwars <span class="ot">=</span> starwars</span></code></pre></div>
<p>A particularly powerful way of interacting with data is by grouping and summarizing it. <code>summarize()</code> returns a single value for each summary that we ask for:</p>
<div class="sourceCode" id="cb1289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1289-1"><a href="appendix-b-data-wrangling.html#cb1289-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span></span>
<span id="cb1289-2"><a href="appendix-b-data-wrangling.html#cb1289-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">height_mean =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> T),</span>
<span id="cb1289-3"><a href="appendix-b-data-wrangling.html#cb1289-3" tabindex="-1"></a>            <span class="at">height_max =</span> <span class="fu">max</span>(height, <span class="at">na.rm =</span> T),</span>
<span id="cb1289-4"><a href="appendix-b-data-wrangling.html#cb1289-4" tabindex="-1"></a>            <span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code># A tibble: 1 × 3
  height_mean height_max     n
        &lt;dbl&gt;      &lt;int&gt; &lt;int&gt;
1        175.        264    87</code></pre>
<p>Here, I computed the mean height, the maximum height, and the total number of observations (using the function <code>n()</code>).
Let’s say we wanted to get a quick sense for how tall starwars characters from different species are. To do that, we combine grouping with summarizing:</p>
<div class="sourceCode" id="cb1291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1291-1"><a href="appendix-b-data-wrangling.html#cb1291-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span></span>
<span id="cb1291-2"><a href="appendix-b-data-wrangling.html#cb1291-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb1291-3"><a href="appendix-b-data-wrangling.html#cb1291-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">height_mean =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> T))</span></code></pre></div>
<pre><code># A tibble: 38 × 2
   species   height_mean
   &lt;chr&gt;           &lt;dbl&gt;
 1 Aleena            79 
 2 Besalisk         198 
 3 Cerean           198 
 4 Chagrian         196 
 5 Clawdite         168 
 6 Droid            131.
 7 Dug              112 
 8 Ewok              88 
 9 Geonosian        183 
10 Gungan           209.
# ℹ 28 more rows</code></pre>
<p>I’ve first used <code>group_by()</code> to group our data frame by the different species, and then used <code>summarize()</code> to calculate the mean height of each species.</p>
<p>It would also be useful to know how many observations there are in each group.</p>
<div class="sourceCode" id="cb1293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1293-1"><a href="appendix-b-data-wrangling.html#cb1293-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span></span>
<span id="cb1293-2"><a href="appendix-b-data-wrangling.html#cb1293-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb1293-3"><a href="appendix-b-data-wrangling.html#cb1293-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">height_mean =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> T),</span>
<span id="cb1293-4"><a href="appendix-b-data-wrangling.html#cb1293-4" tabindex="-1"></a>            <span class="at">group_size =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb1293-5"><a href="appendix-b-data-wrangling.html#cb1293-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(group_size))</span></code></pre></div>
<pre><code># A tibble: 38 × 3
   species  height_mean group_size
   &lt;chr&gt;          &lt;dbl&gt;      &lt;int&gt;
 1 Human           178          35
 2 Droid           131.          6
 3 &lt;NA&gt;            175           4
 4 Gungan          209.          3
 5 Kaminoan        221           2
 6 Mirialan        168           2
 7 Twi&#39;lek         179           2
 8 Wookiee         231           2
 9 Zabrak          173           2
10 Aleena           79           1
# ℹ 28 more rows</code></pre>
<p>Here, I’ve used the <code>n()</code> function to get the number of observations in each group, and then I’ve arranged the data frame according to group size in descending order.</p>
<p>Note that <code>n()</code> always yields the number of observations in each group. If we don’t group the data, then we get the overall number of observations in our data frame (i.e. the number of rows).</p>
<p>So, Humans are the largest group in our data frame, followed by Droids (who are considerably smaller) and Gungans (who would make for good Basketball players).</p>
<p>Sometimes <code>group_by()</code> is also useful without summarizing the data. For example, we often want to z-score (i.e. normalize) data on the level of individual participants. To do so, we first group the data on the level of participants, and then use <code>mutate()</code> to scale the data. Here is an example:</p>
<div class="sourceCode" id="cb1295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1295-1"><a href="appendix-b-data-wrangling.html#cb1295-1" tabindex="-1"></a><span class="co"># first let&#39;s generate some random data</span></span>
<span id="cb1295-2"><a href="appendix-b-data-wrangling.html#cb1295-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>) <span class="co"># to make this reproducible</span></span>
<span id="cb1295-3"><a href="appendix-b-data-wrangling.html#cb1295-3" tabindex="-1"></a></span>
<span id="cb1295-4"><a href="appendix-b-data-wrangling.html#cb1295-4" tabindex="-1"></a>df.summarize <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">participant =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">5</span>),</span>
<span id="cb1295-5"><a href="appendix-b-data-wrangling.html#cb1295-5" tabindex="-1"></a>                      <span class="at">judgment =</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">100</span>, <span class="at">size =</span> <span class="dv">15</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1295-6"><a href="appendix-b-data-wrangling.html#cb1295-6" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code># A tibble: 15 × 2
   participant judgment
         &lt;int&gt;    &lt;int&gt;
 1           1       67
 2           1       38
 3           1        0
 4           1       33
 5           1       86
 6           2       42
 7           2       13
 8           2       81
 9           2       58
10           2       50
11           3       96
12           3       84
13           3       20
14           3       53
15           3       73</code></pre>
<div class="sourceCode" id="cb1297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1297-1"><a href="appendix-b-data-wrangling.html#cb1297-1" tabindex="-1"></a>df.summarize <span class="sc">%&gt;%</span></span>
<span id="cb1297-2"><a href="appendix-b-data-wrangling.html#cb1297-2" tabindex="-1"></a>  <span class="fu">group_by</span>(participant) <span class="sc">%&gt;%</span> <span class="co"># group by participants</span></span>
<span id="cb1297-3"><a href="appendix-b-data-wrangling.html#cb1297-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">judgment_zscored =</span> <span class="fu">scale</span>(judgment)) <span class="sc">%&gt;%</span> <span class="co"># z-score data of individual participants</span></span>
<span id="cb1297-4"><a href="appendix-b-data-wrangling.html#cb1297-4" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="co"># ungroup the data frame</span></span>
<span id="cb1297-5"><a href="appendix-b-data-wrangling.html#cb1297-5" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="co"># print the top 10 rows</span></span></code></pre></div>
<pre><code># A tibble: 10 × 3
   participant judgment judgment_zscored[,1]
         &lt;int&gt;    &lt;int&gt;                &lt;dbl&gt;
 1           1       67               0.671 
 2           1       38              -0.205 
 3           1        0              -1.35  
 4           1       33              -0.356 
 5           1       86               1.24  
 6           2       42              -0.275 
 7           2       13              -1.45  
 8           2       81               1.30  
 9           2       58               0.372 
10           2       50               0.0485</code></pre>
<p>First, I’ve generated some random data using the repeat function <code>rep()</code> for making a <code>participant</code> column, and the <code>sample()</code> function to randomly choose values from a range between 0 and 100 with replacement. (We will learn more about these functions later when we look into how to simulate data.) I’ve then grouped the data by participant, and used the scale function to z-score the data.</p>
<blockquote>
<p><strong>TIP</strong>: Don’t forget to <code>ungroup()</code> your data frame. Otherwise, any subsequent operations are applied per group.</p>
</blockquote>
<p>Sometimes, I want to run operations on each row, rather than per column. For example, let’s say that I wanted each character’s average combined height and mass.</p>
<p>Let’s see first what doesn’t work:</p>
<div class="sourceCode" id="cb1299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1299-1"><a href="appendix-b-data-wrangling.html#cb1299-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span></span>
<span id="cb1299-2"><a href="appendix-b-data-wrangling.html#cb1299-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mean_height_mass =</span> <span class="fu">mean</span>(<span class="fu">c</span>(height, mass), <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb1299-3"><a href="appendix-b-data-wrangling.html#cb1299-3" tabindex="-1"></a>  <span class="fu">select</span>(name, height, mass, mean_height_mass)</span></code></pre></div>
<pre><code># A tibble: 87 × 4
   name               height  mass mean_height_mass
   &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt;            &lt;dbl&gt;
 1 Luke Skywalker        172    77             142.
 2 C-3PO                 167    75             142.
 3 R2-D2                  96    32             142.
 4 Darth Vader           202   136             142.
 5 Leia Organa           150    49             142.
 6 Owen Lars             178   120             142.
 7 Beru Whitesun Lars    165    75             142.
 8 R5-D4                  97    32             142.
 9 Biggs Darklighter     183    84             142.
10 Obi-Wan Kenobi        182    77             142.
# ℹ 77 more rows</code></pre>
<p>Note that all the values are the same. The value shown here is just the mean of all the values in <code>height</code> and <code>mass</code>.</p>
<div class="sourceCode" id="cb1301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1301-1"><a href="appendix-b-data-wrangling.html#cb1301-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span></span>
<span id="cb1301-2"><a href="appendix-b-data-wrangling.html#cb1301-2" tabindex="-1"></a>  <span class="fu">select</span>(height, mass) <span class="sc">%&gt;%</span></span>
<span id="cb1301-3"><a href="appendix-b-data-wrangling.html#cb1301-3" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> <span class="co"># turns the data frame into a vector</span></span>
<span id="cb1301-4"><a href="appendix-b-data-wrangling.html#cb1301-4" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>[1] 142.0314</code></pre>
<p>To get the mean by row, we can either spell out the arithmetic</p>
<div class="sourceCode" id="cb1303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1303-1"><a href="appendix-b-data-wrangling.html#cb1303-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span></span>
<span id="cb1303-2"><a href="appendix-b-data-wrangling.html#cb1303-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mean_height_mass =</span> (height <span class="sc">+</span> mass) <span class="sc">/</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="co"># here, I&#39;ve replaced the mean() function</span></span>
<span id="cb1303-3"><a href="appendix-b-data-wrangling.html#cb1303-3" tabindex="-1"></a>  <span class="fu">select</span>(name, height, mass, mean_height_mass)</span></code></pre></div>
<pre><code># A tibble: 87 × 4
   name               height  mass mean_height_mass
   &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt;            &lt;dbl&gt;
 1 Luke Skywalker        172    77            124. 
 2 C-3PO                 167    75            121  
 3 R2-D2                  96    32             64  
 4 Darth Vader           202   136            169  
 5 Leia Organa           150    49             99.5
 6 Owen Lars             178   120            149  
 7 Beru Whitesun Lars    165    75            120  
 8 R5-D4                  97    32             64.5
 9 Biggs Darklighter     183    84            134. 
10 Obi-Wan Kenobi        182    77            130. 
# ℹ 77 more rows</code></pre>
<p>or use the <code>rowwise()</code> helper function which is like <code>group_by()</code> but treats each row like a group:</p>
<div class="sourceCode" id="cb1305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1305-1"><a href="appendix-b-data-wrangling.html#cb1305-1" tabindex="-1"></a>df.starwars <span class="sc">%&gt;%</span></span>
<span id="cb1305-2"><a href="appendix-b-data-wrangling.html#cb1305-2" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> <span class="co"># now, each row is treated like a separate group</span></span>
<span id="cb1305-3"><a href="appendix-b-data-wrangling.html#cb1305-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mean_height_mass =</span> <span class="fu">mean</span>(<span class="fu">c</span>(height, mass), <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb1305-4"><a href="appendix-b-data-wrangling.html#cb1305-4" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1305-5"><a href="appendix-b-data-wrangling.html#cb1305-5" tabindex="-1"></a>  <span class="fu">select</span>(name, height, mass, mean_height_mass)</span></code></pre></div>
<pre><code># A tibble: 87 × 4
   name               height  mass mean_height_mass
   &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt;            &lt;dbl&gt;
 1 Luke Skywalker        172    77            124. 
 2 C-3PO                 167    75            121  
 3 R2-D2                  96    32             64  
 4 Darth Vader           202   136            169  
 5 Leia Organa           150    49             99.5
 6 Owen Lars             178   120            149  
 7 Beru Whitesun Lars    165    75            120  
 8 R5-D4                  97    32             64.5
 9 Biggs Darklighter     183    84            134. 
10 Obi-Wan Kenobi        182    77            130. 
# ℹ 77 more rows</code></pre>
<div id="practice-1-1" class="section level4 hasAnchor" number="19.6.9.1">
<h4><span class="header-section-number">19.6.9.1</span> Practice 1<a href="appendix-b-data-wrangling.html#practice-1-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Find out what the average <code>height</code> and <code>mass</code> (as well as the standard deviation) is from different <code>species</code> in different <code>homeworld</code>s. Why is the standard deviation <code>NA</code> for many groups?</p>
<div class="sourceCode" id="cb1307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1307-1"><a href="appendix-b-data-wrangling.html#cb1307-1" tabindex="-1"></a><span class="co"># write your code here</span></span></code></pre></div>
<p>Who is the tallest member of each species? What eye color do they have? The <code>top_n()</code> function or the <code>row_number()</code> function (in combination with <code>filter()</code>) will be useful here.</p>
<div class="sourceCode" id="cb1308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1308-1"><a href="appendix-b-data-wrangling.html#cb1308-1" tabindex="-1"></a><span class="co"># write your code here</span></span></code></pre></div>
</div>
</div>
<div id="reshaping-data" class="section level3 hasAnchor" number="19.6.10">
<h3><span class="header-section-number">19.6.10</span> Reshaping data<a href="appendix-b-data-wrangling.html#reshaping-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want our data frames to be tidy. What’s tidy?</p>
<ol style="list-style-type: decimal">
<li>Each variable must have its own column.</li>
<li>Each observation must have its own row.</li>
<li>Each value must have its own cell.</li>
</ol>
<p>For more information on tidy data frames see the <a href="http://r4ds.had.co.nz/tidy-data.html">Tidy data</a> chapter in Hadley Wickham’s R for Data Science book.</p>
<blockquote>
<p>“Happy families are all alike; every unhappy family is unhappy in its own way.” –– Leo Tolstoy</p>
</blockquote>
<blockquote>
<p>“Tidy datasets are all alike, but every messy dataset is messy in its own way.” –– Hadley Wickham</p>
</blockquote>
<div id="pivot_longer-and-pivot_wider" class="section level4 hasAnchor" number="19.6.10.1">
<h4><span class="header-section-number">19.6.10.1</span> <code>pivot_longer()</code> and <code>pivot_wider()</code><a href="appendix-b-data-wrangling.html#pivot_longer-and-pivot_wider" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s first generate a data set that is <em>not</em> tidy.</p>
<div class="sourceCode" id="cb1309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1309-1"><a href="appendix-b-data-wrangling.html#cb1309-1" tabindex="-1"></a><span class="co"># construct data frame</span></span>
<span id="cb1309-2"><a href="appendix-b-data-wrangling.html#cb1309-2" tabindex="-1"></a>df.reshape <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">participant =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb1309-3"><a href="appendix-b-data-wrangling.html#cb1309-3" tabindex="-1"></a>                    <span class="at">observation_1 =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>),</span>
<span id="cb1309-4"><a href="appendix-b-data-wrangling.html#cb1309-4" tabindex="-1"></a>                    <span class="at">observation_2 =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">63</span>),</span>
<span id="cb1309-5"><a href="appendix-b-data-wrangling.html#cb1309-5" tabindex="-1"></a>                    <span class="at">observation_3 =</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">45</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1309-6"><a href="appendix-b-data-wrangling.html#cb1309-6" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code># A tibble: 2 × 4
  participant observation_1 observation_2 observation_3
        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
1           1            10           100            24
2           2            25            63            45</code></pre>
<p>Here, I’ve generated data from two participants with three observations. This data frame is not tidy since each row contains more than a single observation. Data frames that have one row per participant but many observations are called <em>wide</em> data frames.</p>
<p>We can make it tidy using the <code>pivot_longer()</code> function.</p>
<div class="sourceCode" id="cb1311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1311-1"><a href="appendix-b-data-wrangling.html#cb1311-1" tabindex="-1"></a>df.reshape.long <span class="ot">=</span> df.reshape <span class="sc">%&gt;%</span></span>
<span id="cb1311-2"><a href="appendix-b-data-wrangling.html#cb1311-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>participant,</span>
<span id="cb1311-3"><a href="appendix-b-data-wrangling.html#cb1311-3" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;index&quot;</span>,</span>
<span id="cb1311-4"><a href="appendix-b-data-wrangling.html#cb1311-4" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;rating&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1311-5"><a href="appendix-b-data-wrangling.html#cb1311-5" tabindex="-1"></a>  <span class="fu">arrange</span>(participant) <span class="sc">%&gt;%</span></span>
<span id="cb1311-6"><a href="appendix-b-data-wrangling.html#cb1311-6" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code># A tibble: 6 × 3
  participant index         rating
        &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;
1           1 observation_1     10
2           1 observation_2    100
3           1 observation_3     24
4           2 observation_1     25
5           2 observation_2     63
6           2 observation_3     45</code></pre>
<p><code>df.reshape.long</code> now contains one observation in each row. Data frames with one row per observation are called <em>long</em> data frames.</p>
<p>The <code>pivot_longer()</code> function takes at least four arguments:</p>
<ol style="list-style-type: decimal">
<li>the data which I’ve passed to it via the pipe <code>%&gt;%</code></li>
<li>a specification for which columns we want to gather – here I’ve specified that we want to gather the values from all columns except the <code>participant</code> column</li>
<li>a <code>names_to</code> argument which specifies the name of the column which will contain the column names of the original data frame</li>
<li>a <code>values_to</code> argument which specifies the name of the column which will contain the values that were spread across different columns in the original data frame</li>
</ol>
<p><code>pivot_wider()</code> is the counterpart of <code>pivot_longer()</code>. We can use it to go from a data frame that is in <em>long</em> format, to a data frame in <em>wide</em> format, like so:</p>
<div class="sourceCode" id="cb1313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1313-1"><a href="appendix-b-data-wrangling.html#cb1313-1" tabindex="-1"></a>df.reshape.wide <span class="ot">=</span> df.reshape.long <span class="sc">%&gt;%</span></span>
<span id="cb1313-2"><a href="appendix-b-data-wrangling.html#cb1313-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> index,</span>
<span id="cb1313-3"><a href="appendix-b-data-wrangling.html#cb1313-3" tabindex="-1"></a>              <span class="at">values_from =</span> rating) <span class="sc">%&gt;%</span></span>
<span id="cb1313-4"><a href="appendix-b-data-wrangling.html#cb1313-4" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code># A tibble: 2 × 4
  participant observation_1 observation_2 observation_3
        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
1           1            10           100            24
2           2            25            63            45</code></pre>
<p>For my data, I often have a wide data frame that contains demographic information about participants, and a long data frame that contains participants’ responses in the experiment. In Section <a href="appendix-b-data-wrangling.html#joining-multiple-data-frames">19.6.11</a>, we will learn how to combine information from multiple data frames (with potentially different formats).</p>
<p>Here is a more advanced example that involves reshaping a data frame. Let’s consider the following data frame to start with:</p>
<div class="sourceCode" id="cb1315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1315-1"><a href="appendix-b-data-wrangling.html#cb1315-1" tabindex="-1"></a><span class="co"># construct data frame</span></span>
<span id="cb1315-2"><a href="appendix-b-data-wrangling.html#cb1315-2" tabindex="-1"></a>df.reshape2 <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">participant =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb1315-3"><a href="appendix-b-data-wrangling.html#cb1315-3" tabindex="-1"></a>                     <span class="at">stimulus_1 =</span> <span class="fu">c</span>(<span class="st">&quot;flower&quot;</span>, <span class="st">&quot;car&quot;</span>),</span>
<span id="cb1315-4"><a href="appendix-b-data-wrangling.html#cb1315-4" tabindex="-1"></a>                     <span class="at">observation_1 =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>),</span>
<span id="cb1315-5"><a href="appendix-b-data-wrangling.html#cb1315-5" tabindex="-1"></a>                     <span class="at">stimulus_2 =</span> <span class="fu">c</span>(<span class="st">&quot;house&quot;</span>, <span class="st">&quot;flower&quot;</span>),</span>
<span id="cb1315-6"><a href="appendix-b-data-wrangling.html#cb1315-6" tabindex="-1"></a>                     <span class="at">observation_2 =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">63</span>),</span>
<span id="cb1315-7"><a href="appendix-b-data-wrangling.html#cb1315-7" tabindex="-1"></a>                     <span class="at">stimulus_3 =</span> <span class="fu">c</span>(<span class="st">&quot;car&quot;</span>, <span class="st">&quot;house&quot;</span>),</span>
<span id="cb1315-8"><a href="appendix-b-data-wrangling.html#cb1315-8" tabindex="-1"></a>                     <span class="at">observation_3 =</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">45</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1315-9"><a href="appendix-b-data-wrangling.html#cb1315-9" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code># A tibble: 2 × 7
  participant stimulus_1 observation_1 stimulus_2 observation_2 stimulus_3
        &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;     
1           1 flower                10 house                100 car       
2           2 car                   25 flower                63 house     
# ℹ 1 more variable: observation_3 &lt;dbl&gt;</code></pre>
<p>The data frame contains in each row: which stimuli a participant saw, and what rating she gave. The participants saw a picture of a flower, car, and house, and rated how much they liked the picture on a scale from 0 to 100. The order at which the pictures were presented was randomized between participants. I will use a combination of <code>pivot_longer()</code>, and <code>pivot_wider()</code> to turn this into a data frame in long format.</p>
<div class="sourceCode" id="cb1317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1317-1"><a href="appendix-b-data-wrangling.html#cb1317-1" tabindex="-1"></a>df.reshape2 <span class="sc">%&gt;%</span></span>
<span id="cb1317-2"><a href="appendix-b-data-wrangling.html#cb1317-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>participant,</span>
<span id="cb1317-3"><a href="appendix-b-data-wrangling.html#cb1317-3" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;index&quot;</span>, <span class="st">&quot;order&quot;</span>),</span>
<span id="cb1317-4"><a href="appendix-b-data-wrangling.html#cb1317-4" tabindex="-1"></a>               <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span>,</span>
<span id="cb1317-5"><a href="appendix-b-data-wrangling.html#cb1317-5" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;rating&quot;</span>,</span>
<span id="cb1317-6"><a href="appendix-b-data-wrangling.html#cb1317-6" tabindex="-1"></a>               <span class="at">values_transform =</span> <span class="fu">list</span>(<span class="at">rating =</span> as.character)) <span class="sc">%&gt;%</span></span>
<span id="cb1317-7"><a href="appendix-b-data-wrangling.html#cb1317-7" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;index&quot;</span>,</span>
<span id="cb1317-8"><a href="appendix-b-data-wrangling.html#cb1317-8" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">&quot;rating&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1317-9"><a href="appendix-b-data-wrangling.html#cb1317-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(order, observation),</span>
<span id="cb1317-10"><a href="appendix-b-data-wrangling.html#cb1317-10" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb1317-11"><a href="appendix-b-data-wrangling.html#cb1317-11" tabindex="-1"></a>  <span class="fu">select</span>(participant, order, stimulus, <span class="at">rating =</span> observation)</span></code></pre></div>
<pre><code># A tibble: 6 × 4
  participant order stimulus rating
        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
1           1     1 flower       10
2           1     2 house       100
3           1     3 car          24
4           2     1 car          25
5           2     2 flower       63
6           2     3 house        45</code></pre>
<p>Voilà! Getting the desired data frame involved a few new tricks. Let’s take it step by step.</p>
<p>First, I use <code>pivot_longer()</code> to make a long table.</p>
<div class="sourceCode" id="cb1319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1319-1"><a href="appendix-b-data-wrangling.html#cb1319-1" tabindex="-1"></a>df.reshape2 <span class="sc">%&gt;%</span></span>
<span id="cb1319-2"><a href="appendix-b-data-wrangling.html#cb1319-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>participant,</span>
<span id="cb1319-3"><a href="appendix-b-data-wrangling.html#cb1319-3" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;index&quot;</span>, <span class="st">&quot;order&quot;</span>),</span>
<span id="cb1319-4"><a href="appendix-b-data-wrangling.html#cb1319-4" tabindex="-1"></a>               <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span>,</span>
<span id="cb1319-5"><a href="appendix-b-data-wrangling.html#cb1319-5" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;rating&quot;</span>,</span>
<span id="cb1319-6"><a href="appendix-b-data-wrangling.html#cb1319-6" tabindex="-1"></a>               <span class="at">values_transform =</span> <span class="fu">list</span>(<span class="at">rating =</span> as.character))</span></code></pre></div>
<pre><code># A tibble: 12 × 4
   participant index       order rating
         &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; 
 1           1 stimulus    1     flower
 2           1 observation 1     10    
 3           1 stimulus    2     house 
 4           1 observation 2     100   
 5           1 stimulus    3     car   
 6           1 observation 3     24    
 7           2 stimulus    1     car   
 8           2 observation 1     25    
 9           2 stimulus    2     flower
10           2 observation 2     63    
11           2 stimulus    3     house 
12           2 observation 3     45    </code></pre>
<p>Notice how I’ve used a combination of the <code>names_to =</code> and <code>names_sep =</code> arguments to create two columns. Because I’m combining data of two different types (“character” and “numeric”), I needed to specify what I want the resulting data type to be via the <code>values_transform =</code> argument.</p>
<p>I would like to have the information about the stimulus and the observation in the same row. That is, I want to see what rating a participant gave to the flower stimulus, for example. To get there, I can use the <code>pivot_wider()</code> function to make a separate column for each entry in <code>index</code> that contains the values in <code>rating</code>.</p>
<div class="sourceCode" id="cb1321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1321-1"><a href="appendix-b-data-wrangling.html#cb1321-1" tabindex="-1"></a>df.reshape2 <span class="sc">%&gt;%</span></span>
<span id="cb1321-2"><a href="appendix-b-data-wrangling.html#cb1321-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>participant,</span>
<span id="cb1321-3"><a href="appendix-b-data-wrangling.html#cb1321-3" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;index&quot;</span>, <span class="st">&quot;order&quot;</span>),</span>
<span id="cb1321-4"><a href="appendix-b-data-wrangling.html#cb1321-4" tabindex="-1"></a>               <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span>,</span>
<span id="cb1321-5"><a href="appendix-b-data-wrangling.html#cb1321-5" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;rating&quot;</span>,</span>
<span id="cb1321-6"><a href="appendix-b-data-wrangling.html#cb1321-6" tabindex="-1"></a>               <span class="at">values_transform =</span> <span class="fu">list</span>(<span class="at">rating =</span> as.character)) <span class="sc">%&gt;%</span></span>
<span id="cb1321-7"><a href="appendix-b-data-wrangling.html#cb1321-7" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;index&quot;</span>,</span>
<span id="cb1321-8"><a href="appendix-b-data-wrangling.html#cb1321-8" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">&quot;rating&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 6 × 4
  participant order stimulus observation
        &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;      
1           1 1     flower   10         
2           1 2     house    100        
3           1 3     car      24         
4           2 1     car      25         
5           2 2     flower   63         
6           2 3     house    45         </code></pre>
<p>That’s pretty much it. Now, each row contains information about the order in which a stimulus was presented, what the stimulus was, and the judgment that a participant made in this trial.</p>
<div class="sourceCode" id="cb1323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1323-1"><a href="appendix-b-data-wrangling.html#cb1323-1" tabindex="-1"></a>df.reshape2 <span class="sc">%&gt;%</span></span>
<span id="cb1323-2"><a href="appendix-b-data-wrangling.html#cb1323-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>participant,</span>
<span id="cb1323-3"><a href="appendix-b-data-wrangling.html#cb1323-3" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;index&quot;</span>, <span class="st">&quot;order&quot;</span>),</span>
<span id="cb1323-4"><a href="appendix-b-data-wrangling.html#cb1323-4" tabindex="-1"></a>               <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span>,</span>
<span id="cb1323-5"><a href="appendix-b-data-wrangling.html#cb1323-5" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;rating&quot;</span>,</span>
<span id="cb1323-6"><a href="appendix-b-data-wrangling.html#cb1323-6" tabindex="-1"></a>               <span class="at">values_transform =</span> <span class="fu">list</span>(<span class="at">rating =</span> as.character)) <span class="sc">%&gt;%</span></span>
<span id="cb1323-7"><a href="appendix-b-data-wrangling.html#cb1323-7" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;index&quot;</span>,</span>
<span id="cb1323-8"><a href="appendix-b-data-wrangling.html#cb1323-8" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">&quot;rating&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1323-9"><a href="appendix-b-data-wrangling.html#cb1323-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(order, observation),</span>
<span id="cb1323-10"><a href="appendix-b-data-wrangling.html#cb1323-10" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb1323-11"><a href="appendix-b-data-wrangling.html#cb1323-11" tabindex="-1"></a>  <span class="fu">select</span>(participant, order, stimulus, <span class="at">rating =</span> observation)</span></code></pre></div>
<pre><code># A tibble: 6 × 4
  participant order stimulus rating
        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
1           1     1 flower       10
2           1     2 house       100
3           1     3 car          24
4           2     1 car          25
5           2     2 flower       63
6           2     3 house        45</code></pre>
<p>The rest is familiar. I’ve used <code>mutate()</code> with <code>across()</code> to turn <code>order</code> and <code>observation</code> into numeric columns, <code>select()</code> to change the order of the columns (and renamed the <code>observation</code> column to <code>rating</code> along the way).</p>
<p>Getting familiar with <code>pivot_longer()</code> and <code>pivot_wider()</code> takes some time plus trial and error. So don’t be discouraged if you don’t get what you want straight away. Once you’ve mastered these functions, they will make it much easier to beat your data frames into shape.</p>
<p>After having done some transformations like this, it’s worth checking that nothing went wrong. I often compare a few values in the transformed and original data frame to make sure everything is legit.</p>
<p>When reading older code, you will often see <code>gather()</code> (instead of <code>pivot_longer()</code>), and <code>spread()</code> (instead of <code>pivot_wider()</code>). <code>gather</code> and <code>spread</code> are not developed anymore now, and their newer counterparts have additional functionality that comes in handy.</p>
</div>
<div id="separate-and-unite" class="section level4 hasAnchor" number="19.6.10.2">
<h4><span class="header-section-number">19.6.10.2</span> <code>separate()</code> and <code>unite()</code><a href="appendix-b-data-wrangling.html#separate-and-unite" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes, we want to separate one column into multiple columns. For example, we could have achieved the same result we did above slightly differently, like so:</p>
<div class="sourceCode" id="cb1325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1325-1"><a href="appendix-b-data-wrangling.html#cb1325-1" tabindex="-1"></a>df.reshape2 <span class="sc">%&gt;%</span></span>
<span id="cb1325-2"><a href="appendix-b-data-wrangling.html#cb1325-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>participant,</span>
<span id="cb1325-3"><a href="appendix-b-data-wrangling.html#cb1325-3" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;index&quot;</span>,</span>
<span id="cb1325-4"><a href="appendix-b-data-wrangling.html#cb1325-4" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;rating&quot;</span>,</span>
<span id="cb1325-5"><a href="appendix-b-data-wrangling.html#cb1325-5" tabindex="-1"></a>               <span class="at">values_transform =</span> <span class="fu">list</span>(<span class="at">rating =</span> as.character)) <span class="sc">%&gt;%</span></span>
<span id="cb1325-6"><a href="appendix-b-data-wrangling.html#cb1325-6" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> index,</span>
<span id="cb1325-7"><a href="appendix-b-data-wrangling.html#cb1325-7" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;index&quot;</span>, <span class="st">&quot;order&quot;</span>),</span>
<span id="cb1325-8"><a href="appendix-b-data-wrangling.html#cb1325-8" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 12 × 4
   participant index       order rating
         &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; 
 1           1 stimulus    1     flower
 2           1 observation 1     10    
 3           1 stimulus    2     house 
 4           1 observation 2     100   
 5           1 stimulus    3     car   
 6           1 observation 3     24    
 7           2 stimulus    1     car   
 8           2 observation 1     25    
 9           2 stimulus    2     flower
10           2 observation 2     63    
11           2 stimulus    3     house 
12           2 observation 3     45    </code></pre>
<p>Here, I’ve used the <code>separate()</code> function to separate the original <code>index</code> column into two columns. The <code>separate()</code> function takes four arguments:</p>
<ol style="list-style-type: decimal">
<li>the data which I’ve passed to it via the pipe <code>%&gt;%</code></li>
<li>the name of the column <code>col</code> which we want to separate</li>
<li>the names of the columns <code>into</code> into which we want to separate the original column</li>
<li>the separator <code>sep</code> that we want to use to split the columns.</li>
</ol>
<p>Note, like <code>pivot_longer()</code> and <code>pivot_wider()</code>, there is a partner for <code>separate()</code>, too. It’s called <code>unite()</code> and it allows you to combine several columns into one, like so:</p>
<div class="sourceCode" id="cb1327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1327-1"><a href="appendix-b-data-wrangling.html#cb1327-1" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;flower&quot;</span>, <span class="st">&quot;observation&quot;</span>),</span>
<span id="cb1327-2"><a href="appendix-b-data-wrangling.html#cb1327-2" tabindex="-1"></a>       <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1327-3"><a href="appendix-b-data-wrangling.html#cb1327-3" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">&quot;combined&quot;</span>, index, order)</span></code></pre></div>
<pre><code># A tibble: 2 × 1
  combined     
  &lt;chr&gt;        
1 flower_1     
2 observation_2</code></pre>
<p>Sometimes, we may have a data frame where data is recorded in a long string.</p>
<div class="sourceCode" id="cb1329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1329-1"><a href="appendix-b-data-wrangling.html#cb1329-1" tabindex="-1"></a>df.reshape3 <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">participant =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,</span>
<span id="cb1329-2"><a href="appendix-b-data-wrangling.html#cb1329-2" tabindex="-1"></a>                     <span class="at">judgments =</span> <span class="fu">c</span>(<span class="st">&quot;10, 4, 12, 15&quot;</span>, <span class="st">&quot;3, 4&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1329-3"><a href="appendix-b-data-wrangling.html#cb1329-3" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code># A tibble: 2 × 2
  participant judgments    
        &lt;int&gt; &lt;chr&gt;        
1           1 10, 4, 12, 15
2           2 3, 4         </code></pre>
<p>Here, I’ve created a data frame with data from two participants. For whatever reason, we have four judgments from participant 1 and only two judgments from participant 2 (data is often messy in real life, too!).</p>
<p>We can use the <code>separate_rows()</code> function to turn this into a tidy data frame in long format.</p>
<div class="sourceCode" id="cb1331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1331-1"><a href="appendix-b-data-wrangling.html#cb1331-1" tabindex="-1"></a>df.reshape3 <span class="sc">%&gt;%</span></span>
<span id="cb1331-2"><a href="appendix-b-data-wrangling.html#cb1331-2" tabindex="-1"></a>  <span class="fu">separate_rows</span>(judgments)</span></code></pre></div>
<pre><code># A tibble: 6 × 2
  participant judgments
        &lt;int&gt; &lt;chr&gt;    
1           1 10       
2           1 4        
3           1 12       
4           1 15       
5           2 3        
6           2 4        </code></pre>
</div>
<div id="practice-2-1" class="section level4 hasAnchor" number="19.6.10.3">
<h4><span class="header-section-number">19.6.10.3</span> Practice 2<a href="appendix-b-data-wrangling.html#practice-2-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Load this data frame first.</p>
<div class="sourceCode" id="cb1333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1333-1"><a href="appendix-b-data-wrangling.html#cb1333-1" tabindex="-1"></a>df.practice2 <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">participant =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb1333-2"><a href="appendix-b-data-wrangling.html#cb1333-2" tabindex="-1"></a>                      <span class="at">initial =</span> <span class="fu">c</span>(<span class="st">&quot;AR&quot;</span>, <span class="st">&quot;FA&quot;</span>, <span class="st">&quot;IR&quot;</span>, <span class="st">&quot;NC&quot;</span>, <span class="st">&quot;ER&quot;</span>, <span class="st">&quot;PI&quot;</span>, <span class="st">&quot;DH&quot;</span>, <span class="st">&quot;CN&quot;</span>, <span class="st">&quot;WT&quot;</span>, <span class="st">&quot;JD&quot;</span>),</span>
<span id="cb1333-3"><a href="appendix-b-data-wrangling.html#cb1333-3" tabindex="-1"></a>                      <span class="at">judgment_1 =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">1</span>, <span class="dv">14</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">41</span>, <span class="dv">100</span>, <span class="dv">33</span>),</span>
<span id="cb1333-4"><a href="appendix-b-data-wrangling.html#cb1333-4" tabindex="-1"></a>                      <span class="at">judgment_2 =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">89</span>, <span class="dv">94</span>, <span class="dv">27</span>, <span class="dv">29</span>, <span class="dv">19</span>, <span class="dv">57</span>, <span class="dv">74</span>),</span>
<span id="cb1333-5"><a href="appendix-b-data-wrangling.html#cb1333-5" tabindex="-1"></a>                      <span class="at">judgment_3 =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">89</span>, <span class="dv">94</span>, <span class="dv">27</span>, <span class="dv">29</span>, <span class="dv">19</span>, <span class="dv">57</span>, <span class="dv">74</span>))</span></code></pre></div>
<ul>
<li>Make the <code>df.practice2</code> data frame tidy (by turning into a long format).</li>
<li>Compute the z-score of each participants’ judgments (using the <code>scale()</code> function).</li>
<li>Calculate the mean and standard deviation of each participants’ z-scored judgments.</li>
<li>Notice anything interesting? Think about what <a href="https://www.statisticshowto.com/probability-and-statistics/z-score/">z-scoring</a> does …</li>
</ul>
<div class="sourceCode" id="cb1334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1334-1"><a href="appendix-b-data-wrangling.html#cb1334-1" tabindex="-1"></a><span class="co"># write your code here</span></span></code></pre></div>
</div>
</div>
<div id="joining-multiple-data-frames" class="section level3 hasAnchor" number="19.6.11">
<h3><span class="header-section-number">19.6.11</span> Joining multiple data frames<a href="appendix-b-data-wrangling.html#joining-multiple-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It’s nice to have all the information we need in a single, tidy data frame. We have learned above how to go from a single untidy data frame to a tidy one. However, often our situation to start off with is even worse. The information we need sits in several, messy data frames.</p>
<p>For example, we may have one data frame <code>df.stimuli</code> with information about each stimulus, and then have another data frame with participants’ responses <code>df.responses</code> that only contains a stimulus index but no other infromation about the stimuli.</p>
<div class="sourceCode" id="cb1335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1335-1"><a href="appendix-b-data-wrangling.html#cb1335-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>) <span class="co"># setting random seed to make this example reproducible</span></span>
<span id="cb1335-2"><a href="appendix-b-data-wrangling.html#cb1335-2" tabindex="-1"></a></span>
<span id="cb1335-3"><a href="appendix-b-data-wrangling.html#cb1335-3" tabindex="-1"></a><span class="co"># data frame with stimulus information</span></span>
<span id="cb1335-4"><a href="appendix-b-data-wrangling.html#cb1335-4" tabindex="-1"></a>df.stimuli <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">index =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb1335-5"><a href="appendix-b-data-wrangling.html#cb1335-5" tabindex="-1"></a>  <span class="at">height =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb1335-6"><a href="appendix-b-data-wrangling.html#cb1335-6" tabindex="-1"></a>  <span class="at">width =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>),</span>
<span id="cb1335-7"><a href="appendix-b-data-wrangling.html#cb1335-7" tabindex="-1"></a>  <span class="at">n_dots =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">5</span>, <span class="dv">13</span>, <span class="dv">7</span>),</span>
<span id="cb1335-8"><a href="appendix-b-data-wrangling.html#cb1335-8" tabindex="-1"></a>  <span class="at">color =</span> <span class="fu">c</span>(<span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;black&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1335-9"><a href="appendix-b-data-wrangling.html#cb1335-9" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code># A tibble: 5 × 5
  index height width n_dots color
  &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;
1     1      2     4     12 green
2     2      3     5     15 blue 
3     3      1     2      5 white
4     4      4     3     13 red  
5     5      5     1      7 black</code></pre>
<div class="sourceCode" id="cb1337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1337-1"><a href="appendix-b-data-wrangling.html#cb1337-1" tabindex="-1"></a><span class="co"># data frame with participants&#39; responses</span></span>
<span id="cb1337-2"><a href="appendix-b-data-wrangling.html#cb1337-2" tabindex="-1"></a>df.responses <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">participant =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">5</span>),</span>
<span id="cb1337-3"><a href="appendix-b-data-wrangling.html#cb1337-3" tabindex="-1"></a>  <span class="at">index =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">3</span>),</span>
<span id="cb1337-4"><a href="appendix-b-data-wrangling.html#cb1337-4" tabindex="-1"></a>  <span class="at">response =</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">100</span>, <span class="at">size =</span> <span class="dv">15</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="co"># randomly sample 15 values from 0 to 100</span></span>
<span id="cb1337-5"><a href="appendix-b-data-wrangling.html#cb1337-5" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code># A tibble: 15 × 3
   participant index response
         &lt;int&gt; &lt;int&gt;    &lt;int&gt;
 1           1     1       67
 2           1     2       38
 3           1     3        0
 4           1     4       33
 5           1     5       86
 6           2     1       42
 7           2     2       13
 8           2     3       81
 9           2     4       58
10           2     5       50
11           3     1       96
12           3     2       84
13           3     3       20
14           3     4       53
15           3     5       73</code></pre>
<p>The <code>df.stimuli</code> data frame contains an <code>index</code>, information about the <code>height</code>, and <code>width</code>, as well as the number of <code>dots</code>, and their <code>color</code>. Let’s imagine that participants had to judge how much they liked each image from a scale of 0 (“not liking this dot pattern at all”) to 100 (“super thrilled about this dot pattern”).</p>
<p>Let’s say that I now wanted to know what participants’ average response for the differently colored dot patterns are. Here is how I would do this:</p>
<div class="sourceCode" id="cb1339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1339-1"><a href="appendix-b-data-wrangling.html#cb1339-1" tabindex="-1"></a>df.responses <span class="sc">%&gt;%</span></span>
<span id="cb1339-2"><a href="appendix-b-data-wrangling.html#cb1339-2" tabindex="-1"></a>  <span class="fu">left_join</span>(df.stimuli <span class="sc">%&gt;%</span></span>
<span id="cb1339-3"><a href="appendix-b-data-wrangling.html#cb1339-3" tabindex="-1"></a>              <span class="fu">select</span>(index, color),</span>
<span id="cb1339-4"><a href="appendix-b-data-wrangling.html#cb1339-4" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;index&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1339-5"><a href="appendix-b-data-wrangling.html#cb1339-5" tabindex="-1"></a>  <span class="fu">group_by</span>(color) <span class="sc">%&gt;%</span></span>
<span id="cb1339-6"><a href="appendix-b-data-wrangling.html#cb1339-6" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">response_mean =</span> <span class="fu">mean</span>(response))</span></code></pre></div>
<pre><code># A tibble: 5 × 2
  color response_mean
  &lt;chr&gt;         &lt;dbl&gt;
1 black          69.7
2 blue           45  
3 green          68.3
4 red            48  
5 white          33.7</code></pre>
<p>Let’s take it step by step. The key here is to add the information from the <code>df.stimuli</code> data frame to the <code>df.responses</code> data frame.</p>
<div class="sourceCode" id="cb1341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1341-1"><a href="appendix-b-data-wrangling.html#cb1341-1" tabindex="-1"></a>df.responses <span class="sc">%&gt;%</span></span>
<span id="cb1341-2"><a href="appendix-b-data-wrangling.html#cb1341-2" tabindex="-1"></a>  <span class="fu">left_join</span>(df.stimuli <span class="sc">%&gt;%</span></span>
<span id="cb1341-3"><a href="appendix-b-data-wrangling.html#cb1341-3" tabindex="-1"></a>              <span class="fu">select</span>(index, color),</span>
<span id="cb1341-4"><a href="appendix-b-data-wrangling.html#cb1341-4" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;index&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 15 × 4
   participant index response color
         &lt;int&gt; &lt;int&gt;    &lt;int&gt; &lt;chr&gt;
 1           1     1       67 green
 2           1     2       38 blue 
 3           1     3        0 white
 4           1     4       33 red  
 5           1     5       86 black
 6           2     1       42 green
 7           2     2       13 blue 
 8           2     3       81 white
 9           2     4       58 red  
10           2     5       50 black
11           3     1       96 green
12           3     2       84 blue 
13           3     3       20 white
14           3     4       53 red  
15           3     5       73 black</code></pre>
<p>I’ve joined the <code>df.stimuli</code> table in which I’ve only selected the <code>index</code> and <code>color</code> column, with the <code>df.responses</code> table, and specified the <code>index</code> column as the one by which the tables should be joined. This is the only column that both of the data frames have in common.</p>
<p>To specify multiple columns by which we would like to join tables, we specify the <code>by</code> argument as follows: <code>by = c("one_column", "another_column")</code>.</p>
<p>Sometimes, the tables I want to join don’t have any column names in common. In that case, we can tell the <code>left_join()</code> function which column pair(s) should be used for joining.</p>
<div class="sourceCode" id="cb1343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1343-1"><a href="appendix-b-data-wrangling.html#cb1343-1" tabindex="-1"></a>df.responses <span class="sc">%&gt;%</span></span>
<span id="cb1343-2"><a href="appendix-b-data-wrangling.html#cb1343-2" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">stimuli =</span> index) <span class="sc">%&gt;%</span> <span class="co"># I&#39;ve renamed the index column to stimuli</span></span>
<span id="cb1343-3"><a href="appendix-b-data-wrangling.html#cb1343-3" tabindex="-1"></a>  <span class="fu">left_join</span>(df.stimuli <span class="sc">%&gt;%</span></span>
<span id="cb1343-4"><a href="appendix-b-data-wrangling.html#cb1343-4" tabindex="-1"></a>              <span class="fu">select</span>(index, color),</span>
<span id="cb1343-5"><a href="appendix-b-data-wrangling.html#cb1343-5" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;stimuli&quot;</span> <span class="ot">=</span> <span class="st">&quot;index&quot;</span>))</span></code></pre></div>
<pre><code># A tibble: 15 × 4
   participant stimuli response color
         &lt;int&gt;   &lt;int&gt;    &lt;int&gt; &lt;chr&gt;
 1           1       1       67 green
 2           1       2       38 blue 
 3           1       3        0 white
 4           1       4       33 red  
 5           1       5       86 black
 6           2       1       42 green
 7           2       2       13 blue 
 8           2       3       81 white
 9           2       4       58 red  
10           2       5       50 black
11           3       1       96 green
12           3       2       84 blue 
13           3       3       20 white
14           3       4       53 red  
15           3       5       73 black</code></pre>
<p>Here, I’ve first renamed the index column (to create the problem) and then used the <code>by = c("stimuli" = "index")</code> construction (to solve the problem).</p>
<p>In my experience, it often takes a little bit of playing around to make sure that the data frames were joined as intended. One very good indicator is the row number of the initial data frame, and the joined one. For a <code>left_join()</code>, most of the time, we want the row number of the original data frame (“the one on the left”) and the joined data frame to be the same. If the row number changed, something probably went wrong.</p>
<p>Take a look at the <code>join</code> help file to see other operations for combining two or more data frames into one (make sure to look at the one from the <code>dplyr</code> package).</p>
<div id="practice-3-1" class="section level4 hasAnchor" number="19.6.11.1">
<h4><span class="header-section-number">19.6.11.1</span> Practice 3<a href="appendix-b-data-wrangling.html#practice-3-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Load these three data frames first:</p>
<div class="sourceCode" id="cb1345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1345-1"><a href="appendix-b-data-wrangling.html#cb1345-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb1345-2"><a href="appendix-b-data-wrangling.html#cb1345-2" tabindex="-1"></a></span>
<span id="cb1345-3"><a href="appendix-b-data-wrangling.html#cb1345-3" tabindex="-1"></a>df.judgments <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">participant =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">5</span>),</span>
<span id="cb1345-4"><a href="appendix-b-data-wrangling.html#cb1345-4" tabindex="-1"></a>                      <span class="at">stimulus =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>), <span class="dv">5</span>),</span>
<span id="cb1345-5"><a href="appendix-b-data-wrangling.html#cb1345-5" tabindex="-1"></a>                      <span class="at">judgment =</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">100</span>, <span class="at">size =</span> <span class="dv">15</span>, <span class="at">replace =</span> T))</span>
<span id="cb1345-6"><a href="appendix-b-data-wrangling.html#cb1345-6" tabindex="-1"></a></span>
<span id="cb1345-7"><a href="appendix-b-data-wrangling.html#cb1345-7" tabindex="-1"></a>df.information <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">number =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">100</span>, <span class="at">length.out =</span> <span class="dv">5</span>),</span>
<span id="cb1345-8"><a href="appendix-b-data-wrangling.html#cb1345-8" tabindex="-1"></a>                        <span class="at">color =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;black&quot;</span>, <span class="st">&quot;white&quot;</span>))</span></code></pre></div>
<p>Create a new data frame called <code>df.join</code> that combines the information from both <code>df.judgments</code> and <code>df.information</code>. Note that column with the colors is called <code>stimulus</code> in <code>df.judgments</code> and <code>color</code> in <code>df.information</code>. At the end, you want a data frame that contains the following columns: <code>participant</code>, <code>stimulus</code>, <code>number</code>, and <code>judgment</code>.</p>
<div class="sourceCode" id="cb1346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1346-1"><a href="appendix-b-data-wrangling.html#cb1346-1" tabindex="-1"></a><span class="co"># write your code here</span></span></code></pre></div>
</div>
</div>
<div id="dealing-with-missing-data" class="section level3 hasAnchor" number="19.6.12">
<h3><span class="header-section-number">19.6.12</span> Dealing with missing data<a href="appendix-b-data-wrangling.html#dealing-with-missing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are two ways for data to be missing.</p>
<ul>
<li><strong>implicit</strong>: data is not present in the table</li>
<li><strong>explicit</strong>: data is flagged with <code>NA</code></li>
</ul>
<p>We can check for explicit missing values using the <code>is.na()</code> function like so:</p>
<div class="sourceCode" id="cb1347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1347-1"><a href="appendix-b-data-wrangling.html#cb1347-1" tabindex="-1"></a>tmp.na <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">3</span>)</span>
<span id="cb1347-2"><a href="appendix-b-data-wrangling.html#cb1347-2" tabindex="-1"></a><span class="fu">is.na</span>(tmp.na)</span></code></pre></div>
<pre><code>[1] FALSE FALSE  TRUE FALSE</code></pre>
<p>I’ve first created a vector <code>tmp.na</code> with a missing value at index 3. Calling the <code>is.na()</code> function on this vector yields a logical vector with <code>FALSE</code> for each value that is not missing, and <code>TRUE</code> for each missing value.</p>
<p>Let’s say that we have a data frame with missing values and that we want to replace those missing values with something else. Let’s first create a data frame with missing values.</p>
<div class="sourceCode" id="cb1349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1349-1"><a href="appendix-b-data-wrangling.html#cb1349-1" tabindex="-1"></a>df.missing <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>),</span>
<span id="cb1349-2"><a href="appendix-b-data-wrangling.html#cb1349-2" tabindex="-1"></a>                    <span class="at">y =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;b&quot;</span>))</span>
<span id="cb1349-3"><a href="appendix-b-data-wrangling.html#cb1349-3" tabindex="-1"></a><span class="fu">print</span>(df.missing)</span></code></pre></div>
<pre><code># A tibble: 3 × 2
      x y    
  &lt;dbl&gt; &lt;chr&gt;
1     1 a    
2     2 &lt;NA&gt; 
3    NA b    </code></pre>
<p>We can use the <code>replace_na()</code> function to replace the missing values with something else.</p>
<div class="sourceCode" id="cb1351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1351-1"><a href="appendix-b-data-wrangling.html#cb1351-1" tabindex="-1"></a>df.missing <span class="sc">%&gt;%</span></span>
<span id="cb1351-2"><a href="appendix-b-data-wrangling.html#cb1351-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">x =</span> <span class="fu">replace_na</span>(x, <span class="at">replace =</span> <span class="dv">0</span>),</span>
<span id="cb1351-3"><a href="appendix-b-data-wrangling.html#cb1351-3" tabindex="-1"></a>         <span class="at">y =</span> <span class="fu">replace_na</span>(y, <span class="at">replace =</span> <span class="st">&quot;unknown&quot;</span>))</span></code></pre></div>
<pre><code># A tibble: 3 × 2
      x y      
  &lt;dbl&gt; &lt;chr&gt;  
1     1 a      
2     2 unknown
3     0 b      </code></pre>
<p>We can also remove rows with missing values using the <code>drop_na()</code> function.</p>
<div class="sourceCode" id="cb1353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1353-1"><a href="appendix-b-data-wrangling.html#cb1353-1" tabindex="-1"></a>df.missing <span class="sc">%&gt;%</span></span>
<span id="cb1353-2"><a href="appendix-b-data-wrangling.html#cb1353-2" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span></code></pre></div>
<pre><code># A tibble: 1 × 2
      x y    
  &lt;dbl&gt; &lt;chr&gt;
1     1 a    </code></pre>
<p>If we only want to drop values from specific columns, we can specify these columns within the <code>drop_na()</code> function call. So, if we only want to drop rows that have missing values in the <code>x</code> column, we can write:</p>
<div class="sourceCode" id="cb1355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1355-1"><a href="appendix-b-data-wrangling.html#cb1355-1" tabindex="-1"></a>df.missing <span class="sc">%&gt;%</span></span>
<span id="cb1355-2"><a href="appendix-b-data-wrangling.html#cb1355-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(x)</span></code></pre></div>
<pre><code># A tibble: 2 × 2
      x y    
  &lt;dbl&gt; &lt;chr&gt;
1     1 a    
2     2 &lt;NA&gt; </code></pre>
<p>To make the distinction between implicit and explicit missing values more concrete, let’s consider the following example (taken from <a href="https://r4ds.had.co.nz/tidy-data.html#missing-values-3">here</a>):</p>
<div class="sourceCode" id="cb1357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1357-1"><a href="appendix-b-data-wrangling.html#cb1357-1" tabindex="-1"></a>df.stocks <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">year   =</span> <span class="fu">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),</span>
<span id="cb1357-2"><a href="appendix-b-data-wrangling.html#cb1357-2" tabindex="-1"></a>                   <span class="at">qtr    =</span> <span class="fu">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>),</span>
<span id="cb1357-3"><a href="appendix-b-data-wrangling.html#cb1357-3" tabindex="-1"></a>                   <span class="at">return =</span> <span class="fu">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.35</span>,   <span class="cn">NA</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>, <span class="fl">2.66</span>))</span></code></pre></div>
<p>There are two missing values in this dataset:</p>
<ul>
<li>The return for the fourth quarter of 2015 is explicitly missing, because the cell where its value should be instead contains <code>NA</code>.</li>
<li>The return for the first quarter of 2016 is implicitly missing, because it simply does not appear in the dataset.</li>
</ul>
<p>We can use the <code>complete()</code> function to make implicit missing values explicit:</p>
<div class="sourceCode" id="cb1358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1358-1"><a href="appendix-b-data-wrangling.html#cb1358-1" tabindex="-1"></a>df.stocks <span class="sc">%&gt;%</span></span>
<span id="cb1358-2"><a href="appendix-b-data-wrangling.html#cb1358-2" tabindex="-1"></a>  <span class="fu">complete</span>(year, qtr)</span></code></pre></div>
<pre><code># A tibble: 8 × 3
   year   qtr return
  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1  2015     1   1.88
2  2015     2   0.59
3  2015     3   0.35
4  2015     4  NA   
5  2016     1  NA   
6  2016     2   0.92
7  2016     3   0.17
8  2016     4   2.66</code></pre>
<p>Note how now, the data frame contains an additional row in which <code>year = 2016</code>, <code>qtr = 1</code> and <code>return = NA</code> even though we didn’t originally specify this.</p>
<p>We can also directly tell the <code>complete()</code> function to replace the <code>NA</code> values via passing a list to its <code>fill</code> argument like so:</p>
<div class="sourceCode" id="cb1360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1360-1"><a href="appendix-b-data-wrangling.html#cb1360-1" tabindex="-1"></a>df.stocks <span class="sc">%&gt;%</span></span>
<span id="cb1360-2"><a href="appendix-b-data-wrangling.html#cb1360-2" tabindex="-1"></a>  <span class="fu">complete</span>(year, qtr, <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">return =</span> <span class="dv">0</span>))</span></code></pre></div>
<pre><code># A tibble: 8 × 3
   year   qtr return
  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1  2015     1   1.88
2  2015     2   0.59
3  2015     3   0.35
4  2015     4   0   
5  2016     1   0   
6  2016     2   0.92
7  2016     3   0.17
8  2016     4   2.66</code></pre>
<p>This specifies that we would like to replace any <code>NA</code> in the <code>return</code> column with <code>0</code>. Again, if we had multiple columns with <code>NA</code>s, we could speficy for each column separately how to replace it.</p>
</div>
</div>
<div id="reading-in-data" class="section level2 hasAnchor" number="19.7">
<h2><span class="header-section-number">19.7</span> Reading in data<a href="appendix-b-data-wrangling.html#reading-in-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So far, we’ve used data sets that already came with the packages we’ve loaded. In the visualization chapters, we used the <code>diamonds</code> data set from the <code>ggplot2</code> package, and in the data wrangling chapters, we used the <code>starwars</code> data set from the <code>dplyr</code> package.</p>
<table>
<thead>
<tr class="header">
<th align="right">file type</th>
<th align="left">platform</th>
<th align="left">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>csv</code></td>
<td align="left">general</td>
<td align="left">medium-size data frames</td>
</tr>
<tr class="even">
<td align="right"><code>RData</code></td>
<td align="left">R</td>
<td align="left">saving the results of intensive computations</td>
</tr>
<tr class="odd">
<td align="right"><code>xls</code></td>
<td align="left">excel</td>
<td align="left">people who use excel</td>
</tr>
<tr class="even">
<td align="right"><code>json</code></td>
<td align="left">general</td>
<td align="left">more complex data structures</td>
</tr>
<tr class="odd">
<td align="right"><code>feather</code></td>
<td align="left">python &amp; R</td>
<td align="left">fast interaction between R and python</td>
</tr>
</tbody>
</table>
<p>The <code>foreign</code> <a href="https://cran.r-project.org/web/packages/foreign/index.html">package</a> helps with importing data that was saved in SPSS, Stata, or Minitab.</p>
<p>For data in a json format, I highly recommend the <code>tidyjson</code> <a href="https://github.com/sailthru/tidyjson">package</a>.</p>
<div id="csv" class="section level3 hasAnchor" number="19.7.1">
<h3><span class="header-section-number">19.7.1</span> csv<a href="appendix-b-data-wrangling.html#csv" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>I’ve stored some data files in the <code>data/</code> subfolder. Let’s first read a csv (= <strong>c</strong>omma-<strong>s</strong>eparated-<strong>v</strong>alue) file.</p>
<div class="sourceCode" id="cb1362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1362-1"><a href="appendix-b-data-wrangling.html#cb1362-1" tabindex="-1"></a>df.csv <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/movies.csv&quot;</span>)</span></code></pre></div>
<pre><code>Rows: 2961 Columns: 11
── Column specification ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (3): title, genre, director
dbl (8): year, duration, gross, budget, cast_facebook_likes, votes, reviews,...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>The <code>read_csv()</code> function gives us information about how each column was parsed. Here, we have some columns that are characters (such as <code>title</code> and <code>genre</code>), and some columns that are numeric (such as <code>year</code> and <code>duration</code>). Note that it says <code>double()</code> in the specification but double and numeric are identical.</p>
<p>And let’s take a quick peek at the data:</p>
<div class="sourceCode" id="cb1364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1364-1"><a href="appendix-b-data-wrangling.html#cb1364-1" tabindex="-1"></a>df.csv <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Rows: 2,961
Columns: 11
$ title               &lt;chr&gt; &quot;Over the Hill to the Poorhouse&quot;, &quot;The Broadway Me…
$ genre               &lt;chr&gt; &quot;Crime&quot;, &quot;Musical&quot;, &quot;Comedy&quot;, &quot;Comedy&quot;, &quot;Comedy&quot;, …
$ director            &lt;chr&gt; &quot;Harry F. Millarde&quot;, &quot;Harry Beaumont&quot;, &quot;Lloyd Baco…
$ year                &lt;dbl&gt; 1920, 1929, 1933, 1935, 1936, 1937, 1939, 1939, 19…
$ duration            &lt;dbl&gt; 110, 100, 89, 81, 87, 83, 102, 226, 88, 144, 172, …
$ gross               &lt;dbl&gt; 3000000, 2808000, 2300000, 3000000, 163245, 184925…
$ budget              &lt;dbl&gt; 100000, 379000, 439000, 609000, 1500000, 2000000, …
$ cast_facebook_likes &lt;dbl&gt; 4, 109, 995, 824, 352, 229, 2509, 1862, 1178, 2037…
$ votes               &lt;dbl&gt; 5, 4546, 7921, 13269, 143086, 133348, 291875, 2153…
$ reviews             &lt;dbl&gt; 2, 107, 162, 164, 331, 349, 746, 863, 252, 119, 33…
$ rating              &lt;dbl&gt; 4.8, 6.3, 7.7, 7.8, 8.6, 7.7, 8.1, 8.2, 7.5, 6.9, …</code></pre>
<p>The data frame contains a bunch of movies with information about their genre, director, rating, etc.</p>
<p>The <code>readr</code> package (which contains the <code>read_csv()</code> function) has a number of other functions for reading data. Just type <code>read_</code> in the console below and take a look at the suggestions that autocomplete offers.</p>
</div>
<div id="rdata" class="section level3 hasAnchor" number="19.7.2">
<h3><span class="header-section-number">19.7.2</span> RData<a href="appendix-b-data-wrangling.html#rdata" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>RData is a data format native to R. Since this format can only be read by R, it’s not a good format for sharing data. However, it’s a useful format that allows us to flexibly save and load R objects. For example, consider that we always start our script by reading in and structuring data, and that this takes quite a while. One thing we can do is to save the output of intermediate steps as an RData object, and then simply load this object (instead of re-running the whole routine every time).</p>
<p>We read (or load) an RData file in the following way:</p>
<div class="sourceCode" id="cb1366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1366-1"><a href="appendix-b-data-wrangling.html#cb1366-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data/test.RData&quot;</span>, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>Loading objects:
  df.test</code></pre>
<p>I’ve set the <code>verbose =</code> argument to <code>TRUE</code> here so that the <code>load()</code> function tells me what objects it added to the environment. This is useful for checking whether existing objects were overwritten.</p>
</div>
</div>
<div id="saving-data" class="section level2 hasAnchor" number="19.8">
<h2><span class="header-section-number">19.8</span> Saving data<a href="appendix-b-data-wrangling.html#saving-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="csv-1" class="section level3 hasAnchor" number="19.8.1">
<h3><span class="header-section-number">19.8.1</span> csv<a href="appendix-b-data-wrangling.html#csv-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To save a data frame as a csv file, we simply write:</p>
<div class="sourceCode" id="cb1368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1368-1"><a href="appendix-b-data-wrangling.html#cb1368-1" tabindex="-1"></a>df.test <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb1368-2"><a href="appendix-b-data-wrangling.html#cb1368-2" tabindex="-1"></a>                 <span class="at">y =</span> <span class="fu">c</span>(<span class="st">&quot;test1&quot;</span>, <span class="st">&quot;test2&quot;</span>, <span class="st">&quot;test3&quot;</span>))</span>
<span id="cb1368-3"><a href="appendix-b-data-wrangling.html#cb1368-3" tabindex="-1"></a></span>
<span id="cb1368-4"><a href="appendix-b-data-wrangling.html#cb1368-4" tabindex="-1"></a><span class="fu">write_csv</span>(df.test, <span class="at">file =</span> <span class="st">&quot;data/test.csv&quot;</span>)</span></code></pre></div>
<p>Just like for reading in data, the <code>readr</code> package has a number of other functions for saving data. Just type <code>write_</code> in the console below and take a look at the autocomplete suggestions.</p>
</div>
<div id="rdata-1" class="section level3 hasAnchor" number="19.8.2">
<h3><span class="header-section-number">19.8.2</span> RData<a href="appendix-b-data-wrangling.html#rdata-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To save objects as an RData file, we write:</p>
<div class="sourceCode" id="cb1369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1369-1"><a href="appendix-b-data-wrangling.html#cb1369-1" tabindex="-1"></a><span class="fu">save</span>(df.test, <span class="at">file =</span> <span class="st">&quot;data/test.RData&quot;</span>)</span></code></pre></div>
<p>We can add multiple objects simply by adding them at the beginning, like so:</p>
<div class="sourceCode" id="cb1370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1370-1"><a href="appendix-b-data-wrangling.html#cb1370-1" tabindex="-1"></a><span class="fu">save</span>(df.test, df.starwars, <span class="at">file =</span> <span class="st">&quot;data/test_starwars.RData&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="additional-resources-13" class="section level2 hasAnchor" number="19.9">
<h2><span class="header-section-number">19.9</span> Additional resources<a href="appendix-b-data-wrangling.html#additional-resources-13" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="cheatsheets-3" class="section level3 hasAnchor" number="19.9.1">
<h3><span class="header-section-number">19.9.1</span> Cheatsheets<a href="appendix-b-data-wrangling.html#cheatsheets-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><a href="figures/base-r.pdf">base R</a> –&gt; summary of how to use base R (we will mostly use the tidyverse but it’s still important to know how to do things in base R)</li>
<li><a href="figures/data-transformation.pdf">data transformation</a> –&gt; transforming data using <code>dplyr</code></li>
</ul>
</div>
<div id="data-camp-courses" class="section level3 hasAnchor" number="19.9.2">
<h3><span class="header-section-number">19.9.2</span> Data camp courses<a href="appendix-b-data-wrangling.html#data-camp-courses" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><a href="https://www.datacamp.com/courses/dplyr-data-manipulation-r-tutorial">dplyr</a></li>
<li><a href="https://www.datacamp.com/courses/introduction-to-the-tidyverse">tidyverse</a></li>
<li><a href="https://www.datacamp.com/courses/working-with-data-in-the-tidyverse">working with data in the tidyverse</a></li>
<li><a href="https://www.datacamp.com/courses/importing-cleaning-data-in-r-case-studies">cleaning data</a></li>
<li><a href="https://www.datacamp.com/courses/importing-cleaning-data-in-r-case-studies">cleaning data: case studies</a></li>
<li><a href="https://www.datacamp.com/courses/string-manipulation-in-r-with-stringr">string manipulation in R</a></li>
<li><a href="https://www.datacamp.com/courses/intermediate-r">Intermediate R</a></li>
<li><a href="https://www.datacamp.com/courses/introduction-to-function-writing-in-r">Writing functions in R</a></li>
</ul>
</div>
<div id="books-and-chapters-3" class="section level3 hasAnchor" number="19.9.3">
<h3><span class="header-section-number">19.9.3</span> Books and chapters<a href="appendix-b-data-wrangling.html#books-and-chapters-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><a href="https://r4ds.had.co.nz/wrangle-intro.html">Chapters 9-15 in “R for Data Science”</a></li>
<li><a href="http://socviz.co/workgeoms.html#workgeoms">Chapter 5 in “Data Visualization - A practical introduction”</a></li>
</ul>
</div>
</div>
<div id="session-info-16" class="section level2 hasAnchor" number="19.10">
<h2><span class="header-section-number">19.10</span> Session info<a href="appendix-b-data-wrangling.html#session-info-16" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Information about this R session including which version of R was used, and what packages were loaded.</p>
<div class="sourceCode" id="cb1371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1371-1"><a href="appendix-b-data-wrangling.html#cb1371-1" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div>
<pre><code>R version 4.3.0 (2023-04-21)
Platform: aarch64-apple-darwin20 (64-bit)
Running under: macOS 14.1.1

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: America/Chicago
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] lubridate_1.9.2 forcats_1.0.0   stringr_1.5.0   dplyr_1.1.4    
 [5] purrr_1.0.2     readr_2.1.4     tidyr_1.3.0     tibble_3.2.1   
 [9] ggplot2_3.4.4   tidyverse_2.0.0 DT_0.31         visdat_0.6.0   
[13] skimr_2.1.5     knitr_1.42     

loaded via a namespace (and not attached):
 [1] sass_0.4.6        utf8_1.2.3        generics_0.1.3    stringi_1.7.12   
 [5] hms_1.1.3         digest_0.6.31     magrittr_2.0.3    evaluate_0.21    
 [9] grid_4.3.0        timechange_0.2.0  bookdown_0.34     fastmap_1.1.1    
[13] jsonlite_1.8.4    fansi_1.0.4       crosstalk_1.2.0   scales_1.3.0     
[17] jquerylib_0.1.4   cli_3.6.1         crayon_1.5.2      rlang_1.1.1      
[21] bit64_4.0.5       ellipsis_0.3.2    munsell_0.5.0     base64enc_0.1-3  
[25] withr_2.5.0       repr_1.1.6        cachem_1.0.8      yaml_2.3.7       
[29] parallel_4.3.0    tools_4.3.0       tzdb_0.4.0        colorspace_2.1-0 
[33] vctrs_0.6.5       R6_2.5.1          lifecycle_1.0.3   bit_4.0.5        
[37] htmlwidgets_1.6.2 vroom_1.6.3       pkgconfig_2.0.3   pillar_1.9.0     
[41] bslib_0.4.2       gtable_0.3.3      glue_1.6.2        xfun_0.39        
[45] tidyselect_1.2.0  highr_0.10        farver_2.1.1      htmltools_0.5.5  
[49] labeling_0.4.2    rmarkdown_2.21    compiler_4.3.0   </code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualization-2-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="model-assumptions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"],
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psych252/psych252book/edit/master/18-data_wrangling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": false,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toc_depth": 3
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
